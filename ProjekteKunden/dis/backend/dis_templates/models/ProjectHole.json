{
    "module": "Project",
    "name": "Hole",
    "table": "project_hole",
    "importTable": "EXP_PROJECT_HOLE",
    "parentModel": "ProjectSite",
    "columns": {
        "id": {
            "name": "id",
            "importSource": "SKEY",
            "type": "integer",
            "size": 11,
            "required": false,
            "primaryKey": true,
            "autoInc": true,
            "label": "SKEY",
            "description": "SKEY; auto incremented id",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": true,
            "searchable": true
        },
        "site_id": {
            "name": "site_id",
            "importSource": "return function($aImportedRecord) {\n$cParentFilterValue = preg_replace(\"/_[^_]+$/\", \"\", $aImportedRecord[\"combined_id\"]); \nreturn \\app\\dis_migration\\Module::lookupValue(\"project_site\", \"id\", [\"combined_id\" => $cParentFilterValue]);\n};",
            "type": "integer",
            "size": 11,
            "required": true,
            "primaryKey": false,
            "autoInc": false,
            "label": "Site ID",
            "description": "Parent ID",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": true,
            "searchable": true
        },
        "combined_id": {
            "name": "combined_id",
            "importSource": "LTRIM(CAST([EXPEDITION] AS varchar)) + '_' + LTRIM(CAST([SITE] AS varchar)) + '_' + LTRIM([HOLE])",
            "type": "string",
            "size": "",
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Combined ID",
            "description": "Combined ID for the borehole",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "hole": {
            "name": "hole",
            "importSource": "HOLE",
            "type": "string",
            "size": 64,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Hole Code/Identfier",
            "description": "ICDP: one character A - Z",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "hole_name": {
            "name": "hole_name",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Borehole Name",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "igsn": {
            "name": "igsn",
            "importSource": "IGSN",
            "type": "string",
            "size": 32,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "IGSN",
            "description": "International GeoSample Number",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "H",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "drilling_method": {
            "name": "drilling_method",
            "importSource": "",
            "type": "string_multiple",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Drilling method",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "depth_water": {
            "name": "depth_water",
            "importSource": "",
            "type": "double",
            "size": "",
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Water Depth [m]",
            "description": "Water Depth at Borehole Location",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "0",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "drillers_reference_height": {
            "name": "drillers_reference_height",
            "oldName": "elevation_rig",
            "importSource": "",
            "type": "double",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Height of Driller's Reference Point [m]",
            "description": "Height of Drillers' Depth Reference above ground (-> elevation)/sea floor",
            "validator": "",
            "validatorMessage": "",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "latitude": {
            "name": "latitude",
            "oldName": "latitude_dec",
            "importSource": "",
            "type": "double",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Decimal Latitude [WGS84]",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "longitude": {
            "name": "longitude",
            "oldName": "longitude_dec",
            "importSource": "",
            "type": "double",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Decimal Longitude [WGS 84]",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "coordinate_x": {
            "name": "coordinate_x",
            "importSource": "",
            "type": "double",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Coordinate X",
            "description": "X value in specified SRS",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "coordinate_y": {
            "name": "coordinate_y",
            "importSource": "",
            "type": "double",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Coordinate Y",
            "description": "Y value in specified SRS",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "elevation": {
            "name": "elevation",
            "oldName": "ground_level",
            "importSource": "",
            "type": "double",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Elevation [m]",
            "description": "In SRS if 3D or Meter above Sea Level",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "spatial_reference_system": {
            "name": "spatial_reference_system",
            "oldName": "coordinate_system",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Spatial reference system (SRS)",
            "description": "EPSG code of the SRS",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "direction": {
            "name": "direction",
            "importSource": "DIRECTION",
            "type": "string",
            "size": 0,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Compass Direction of Inclination",
            "description": "Intended or Deviated",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "inclination": {
            "name": "inclination",
            "importSource": "INCLINATION",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Borehole inclination [degree]",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "degrees",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "platform_name": {
            "name": "platform_name",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Platform Name",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "platform_operator": {
            "name": "platform_operator",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Platform Operator",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "platform_type": {
            "name": "platform_type",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Platform type",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "platform_description": {
            "name": "platform_description",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Description of Drilling platform",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "platform_manager": {
            "name": "platform_manager",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Platform Manager",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "methods_in_hole": {
            "name": "methods_in_hole",
            "importSource": "",
            "type": "string_multiple",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Measurements in Borehole",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "gear": {
            "name": "gear",
            "importSource": "",
            "type": "string_multiple",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Gear/Equipment",
            "description": "Other than Drilling Equipment",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "start_date": {
            "name": "start_date",
            "importSource": "START_DATE",
            "type": "date",
            "size": 0,
            "required": true,
            "primaryKey": false,
            "autoInc": false,
            "label": "Start date",
            "description": "Start Date of Drilling Operation",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "end_date": {
            "name": "end_date",
            "importSource": "END_DATE",
            "type": "date",
            "size": 0,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "End date",
            "description": "End Date of Drilling Operation",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "moratorium_start": {
            "name": "moratorium_start",
            "importSource": "",
            "type": "date",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Start Date of Moratorium ",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "moratorium_end": {
            "name": "moratorium_end",
            "importSource": "",
            "type": "date",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "End Date of Moratorium",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "repository_name": {
            "name": "repository_name",
            "importSource": "",
            "type": "string_multiple",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Name of Repositories",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "comment": {
            "name": "comment",
            "oldName": "comments",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Additional information",
            "description": "Comment on the borehole",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "comment_identifier": {
            "name": "comment_identifier",
            "oldName": "comments_3",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Additional information",
            "description": "e.g. alternative identifiers",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "comment_drillers_reference": {
            "name": "comment_drillers_reference",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Description of drillers' reference",
            "description": "Short description of the depth reference",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "comment_elevation": {
            "name": "comment_elevation",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Description of Permanent Depth Reference",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "comment_spatial_reference": {
            "name": "comment_spatial_reference",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Additional information",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "comment_repository": {
            "name": "comment_repository",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Additional information",
            "description": "",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "isLocked": null,
            "searchable": true
        },
        "depth_drilled": {
            "name": "depth_drilled",
            "importSource": "",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Total drilled depth [mbs/mbsf]",
            "description": "(calculated from last core bottom depth)",
            "validator": "",
            "validatorMessage": "",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "empty($this->coreCores) ? '0' : max(array_column($this->coreCores, 'drillers_bottom_depth'))",
            "isLocked": null,
            "searchable": false
        },
        "total_cored_length": {
            "name": "total_cored_length",
            "importSource": "",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Total Cored Length [m]",
            "description": "(calculated from core lengths)",
            "validator": "",
            "validatorMessage": "",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "empty($this->coreCores) ? '0' : round(array_sum(array_column($this->coreCores, 'drilled_length')), 2)",
            "isLocked": null,
            "searchable": false
        },
        "total_core_recovery": {
            "name": "total_core_recovery",
            "importSource": "",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Total core recovery [%]",
            "description": "Total core recovery in the borehole",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "round((is_null(array_sum(array_column($this->coreCores, 'drilled_length')))  || array_sum(array_column($this->coreCores, 'drilled_length')) == 0) ? '0' : array_sum(array_column($this->coreCores, 'core_recovery')) / array_sum(array_column($this->coreCores, 'drilled_length')) * 100, 2)",
            "isLocked": null,
            "searchable": false
        }
    },
    "indices": {
        "id": {
            "name": "id",
            "type": "PRIMARY",
            "columns": [
                "id"
            ],
            "isLocked": true
        },
        "site_id": {
            "name": "site_id",
            "type": "KEY",
            "columns": [
                "site_id"
            ],
            "isLocked": null
        },
        "site_id__hole": {
            "name": "site_id__hole",
            "type": "UNIQUE",
            "columns": [
                "site_id",
                "hole"
            ],
            "isLocked": true
        }
    },
    "relations": {
        "project_hole__project_site__parent": {
            "name": "project_hole__project_site__parent",
            "foreignTable": "project_site",
            "localColumns": [
                "site_id"
            ],
            "foreignColumns": [
                "id"
            ],
            "isLocked": true
        }
    },
    "behaviors": [
        {
            "behaviorClass": "app\\behaviors\\template\\UniqueCombinationAutoIncrementBehavior",
            "parameters": {
                "searchFields": [
                    "site_id"
                ],
                "fieldToFill": "hole",
                "useAlphabet": true
            }
        }
    ],
    "createdAt": 1583844047,
    "modifiedAt": 1636700887,
    "generatedAt": 1636700893,
    "fullName": "ProjectHole"
}

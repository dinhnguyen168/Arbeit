{
    "module": "Core",
    "name": "Core",
    "table": "core_core",
    "importTable": "EXP_CORE_CORE",
    "parentModel": "ProjectHole",
    "columns": {
        "id": {
            "name": "id",
            "importSource": "",
            "type": "integer",
            "size": 11,
            "required": false,
            "primaryKey": true,
            "autoInc": true,
            "label": "ID",
            "description": "auto incremented id",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "hole_id": {
            "name": "hole_id",
            "importSource": "return function($aImportedRecord) {\n$cParentFilterValue = preg_replace(\"/_[^_]+$/\", \"\", $aImportedRecord[\"combined_id\"]); \nreturn \\app\\dis_migration\\Module::lookupValue(\"project_hole\", \"id\", [\"combined_id\" => $cParentFilterValue]);\n};",
            "type": "integer",
            "size": 11,
            "required": true,
            "primaryKey": false,
            "autoInc": false,
            "label": "Hole Id",
            "description": "Parent ID in table project_hole",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "core": {
            "name": "core",
            "importSource": "CORE",
            "type": "integer",
            "size": 5,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Core Number",
            "description": "Consecutive numbering of the core runs",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "combined_id": {
            "name": "combined_id",
            "importSource": "LTRIM(CAST([EXPEDITION] AS varchar)) + '_' + LTRIM(CAST([SITE] AS varchar)) + '_' + LTRIM([HOLE]) + '_' + LTRIM(CAST([CORE] AS varchar))",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Combined ID",
            "description": "Combined ID for the core run",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "curator_contact_person_id": {
            "name": "curator_contact_person_id",
            "importSource": "",
            "type": "one_to_many",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Curator",
            "description": "The analyst/curator who created the data record",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "person_acronym",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "contact_person",
            "searchable": true
        },
        "core_ondeck": {
            "name": "core_ondeck",
            "importSource": "CORE_ONDECK",
            "type": "dateTime",
            "size": 0,
            "required": true,
            "primaryKey": false,
            "autoInc": false,
            "label": "Core on Deck (CoD)",
            "description": "The date and time when the core run arrived on the drilling dec [UTC]",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "core_type": {
            "name": "core_type",
            "importSource": "CORE_TYPE",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Core Type",
            "description": "",
            "validator": "",
            "validatorMessage": "Type of coring tool ",
            "unit": "",
            "selectListName": "CORE_TYPE",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "drillers_top_depth": {
            "name": "drillers_top_depth",
            "oldName": "drillers_depth",
            "importSource": "",
            "type": "double",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Drillers Depth of Core Top [m]",
            "description": "Depth below drillers reference point (\"rig floor\")",
            "validator": ">=0.0",
            "validatorMessage": "real value >=0.0",
            "unit": "mbrf",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "drilled_length": {
            "name": "drilled_length",
            "importSource": "DRILLED_LENGTH",
            "type": "double",
            "size": null,
            "required": true,
            "primaryKey": false,
            "autoInc": false,
            "label": "Drilled Length [m]",
            "description": "Drilled length [m] as reported by the drillers",
            "validator": ">=0.0",
            "validatorMessage": "real value >=0.0",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "drillers_bottom_depth": {
            "name": "drillers_bottom_depth",
            "importSource": "",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Drillers Depth of Core Bottom [m]",
            "description": "Depth below drillers reference point (\"rig floor\")",
            "validator": "",
            "validatorMessage": "",
            "unit": "mbrf",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "$this->id ? round($this->drillers_top_depth + $this->drilled_length, 2) : ''",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": false
        },
        "core_top_depth": {
            "name": "core_top_depth",
            "importSource": "",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Core Top Depth Below Surface [m]",
            "description": "Core top depth below surface or sea floor",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "$this->id ? round($this->drillers_top_depth - $this->parent->drillers_reference_height - $this->parent->depth_water, 2) : ''",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": false
        },
        "core_bottom_depth": {
            "name": "core_bottom_depth",
            "importSource": "",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Core Bottom Depth Below Surface [m]",
            "description": "Core bottom depth below surface",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "$this->id ? round($this->drillers_top_depth - $this->parent->drillers_reference_height - $this->parent->depth_water + $this->drilled_length, 2) : ''",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": false
        },
        "core_recovery": {
            "name": "core_recovery",
            "importSource": "CORE_RECOVERY",
            "type": "double",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Core Recovery [m]",
            "description": "Measured length of the recovered drill core [m]",
            "validator": "",
            "validatorMessage": "",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "core_recovery_pc": {
            "name": "core_recovery_pc",
            "importSource": "",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Core Recovery [%]",
            "description": "Fraction of recovered core from drilled length [%]",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "$this->id ? ($this->drilled_length == 0 ? '0' : round($this->core_recovery / $this->drilled_length *100, 2)) : ''",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": false
        },
        "core_loss_reason": {
            "name": "core_loss_reason",
            "importSource": "CORE_LOSS_REASON",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Core Loss Reason",
            "description": "Reason for core loss, if known",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "continuity": {
            "name": "continuity",
            "importSource": "CONTINUITY",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Continuity Between Cores",
            "description": "Continuity of the drill core with respect to core loss and major fractures",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "CORE_CONTINUITY",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "section_count": {
            "name": "section_count",
            "oldName": "last_section",
            "importSource": "",
            "type": "integer",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Number of Core Sections ",
            "description": "Total number of core section including core catcher",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "core_diameter": {
            "name": "core_diameter",
            "importSource": "CORE_DIAMETER",
            "type": "double",
            "size": "",
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Core Diameter [mm]",
            "description": "The diameter of the drill core, generic or measured",
            "validator": "",
            "validatorMessage": "",
            "unit": "mm",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "core_oriented": {
            "name": "core_oriented",
            "oldName": "oriented",
            "importSource": "",
            "type": "boolean",
            "size": 1,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Core Oriented?",
            "description": "Is this core run oriented",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "rqd": {
            "name": "rqd",
            "oldName": "rqd_abundance",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Rock Quality Designation (RQD)",
            "description": "Rock Quality Designation (RQD)",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "igsn": {
            "name": "igsn",
            "importSource": "IGSN",
            "type": "string",
            "size": 32,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "IGSN",
            "description": "International GeoSample Number",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "C",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "fluid_type": {
            "name": "fluid_type",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Drilling Fluid Type",
            "description": "The type of drilling fluid",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "bit_size": {
            "name": "bit_size",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Bit Size",
            "description": "The size designation of the drill bit",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "barrel_length": {
            "name": "barrel_length",
            "importSource": "",
            "type": "double",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Barrel Length [m]",
            "description": "The length [m] of the core barrel",
            "validator": "",
            "validatorMessage": "",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "comment": {
            "name": "comment",
            "oldName": "comments",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Additional Information",
            "description": "Comment on the core run",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "comment_drilling": {
            "name": "comment_drilling",
            "oldName": "comments_3",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Additional Information",
            "description": "Information from the drillers/drilling operation",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "comment_depth": {
            "name": "comment_depth",
            "oldName": "comments_2",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Additional Information",
            "description": "Comment on the depth information",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "comment_identifier": {
            "name": "comment_identifier",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Additional Information ",
            "description": "Comment on the core identifier or alternative identifier",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "section_split_exist": {
            "name": "section_split_exist",
            "importSource": "",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Section Split Exist",
            "description": "Indicates whether splits of sections from this core exist",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "$this->getSplitStatus()",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": false
        }
    },
    "indices": {
        "id": {
            "name": "id",
            "type": "PRIMARY",
            "columns": [
                "id"
            ],
            "isLocked": null
        },
        "hole_id": {
            "name": "hole_id",
            "type": "KEY",
            "columns": [
                "hole_id"
            ],
            "isLocked": null
        },
        "hole_id__core": {
            "name": "hole_id__core",
            "type": "UNIQUE",
            "columns": [
                "hole_id",
                "core"
            ],
            "isLocked": null
        },
        "curator_contact_person_id": {
            "name": "curator_contact_person_id",
            "type": "KEY",
            "columns": [
                "curator_contact_person_id"
            ],
            "isLocked": true
        }
    },
    "relations": {
        "core_core__project_hole__parent": {
            "name": "core_core__project_hole__parent",
            "relationType": null,
            "relatedTable": null,
            "foreignTable": "project_hole",
            "localColumns": [
                "hole_id"
            ],
            "foreignColumns": [
                "id"
            ],
            "displayColumns": [],
            "isLocked": null,
            "oppositionRelation": false,
            "oppositeColumnName": ""
        },
        "core_core__contact_person__curator_contact_person_id__1n": {
            "name": "core_core__contact_person__curator_contact_person_id__1n",
            "relationType": "1n",
            "relatedTable": null,
            "foreignTable": "contact_person",
            "localColumns": [
                "curator_contact_person_id"
            ],
            "foreignColumns": [
                "id"
            ],
            "displayColumns": [
                "person_acronym"
            ],
            "isLocked": null,
            "oppositionRelation": false,
            "oppositeColumnName": ""
        }
    },
    "behaviors": [
        {
            "behaviorClass": "app\\behaviors\\template\\UniqueCombinationAutoIncrementBehavior",
            "parameters": {
                "searchFields": [
                    "hole_id"
                ],
                "fieldToFill": "core",
                "useAlphabet": false
            }
        },
        {
            "behaviorClass": "app\\behaviors\\template\\DefaultFromSiblingBehavior",
            "parameters": {
                "parentRefColumn": "hole_id",
                "sourceColumn": "drillers_bottom_depth",
                "destinationColumn": "drillers_top_depth"
            }
        },
        {
            "behaviorClass": "app\\behaviors\\template\\LeadingZerosBehavior",
            "parameters": {
                "column": "core",
                "length": "3"
            }
        }
    ],
    "createdAt": 1583846479,
    "modifiedAt": 1644328309,
    "generatedAt": 1644328312,
    "fullName": "CoreCore"
}
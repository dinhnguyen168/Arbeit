{
    "module": "Core",
    "name": "Section",
    "table": "core_section",
    "importTable": "EXP_CORE_SECTION",
    "parentModel": "CoreCore",
    "columns": {
        "id": {
            "name": "id",
            "importSource": "",
            "type": "integer",
            "size": 11,
            "required": false,
            "primaryKey": true,
            "autoInc": true,
            "label": "ID",
            "description": "auto incremented id",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "core_id": {
            "name": "core_id",
            "importSource": "return function($aImportedRecord) {\n$cParentFilterValue = preg_replace(\"/_[^_]+$/\", \"\", $aImportedRecord[\"combined_id\"]); \nreturn \\app\\dis_migration\\Module::lookupValue(\"core_core\", \"id\", [\"combined_id\" => $cParentFilterValue]);\n};",
            "type": "integer",
            "size": 11,
            "required": true,
            "primaryKey": false,
            "autoInc": false,
            "label": "Core ID",
            "description": "Parent ID in table core_core",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "section": {
            "name": "section",
            "importSource": "SECTION",
            "type": "integer",
            "size": 3,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Section Number",
            "description": "Consecutive number of the secton within the core run",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "combined_id": {
            "name": "combined_id",
            "importSource": "LTRIM(CAST([EXPEDITION] AS varchar)) + '_' + LTRIM(CAST([SITE] AS varchar)) + '_' + LTRIM([HOLE]) + '_' + LTRIM(CAST([CORE] AS varchar)) + '_' + LTRIM(CAST([SECTION] AS varchar))",
            "type": "string",
            "size": 20,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Combined ID",
            "description": "Combined ID for the core section",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "section_length": {
            "name": "section_length",
            "importSource": "",
            "type": "double",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Section Length [m]",
            "description": "Measured length of the core section [m]",
            "validator": "",
            "validatorMessage": "",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "curated_length": {
            "name": "curated_length",
            "importSource": "",
            "type": "double",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Curated Length [m]",
            "description": "Length [m] of the curated section",
            "validator": "",
            "validatorMessage": "",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "core_catcher": {
            "name": "core_catcher",
            "importSource": "",
            "type": "boolean",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Core Catcher",
            "description": "Is this core section sample material from the core catcher?",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "section_condition": {
            "name": "section_condition",
            "oldName": "section_state",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Section Condition",
            "description": "The condition of the core section",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "mcd_offset": {
            "name": "mcd_offset",
            "importSource": "",
            "type": "double",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "MCD Offset [m]",
            "description": "Offset for the calculation of the mcd depth [m]",
            "validator": "",
            "validatorMessage": "",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "0",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "curator_contact_person_id": {
            "name": "curator_contact_person_id",
            "importSource": "",
            "type": "one_to_many",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Curator",
            "description": "The analyst/curator who created the data record",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "person_acronym",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "contact_person",
            "searchable": true
        },
        "comment": {
            "name": "comment",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Additional Information",
            "description": "Comment on the core section",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "comment_depth": {
            "name": "comment_depth",
            "importSource": "",
            "type": "string",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Additional Information",
            "description": "Comment on depth/composite depth/corrected depth",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": true
        },
        "top_depth": {
            "name": "top_depth",
            "importSource": "TOP_DEPTH",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Section Top Depth [m]",
            "description": "Uncorrected top depth of section below surface/sea floor",
            "validator": "",
            "validatorMessage": "",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "$this->getSectionTop()",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": false
        },
        "bottom_depth": {
            "name": "bottom_depth",
            "importSource": "BOTTOM_DEPTH",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Section Bottom Depth [m]",
            "description": "Uncorrected bottom depth of section below surface/sea floor",
            "validator": "",
            "validatorMessage": "",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "round($model->top_depth + $model->section_length,2)",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": false
        },
        "mcd_top_depth": {
            "name": "mcd_top_depth",
            "importSource": "",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "MCD Top Depth [m]",
            "description": "Corrected top depth of section below surface/sea floor",
            "validator": "",
            "validatorMessage": "",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "round($this->getSectionTop() + $model->mcd_offset,2)",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": false
        },
        "mcd_bottom_depth": {
            "name": "mcd_bottom_depth",
            "importSource": "",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "MCD Bottom Depth [mcd]",
            "description": "Corrected bottom depth of section below surface/sea floor",
            "validator": "",
            "validatorMessage": "",
            "unit": "m",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "round($model->top_depth + $model->section_length + $model->mcd_offset, 2)",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": false
        },
        "section_split_exist": {
            "name": "section_split_exist",
            "importSource": "",
            "type": "pseudo",
            "size": null,
            "required": false,
            "primaryKey": false,
            "autoInc": false,
            "label": "Section Split Exist",
            "description": "Indicates whether splits of this section exist",
            "validator": "",
            "validatorMessage": "",
            "unit": "",
            "selectListName": "",
            "calculate": "",
            "defaultValue": "",
            "pseudoCalc": "$this->getSplitStatus()",
            "displayColumn": "",
            "isLocked": null,
            "oppositionRelation": false,
            "relatedTable": "",
            "searchable": false
        }
    },
    "indices": {
        "id": {
            "name": "id",
            "type": "PRIMARY",
            "columns": [
                "id"
            ],
            "isLocked": null
        },
        "core_id": {
            "name": "core_id",
            "type": "KEY",
            "columns": [
                "core_id"
            ],
            "isLocked": null
        },
        "core_id__section": {
            "name": "core_id__section",
            "type": "UNIQUE",
            "columns": [
                "core_id",
                "section"
            ],
            "isLocked": null
        },
        "curator_contact_person_id": {
            "name": "curator_contact_person_id",
            "type": "KEY",
            "columns": [
                "curator_contact_person_id"
            ],
            "isLocked": true
        }
    },
    "relations": {
        "core_section__core_core__parent": {
            "name": "core_section__core_core__parent",
            "relationType": null,
            "relatedTable": null,
            "foreignTable": "core_core",
            "localColumns": [
                "core_id"
            ],
            "foreignColumns": [
                "id"
            ],
            "displayColumns": [],
            "isLocked": null,
            "oppositionRelation": false,
            "oppositeColumnName": ""
        },
        "core_section__contact_person__curator_contact_person_id__1n": {
            "name": "core_section__contact_person__curator_contact_person_id__1n",
            "relationType": "1n",
            "relatedTable": null,
            "foreignTable": "contact_person",
            "localColumns": [
                "curator_contact_person_id"
            ],
            "foreignColumns": [
                "id"
            ],
            "displayColumns": [
                "person_acronym"
            ],
            "isLocked": null,
            "oppositionRelation": false,
            "oppositeColumnName": ""
        }
    },
    "behaviors": [
        {
            "behaviorClass": "app\\behaviors\\template\\SiblingsLimitFromParentBehavior",
            "parameters": {
                "parentRefColumn": "core_id",
                "parentSourceColumn": "section_count"
            }
        },
        {
            "behaviorClass": "app\\behaviors\\template\\UniqueCombinationAutoIncrementBehavior",
            "parameters": {
                "searchFields": [
                    "core_id"
                ],
                "fieldToFill": "section",
                "useAlphabet": false
            }
        },
        {
            "behaviorClass": "app\\behaviors\\template\\SplittableSectionBehavior",
            "parameters": {
                "splitsModel": "CurationSectionSplit"
            }
        },
        {
            "behaviorClass": "app\\behaviors\\template\\DefaultFromOtherColumnBehavior",
            "parameters": {
                "sourceColumn": "section_length",
                "targetColumn": "curated_length"
            }
        }
    ],
    "createdAt": 1583850721,
    "modifiedAt": 1644331899,
    "generatedAt": 1644331899,
    "fullName": "CoreSection"
}
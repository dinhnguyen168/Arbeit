(function(e){function t(t){for(var r,n,o=t[0],l=t[1],c=t[2],u=0,d=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&d.push(s[n][0]),s[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);m&&m(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,n=1;n<a.length;n++){var o=a[n];0!==s[o]&&(r=!1)}r&&(i.splice(t--,1),e=l(l.s=a[0]))}return e}var r={},n={app:0},s={app:0},i=[];function o(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-6d210644":"c9bd5651"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-6d210644":1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=new Promise((function(t,a){for(var r="css/"+({}[e]||e)+"."+{"chunk-6d210644":"b452d370"}[e]+".css",s=l.p+r,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var c=i[o],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===s))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){c=d[o],u=c.getAttribute("data-href");if(u===r||u===s)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var r=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete n[e],m.parentNode.removeChild(m),a(i)},m.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){n[e]=0})));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,a){r=s[e]=[t,a]}));t.push(r[2]=i);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=o(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(m);var a=s[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",d.name="ChunkLoadError",d.type=r,d.request=n,a[1](d)}s[e]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(a,r,function(t){return e[t]}.bind(null,r));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var m=u;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"040a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-box dialog-mask"},[a("v-card",{ref:"form",staticClass:"dialog-content"},[a("v-card-text",[a("h1",[e._v("Login")]),a("v-text-field",{attrs:{label:"Username / Email"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.$close({username:e.username,password:e.password})}}},[e._v("Ok")])],1)],1)],1)},n=[],s={name:"DisLoginDialog",data:function(){return{username:"",password:""}}},i=s,o=(a("bdb2"),a("2877")),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),m=a("99d9"),p=a("9910"),f=a("2677"),_=Object(o["a"])(i,r,n,!1,null,null,null);t["default"]=_.exports;c()(_,{VBtn:u["a"],VCard:d["a"],VCardActions:m["a"],VCardText:m["b"],VSpacer:p["a"],VTextField:f["a"]})},"04bb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-upload"},[a("input",{ref:"fileInput",attrs:{type:"file",multiple:e.multiple},on:{change:e.handleFileInputChange}}),a("div",{ref:"dropzone",class:{"c-upload__dropzone":!0,"c-upload__dropzone--highlighted":e.isDropzoneHighlighted},on:{dragover:function(t){t.preventDefault(),t.stopPropagation(),e.isDropzoneHighlighted=!0},dragenter:function(t){t.preventDefault(),t.stopPropagation(),e.isDropzoneHighlighted=!0},dragleave:function(t){t.preventDefault(),t.stopPropagation(),e.isDropzoneHighlighted=!1},drop:function(t){return t.preventDefault(),t.stopPropagation(),e.handleFileDrop(t)},click:function(t){return e.$refs.fileInput.click()}}},e._l(e.filesToUpload,(function(t,r){return a("v-flex",{key:r,staticClass:"c-upload__file-preview",attrs:{shrink:""}},[a("div",{staticClass:"c-upload__icon"},[a("v-icon",[e._v("image")])],1),a("div",{staticClass:"c-upload__file-name",attrs:{title:t.file.name}},[a("v-progress-circular",{attrs:{size:"15",width:"2",color:"primary",indeterminate:0===t.progress},model:{value:t.progress,callback:function(a){e.$set(t,"progress",a)},expression:"fileToUpload.progress"}}),e._v(" "+e._s(t.file.name)+" ")],1)])})),1)])},n=[],s=a("2909"),i=a("1da1"),o=(a("96cf"),a("d3b7"),a("159b"),a("c740"),a("b0c0"),a("caad"),a("2532"),a("a15b"),a("a434"),a("8809")),l={name:"DisFileUpload",props:{appendForm:{type:Object,default:function(){return{}}},multiple:{type:Boolean,default:!0},allowedTypes:{type:Array},uploadPath:{type:String,default:""}},data:function(){return{filesToUpload:[],isDropzoneHighlighted:!1,isUploading:!1,progress:0}},created:function(){this.service=new o["a"]},mounted:function(){},methods:{handleFileInputChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(s["a"])(t.$refs.fileInput.files).forEach((function(e){t.filesToUpload.findIndex((function(t){return t.file.name===e.name}))<0&&t.filesToUpload.push({file:e,progress:0})})),t.$refs.fileInput.value=null;case 2:case"end":return e.stop()}}),e)})))()},handleFileDrop:function(e){var t=this;this.isDropzoneHighlighted=!1;var a=e.dataTransfer;if(a.files){if(!this.multiple&&a.files.length>1)return this.$dialog.message.error("multiple file upload is not allowed"),!1;Object(s["a"])(a.files).forEach((function(e){t.filesToUpload.findIndex((function(t){return t.file.name===e.name}))<0&&(!t.allowedTypes||t.allowedTypes&&t.allowedTypes.includes(e.type)?t.filesToUpload.push({file:e,progress:0}):t.$dialog.message.error("only ".concat(t.allowedTypes.join(", ")," file types are allowed")))}))}},removeFile:function(e){this.filesToUpload.splice(e,1)},upload:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.filesToUpload.length){t.next=2;break}return t.abrupt("return");case 2:return e.isUploading=!0,a=e.filesToUpload[0].file,r=new FormData,r.append("FilesUploadNewFormModel[files][0]",a),r.append("FilesUploadNewFormModel","true"),r.append("FilesUploadNewFormModel[uploadPath]",e.uploadPath),t.prev=8,t.next=11,e.service.upload(r,(function(t){return e.updateProgress(0,t)}));case 11:n=t.sent,e.filesToUpload.splice(0,1),e.$emit("uploaded",n),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](8),e.$dialog.notify.warning("error while uploading "+a.name),console.log(t.t0);case 20:return t.prev=20,e.isUploading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[8,16,20,23]])})))()},updateProgress:function(e,t){this.filesToUpload[e].progress=t}},watch:{filesToUpload:function(){this.isUploading||this.upload()}}},c=l,u=(a("38e6"),a("2877")),d=a("6544"),m=a.n(d),p=a("0e8f"),f=a("132d"),_=a("490a"),v=Object(u["a"])(c,r,n,!1,null,"34d9aa64",null);t["default"]=v.exports;m()(v,{VFlex:p["a"],VIcon:f["a"],VProgressCircular:_["a"]})},"09c7":function(e,t,a){},"0a0f":function(e,t,a){"use strict";a("d7b2")},1182:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","pt-0":""}},[e.ready?a("dis-form",{attrs:{formName:e.formName,dataModel:e.dataModel,fields:e.formTemplate.fields,requiredFilters:e.requiredFilters,filterDataModels:Array.isArray(e.filterDataModels)?{}:e.filterDataModels,calculatedFields:e.calculatedFields},scopedSlots:e._u([{key:"form-fields",fn:function(t){t.fields;var r=t.formScenario,n=t.selectedItem,s=t.formModel,i=t.serverValidationErrors,o=t.compactUI;return e._l(Object.keys(e.fieldsGroups),(function(t,l){return a("v-layout",{key:l,class:{"c-dis-form__layout":!0,compact:o},attrs:{wrap:""}},[t.startsWith("-")||o?e._e():a("v-flex",{staticClass:"title",attrs:{xs12:"","pl-2":"","pt-2":""}},[e._v(" "+e._s(t)+" ")]),e._l(e.fieldsGroups[t],(function(t){return a("v-flex",{key:t.name,class:{"c-dis-form__layout-item":!0,compact:o},attrs:{md3:"",lg2:"",sm6:"",xs12:""}},["DisSelectInput"===e.getInputComponent(t.formInput.type)?a(e.getInputComponent(t.formInput.type),{tag:"component",class:{"c-dis-form__input":!0,"c-dis-form__input--modified":"edit"===r&&n[t.name]!==s[t.name]},attrs:{disabled:!!t.formInput.calculate||t.formInput.disabled||"view"===r,validators:t.validators,name:t.name,label:t.label,serverValidationErrors:i,selectSource:e.selectSources[t.name],formModel:s,allowFreeInput:t.formInput.allowFreeInput,multiple:t.formInput.multiple||!1,hint:t.description,readonly:t.readOnly||"view"===r},model:{value:s[t.name],callback:function(a){e.$set(s,t.name,a)},expression:"formModel[field.name]"}}):t.validators.findIndex((function(e){return"number"===e.type}))>-1?a(e.getInputComponent(t.formInput.type),{tag:"component",class:{"c-dis-form__input":!0,"c-dis-form__input--modified":"edit"===r&&n[t.name]!==s[t.name]},attrs:{disabled:!!t.formInput.calculate||t.formInput.disabled,validators:t.validators,name:t.name,label:t.label,serverValidationErrors:i,hint:t.description,readonly:t.readOnly||"view"===r},model:{value:s[t.name],callback:function(a){e.$set(s,t.name,e._n(a))},expression:"formModel[field.name]"}}):a(e.getInputComponent(t.formInput.type),{tag:"component",class:{"c-dis-form__input":!0,"c-dis-form__input--modified":"edit"===r&&n[t.name]!==s[t.name]},attrs:{disabled:!!t.formInput.calculate||t.formInput.disabled,validators:t.validators,name:t.name,label:t.label,serverValidationErrors:i,hint:t.description,readonly:t.readOnly||"view"===r},model:{value:s[t.name],callback:function(a){e.$set(s,t.name,a)},expression:"formModel[field.name]"}})],1)}))],2)}))}},{key:"extra-form-actions",fn:function(t){var r=t.selectedItem,n=t.onSubFormClick,s=t.onSupFormClick;return[e._l(e.subFormsWithPermission,(function(t){return a("v-btn",{key:t,staticClass:"c-dis-form__btn-sub-form",attrs:{round:"",color:"indigo darken-4",dark:"",disabled:!r},on:{click:function(a){return n(t,e.formTemplate.subForms[t])}}},[e._v(" "+e._s(e.formTemplate.subForms[t].buttonLabel)+" "),a("v-icon",[e._v("arrow_downward")])],1)})),e._l(e.supFormsWithPermission,(function(t){return a("v-btn",{key:t,staticClass:"c-dis-form__btn-sup-form",attrs:{round:"",color:"indigo darken-1",dark:"",disabled:!r},on:{click:function(a){return s(t,e.formTemplate.supForms[t])}}},[e._v(" "+e._s(e.formTemplate.supForms[t].buttonLabel)+" "),a("v-icon",[e._v("arrow_upward")])],1)}))]}}],null,!1,1649668408)}):e._e()],1)},n=[],s=a("b229"),i=s["a"],o=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("a523"),m=a("0e8f"),p=a("132d"),f=a("a722"),_=Object(o["a"])(i,r,n,!1,null,null,null);t["default"]=_.exports;c()(_,{VBtn:u["a"],VContainer:d["a"],VFlex:m["a"],VIcon:p["a"],VLayout:f["a"]})},"159e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-textarea",e._g(e._b({attrs:{value:e.value,rules:e.getRules(),label:e.inputLabel,"error-messages":e.fieldServerValidationErrors}},"v-textarea",e.$attrs,!1),e.listeners))},n=[],s=a("39f3"),i={name:"DisTextareaInput",mixins:[s["a"]],props:{value:{type:String}}},o=i,l=a("2877"),c=a("6544"),u=a.n(c),d=a("a844"),m=Object(l["a"])(o,r,n,!1,null,"7760a806",null);t["default"]=m.exports;u()(m,{VTextarea:d["a"]})},"1c41":function(e,t,a){},"1d94":function(e,t,a){"use strict";a("1c41")},"1e5d":function(e,t,a){},"25b2":function(e,t,a){"use strict";a("77cd")},"25fc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("form",{attrs:{"lazy-validation":""}},[a("dis-auto-increment-input",{attrs:{serverValidationErrors:e.serverValidationErrors,name:"id",label:"ID",validators:[]},model:{value:e.formModel["id"],callback:function(t){e.$set(e.formModel,"id",e._n(t))},expression:"formModel['id']"}}),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.formModel.listname,expression:"formModel.listname"}],attrs:{type:"hidden"},domProps:{value:e.formModel.listname},on:{input:function(t){t.target.composing||e.$set(e.formModel,"listname",t.target.value)}}}),a("v-tabs",{attrs:{"slider-color":"primary"}},[a("v-tab",{key:"items",attrs:{ripple:""}},[e._v(" Items ")]),a("v-tab",{key:"list",attrs:{ripple:""}},[e._v(" List Options ")]),a("v-tab-item",{key:"items"},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{md3:"",lg3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("DisTextInput",{attrs:{validators:[{type:"number"}],name:"sort",label:"Sort Index",serverValidationErrors:e.serverValidationErrors,disabled:!e.canEditList},model:{value:e.formModel.sort,callback:function(t){e.$set(e.formModel,"sort",e._n(t))},expression:"formModel.sort"}})],1),a("v-flex",{attrs:{md3:"",lg3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("DisTextInput",{attrs:{validators:[],name:"display",label:"Abbreviation",serverValidationErrors:e.serverValidationErrors,disabled:!e.canEditList},model:{value:e.formModel.display,callback:function(t){e.$set(e.formModel,"display",e._n(t))},expression:"formModel.display"}})],1),a("v-flex",{attrs:{md3:"",lg3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("DisTextInput",{attrs:{validators:[],name:"remark",label:"Description",serverValidationErrors:e.serverValidationErrors,disabled:!e.canEditList},model:{value:e.formModel.remark,callback:function(t){e.$set(e.formModel,"remark",e._n(t))},expression:"formModel.remark"}})],1)],1),a("v-btn",{attrs:{loading:e.loading,color:e.formModel.id?"green darken-2":"blue",disabled:!e.canEditList},on:{click:e.save}},[e._v(" "+e._s(e.formModel.id?"save":"create")+" ")]),a("v-btn",{attrs:{disabled:e.loading||!e.canEditList,color:"red lighten-2"},on:{click:e.resetForm}},[e._v(" cancel ")])],1)],1)],1),a("v-tab-item",{key:"list"},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-layout",[a("v-flex",{attrs:{md3:"",lg3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[e._v(" List is "+e._s(e.listInfo.is_locked?"Locked":"Unlocked")+" "),a("v-btn",{attrs:{loading:e.loading,disabled:!e.userIsAdmin},on:{click:e.toggleListLock}},[e._v(e._s(e.listInfo.is_locked?"Unlock":"Lock"))])],1),a("v-flex",{attrs:{md3:"",lg3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("v-text-field",{attrs:{"append-icon":"save",disabled:!e.canEditList},on:{"click:append":e.updateListUri},model:{value:e.listInfo.list_uri,callback:function(t){e.$set(e.listInfo,"list_uri",t)},expression:"listInfo.list_uri"}})],1),e.userIsAdmin?a("v-flex",{attrs:{md3:"",lg3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("v-btn",{attrs:{color:"green",disabled:0===e.items.length},on:{click:e.exportValueList}},[e._v("Export value list")])],1):e._e()],1)],1)],1)],1)],1)],1),a("v-alert",{attrs:{value:"UPLOAD_FILE_TYPE"===e.formModel.listname,color:"info",icon:"warning"}},[e._v(" Please be aware that the value in the 'Abbreviation' field in this list will be used as a subdirectory name when assigning files. Use only valid characters (a-z, A-Z, _, -) without spaces. Every name should be unique. ")]),a("v-data-table",{ref:"table",attrs:{headers:e.tableHeaders,items:e.items,pagination:e.pagination,"total-items":e.totalItems,loading:e.loading,"hide-actions":!0},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{attrs:{active:t.selected},on:{click:function(e){t.selected=!t.selected}}},[a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.display))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.remark))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.sort))]),a("td",{staticClass:"text-xs-right"},[a("v-btn",{attrs:{color:"orange",title:"edit",icon:"",disabled:!e.canEditList},on:{click:function(){return e.editItem(t.item)}}},[a("v-icon",[e._v(" edit ")])],1),a("v-btn",{attrs:{color:"red",title:"delete",icon:"",disabled:!e.canEditList},on:{click:function(){return e.deleteItem(t.item)}}},[a("v-icon",[e._v(" delete ")])],1)],1)])]}}])})],1)},n=[],s=a("1da1"),i=(a("96cf"),a("99af"),a("5cce")),o={name:"DisListValuesForm",props:["listName"],data:function(){return{serverValidationErrors:[],formScenario:"view",selectedItem:null,loading:!1,items:[],totalItems:0,pagination:{descending:!1,page:1,rowsPerPage:-1,sortBy:"sort",totalItems:0},formModel:{id:null,listname:"",sort:0,display:"",remark:""},refreshOnPagination:!0,listInfo:{list_uri:null,isLocked:!1},baseUrl:window.baseUrl}},computed:{tableHeaders:function(){return[{text:"Display",value:"display"},{text:"Remark",value:"remark"},{text:"Sort Rank",value:"sort"},{text:"",value:"",sortable:!1}]},canEditList:function(){return!this.listInfo.is_locked||this.userIsAdmin}},created:function(){this.listName&&(this.formModel.listname=this.listName),this.service=new i["a"],this.refreshListInfo()},methods:{refreshItems:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.refreshOnPagination=!1,e.loading=!0,t.prev=2,e.formModel.listname){t.next=9;break}e.items=[],e.totalItems=[],e.pagination.page=1,t.next=15;break;case 9:return a=e.pagination.rowsPerPage>0?{"per-page":e.pagination.rowsPerPage,page:e.pagination.page,sort:"".concat(e.pagination.descending?"-":"").concat(e.pagination.sortBy)}:{"per-page":-1},t.next=12,e.service.getList(a,{listname:e.formModel.listname});case 12:return r=t.sent,e.items=r.items,t.abrupt("return",!0);case 15:t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](2),e.$dialog.notify.warning("unable to load list items"),console.log(t.t0);case 21:return t.prev=21,e.refreshOnPagination=!0,e.loading=!1,t.finish(21);case 25:case"end":return t.stop()}}),t,null,[[2,17,21,25]])})))()},resetForm:function(){this.serverValidationErrors=[],this.formModel=Object.assign(this.formModel,{id:null,sort:0,display:"",remark:""})},editItem:function(e){this.formModel=Object.assign(this.formModel,e)},save:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.serverValidationErrors=[],e.formModel.id){t.next=20;break}return e.loading=!0,t.prev=3,t.next=6,e.service.post(e.formModel);case 6:return e.$dialog.message.success("created successfully"),e.resetForm(),t.next=10,e.refreshItems();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),422===t.t0.response.status?e.serverValidationErrors=t.t0.response.data:(e.$dialog.notify.warning("unable to create new list item"),console.log(t.t0));case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:t.next=36;break;case 20:return e.loading=!0,t.prev=21,t.next=24,e.service.put(e.formModel.id,e.formModel);case 24:return e.$dialog.message.success("updated successfully"),e.resetForm(),t.next=28,e.refreshItems();case 28:t.next=33;break;case 30:t.prev=30,t.t1=t["catch"](21),422===t.t1.response.status?e.serverValidationErrors=t.t1.response.data:(e.$dialog.notify.warning("unable to edit list item"),console.log(t.t1));case 33:return t.prev=33,e.loading=!1,t.finish(33);case 36:case"end":return t.stop()}}),t,null,[[3,12,15,18],[21,30,33,36]])})))()},deleteItem:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("DELETE",e),a.next=3,t.$dialog.confirm({title:"Delete Item",text:"Are you sure you want to delete item <strong>".concat(e.display,"</strong>")});case 3:if(r=a.sent,!r){a.next=21;break}return t.loading=!0,a.prev=6,a.next=9,t.service.delete(e.id);case 9:return t.$dialog.message.success("deleted successfully"),a.next=12,t.refreshItems();case 12:a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](6),t.$dialog.notify.warning("an error happend while deleting the item"),console.log(a.t0);case 18:return a.prev=18,t.loading=!1,a.finish(18);case 21:case"end":return a.stop()}}),a,null,[[6,14,18,21]])})))()},refreshListInfo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.service.getListInfo(e.formModel.listname);case 4:return a=t.sent,console.log(a.data),e.listInfo=a.data,t.abrupt("return",!0);case 10:t.prev=10,t.t0=t["catch"](1),e.$dialog.notify.warning("unable to load list info"),console.log(t.t0);case 14:return t.prev=14,e.loading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,10,14,17]])})))()},toggleListLock:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.service.updateListInfo(e.formModel.listname,{is_locked:!e.listInfo.is_locked});case 4:return t.next=6,e.refreshListInfo();case 6:t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$dialog.notify.warning("unable to toggle list lock"),console.log(t.t0);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,8,12,15]])})))()},updateListUri:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.service.updateListInfo(e.formModel.listname,{list_uri:e.listInfo.list_uri});case 4:return t.next=6,e.refreshListInfo();case 6:t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$dialog.notify.warning("unable to update list uri"),console.log(t.t0);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,8,12,15]])})))()},exportValueList:function(){var e="".concat(this.baseUrl,"report/ExportValueList?listname=").concat(this.formModel.listname);console.log("exportValueList: url",e),window.open(e)}},watch:{pagination:{deep:!0,handler:function(){this.refreshOnPagination&&this.refreshItems()}}}},l=o,c=a("2877"),u=a("6544"),d=a.n(u),m=a("0798"),p=a("8336"),f=a("b0af"),_=a("99d9"),v=a("a523"),h=a("8fea"),g=a("0e8f"),b=a("132d"),y=a("a722"),x=a("71a3"),w=a("c671"),k=a("fe57"),C=a("2677"),O=Object(c["a"])(l,r,n,!1,null,"09c0f010",null);t["default"]=O.exports;d()(O,{VAlert:m["a"],VBtn:p["a"],VCard:f["a"],VCardText:_["b"],VContainer:v["a"],VDataTable:h["a"],VFlex:g["a"],VIcon:b["a"],VLayout:y["a"],VTab:x["a"],VTabItem:w["a"],VTabs:k["a"],VTextField:C["a"]})},"27de":function(e,t,a){"use strict";var r={focusOnFilter:"alt+1",toggleFilterByValue:"alt+f",compactDisplay:"alt+shift+c",openFilterByValueForm:"alt+shift+f",focusOnForm:"alt+2",new:"alt+shift+n",edit:"alt+shift+e",duplicate:"alt+shift+d",delete:"alt+shift+del",save:"alt+shift+s",cancel:"esc",focusOnTable:"alt+3"};t["a"]=r},"2a21":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-flex",[e.allowFreeInput?a("v-combobox",e._g(e._b({attrs:{value:e.selected,"search-input":e.searchWord,items:e.listItems,"item-text":"text","item-value":"value",rules:e.getRules(),label:e.inputLabel,"error-messages":e.fieldServerValidationErrors,loading:e.loading,"append-outer-icon":"list"===e.selectSource.type?"list_alt":void 0,"return-object":!1,multiple:e.multiple,chips:e.multiple,"deletable-chips":e.multiple,"small-chips":e.multiple,clearable:!e.multiple},on:{"update:searchInput":function(t){e.searchWord=t},"update:search-input":function(t){e.searchWord=t},"click:append-outer":e.editList,keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault(),t.stopPropagation()}},scopedSlots:e._u([{key:"no-data",fn:function(){return[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[e._v(' "'),a("strong",[e._v(e._s(e.searchWord))]),e._v('" is not in the list. Press '),a("kbd",[e._v("tab")]),e._v(" to enter it anyway ")])],1)],1)]},proxy:!0},{key:"selection",fn:function(t){var r=t.item,n=t.parent,s=t.selected;return[a("v-chip",{attrs:{selected:s,small:"",disabled:n.disabled||n.readonly||n.getDisabled(r)}},[a("span",{staticClass:"pr-2"},[e._v(e._s(e.items.findIndex((function(e){return e.value===r}))>-1?e.items.find((function(e){return e.value===r})).text:r))]),a("v-icon",{attrs:{small:""},on:{click:function(e){!n.disabled&&!n.readonly&&!n.getDisabled(r)&&n.selectItem(r)}}},[e._v("close")])],1)]}}],null,!1,31751406)},"v-combobox",e.$attrs,!1),e.listeners)):a("v-autocomplete",e._g(e._b({attrs:{value:e.selected,items:e.listItems,"item-text":"text","item-value":"value",rules:e.getRules(),label:e.inputLabel,"error-messages":e.fieldServerValidationErrors,loading:e.loading,"append-outer-icon":"list"===e.selectSource.type?"list_alt":void 0,multiple:e.multiple,"return-object":!1,chips:e.multiple,"deletable-chips":e.multiple,"small-chips":e.multiple,"search-input":e.searchWord,"no-filter":"list"!==e.selectSource.type,clearable:!e.multiple},on:{"click:append-outer":e.editList,keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault(),t.stopPropagation()},"update:searchInput":function(t){e.searchWord=t},"update:search-input":function(t){e.searchWord=t},change:e.clearSearchInput},nativeOn:{input:function(t){return e.updateListItems(t)}},scopedSlots:e._u([e.totalCount&&e.listItems.length>0?{key:"prepend-item",fn:function(){return[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[e._v(" "+e._s(e.listItems.length)+" of "+e._s(e.totalCount)+" records. ")])],1)],1),a("v-divider")]},proxy:!0}:null],null,!0)},"v-autocomplete",e.$attrs,!1),e.listeners)),"list"===e.selectSource.type?a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.listFormDialog,callback:function(t){e.listFormDialog=t},expression:"listFormDialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDialog(t)}}},[a("v-icon",[e._v("close")])],1),a("v-toolbar-title",[e._v("List Values ["+e._s(this.selectSource.listName)+"]")]),a("v-spacer")],1),a("v-card-text",[e.listFormDialog?a("dis-list-values-form",{attrs:{listName:this.selectSource.listName}}):e._e()],1)],1)],1):e._e()],1)},n=[],s=a("7b01"),i=s["a"],o=a("2877"),l=a("6544"),c=a.n(l),u=a("c6a6"),d=a("8336"),m=a("b0af"),p=a("99d9"),f=a("cc20"),_=a("2b5d"),v=a("169a"),h=a("ce7e"),g=a("0e8f"),b=a("132d"),y=a("ba95"),x=a("5d23"),w=a("9910"),k=a("71d9"),C=a("2a7f"),O=Object(o["a"])(i,r,n,!1,null,"1bab0f1b",null);t["default"]=O.exports;c()(O,{VAutocomplete:u["a"],VBtn:d["a"],VCard:m["a"],VCardText:p["b"],VChip:f["a"],VCombobox:_["a"],VDialog:v["a"],VDivider:h["a"],VFlex:g["a"],VIcon:b["a"],VListTile:y["a"],VListTileContent:x["a"],VListTileTitle:x["b"],VSpacer:w["a"],VToolbar:k["a"],VToolbarTitle:C["a"]})},3417:function(e,t,a){},"38e6":function(e,t,a){"use strict";a("e014")},"39d2":function(e,t,a){},"39f3":function(e,t,a){"use strict";var r=a("5530");a("d81d"),a("99af"),a("c740"),a("b0c0");t["a"]={inheritAttrs:!1,props:{name:{type:String,required:!0},label:{type:String,required:!0},validators:{type:Array,default:function(){return[]}},serverValidationErrors:{type:Array},formModel:{type:Object}},methods:{isNotEmptyValue:function(e){return!!e||0===e||!1===e},getRules:function(){var e=this,t=[];return this.validators.map((function(a){switch(a.type){case"required":t.push((function(t){return e.isNotEmptyValue(t)||"".concat(e.label," is required")}));break;case"string":a.max&&t.push((function(t){return!t||t&&t.length<=a.max||"".concat(e.label," must be less than ").concat(a.max," characters")}));break;case"number":t.push((function(t){if(t){var r=+t,n=!isNaN(t),s="".concat(e.label," must be a number");return n&&a.min&&!isNaN(a.min)&&(n=r>=a.min,s="".concat(e.label," must be >= ").concat(a.min)),n&&a.max&&!isNaN(a.max)&&(n=r<=a.max,s="".concat(e.label," must be <= ").concat(a.max)),n||s}return!0}));break;case"unique":break;default:throw new Error("Dis: Unsupported validation type '".concat(a.type,"'"))}})),t}},computed:{hasNumberValidator:function(){return this.validators.findIndex((function(e){return"number"===e.type}))>-1},fieldServerValidationErrors:function(){var e=this,t=[];return this.serverValidationErrors.map((function(a){a.field===e.name&&t.push(a.message)})),t},listeners:function(){return Object(r["a"])({},this.$listeners)},isRequired:function(){return this.validators.findIndex((function(e){return"required"===e.type}))>-1},inputLabel:function(){return this.isRequired?"*".concat(this.label):this.label}}}},"3a08":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":"",wrap:""}},e._l(e.forms,(function(t){return a("v-flex",{key:t.key,attrs:{shrink:""}},[a("v-hover",{scopedSlots:e._u([{key:"default",fn:function(r){var n=r.hover;return a("router-link",{staticClass:"form-link",class:{"elevation-12":n,"elevation-2":!n},attrs:{tag:"v-card",to:"/forms/"+t.key+"-form"}},[a("v-card-title",{staticClass:"title"},[e._v(" "+e._s(t.label)+" ")]),a("div",{class:{"bottom-indicator":!0,green:e.specializedForms.includes(t.key+"-form"),red:!e.specializedForms.includes(t.key+"-form")}})],1)}}],null,!0)})],1)})),1)],1)},n=[],s=a("2909"),i=(a("d81d"),a("fb6a"),a("99af"),a("e372")),o={name:"DisAppForms",data:function(){var e=[];return i["a"].map((function(t){e.push(t.path.slice(0,t.path.indexOf("/")))})),{specializedForms:e}},computed:{forms:function(){var e=[];for(var t in this.$store.state.appForms)Array.isArray(this.$store.state.appForms[t])&&(e=[].concat(Object(s["a"])(e),Object(s["a"])(this.$store.state.appForms[t])));return e}}},l=o,c=(a("7ac2"),a("2877")),u=a("6544"),d=a.n(u),m=a("12b2"),p=a("a523"),f=a("0e8f"),_=a("ce87"),v=a("a722"),h=Object(c["a"])(l,r,n,!1,null,"b3a369de",null);t["default"]=h.exports;d()(h,{VCardTitle:m["a"],VContainer:p["a"],VFlex:f["a"],VHover:_["a"],VLayout:v["a"]})},"3a35":function(e,t,a){},"3cb7":function(e,t,a){var r={"./DisAppForms.vue":"3a08","./DisBreadcrumbs.vue":"a029","./DisDataTable.vue":"936e","./DisFileUpload.vue":"04bb","./DisFilterForm.vue":"e213","./DisForm.vue":"7b63","./DisFormFilesButtons.vue":"e729","./DisListValuesForm.vue":"25fc","./DisLoginDialog.vue":"040a","./DisQrCodeScanner.vue":"d255","./DisSelectAutoPrint.vue":"fd3e","./DisSelectReport.vue":"9e14","./DisServerValidationErrorsView.vue":"8337","./DisSimplePanel.vue":"a6ae","./DisSmartForm.vue":"1182","./DisSnackbar.vue":"abe1"};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id="3cb7"},"3edc":function(e,t,a){"use strict";a("39d2")},4148:function(module,__webpack_exports__,__webpack_require__){"use strict";var C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b85c"),C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("1da1"),C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("2909"),C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5530"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("96cf"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_number_is_integer_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("8ba4"),core_js_modules_es_number_is_integer_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_number_is_integer_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("c740"),core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("fb6a"),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("a630"),core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("3ca3"),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("a434"),core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("2532"),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("e9c4"),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_23__),_services_FormService__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("b4bd"),_services_CrudService__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("6661"),_services_BackendService__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("de5f"),_util_FormLocalStorage__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("e34c"),_mixins_urlFilter__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("4851"),vuetify_lib_mixins_themeable__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("6a18"),_util_debounce__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("b11c"),sortablejs__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("aa47"),_DisSelectReport__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("9e14"),sortableColumns={inserted:function(e,t){e.querySelectorAll("th").forEach((function(e){e.classList.add("sortHandle")})),sortablejs__WEBPACK_IMPORTED_MODULE_31__["a"].create(e.querySelector("tr"),t.value?Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},t.value),{},{handle:".column"}):{})}};__webpack_exports__["a"]={name:"DisDataTable",mixins:[_mixins_urlFilter__WEBPACK_IMPORTED_MODULE_28__["a"],vuetify_lib_mixins_themeable__WEBPACK_IMPORTED_MODULE_29__["a"]],directives:{"sortable-columns":sortableColumns},components:{"dis-select-report":_DisSelectReport__WEBPACK_IMPORTED_MODULE_32__["default"]},props:{fields:{type:Array,required:!0},dataModel:{type:String,required:!0},value:{type:Object},filterDataModels:{type:Object},formName:{type:String},updateUrl:{type:Boolean,default:!0},refreshing:{type:Boolean},updateValueOnRowClick:{type:Boolean,default:!0},reports:{type:Array},filterByValuesModel:{type:Object,required:!0},detailSectionClosed:{type:Boolean}},data:function(){return{items:[],pageCount:0,pagination:{descending:!1,page:1,rowsPerPage:5,sortBy:"id",totalItems:0},refreshOnPagination:!1,columnsPopover:!1,selectedColumns:[],storedColumns:[],showListExportMenu:!1,selectedItems:[],internalRefreshing:!0,internalValue:null,cachedFormatters:[]}},created:function(){if(this.formName){this.localStorage=new _util_FormLocalStorage__WEBPACK_IMPORTED_MODULE_27__["a"](this.formName),this.service=new _services_FormService__WEBPACK_IMPORTED_MODULE_24__["a"](this.formName);var e=this.localStorage.selectedColumns,t=this.localStorage.originalColumns;e&&(this.selectedColumns=Object.assign(this.selectedColumns,e),this.storedColumns=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__["a"])(t))}else this.service=new _services_CrudService__WEBPACK_IMPORTED_MODULE_25__["a"](this.dataModel);0===this.selectedColumns.length&&(this.selectedColumns=this.fields.map((function(e){return e.name}))),0===this.storedColumns.length&&(this.storedColumns=this.fields.map((function(e){return e.name})))},beforeDestroy:function(){this.stopWatchingRoute()},mounted:function(){var e=this;return Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.startWatchingRoute(),a=e.updateUrl&&e.$route.params.id?parseInt(e.$route.params.id):void 0,r=!a&&e.formName?e.localStorage.pagination:{},t.next=5,e.$nextTick();case 5:if(!Number.isInteger(a)){t.next=10;break}return t.next=8,e.refreshItems(a,r||{});case 8:t.next=17;break;case 10:if(!e.$route.query.selectFirst){t.next=15;break}return t.next=13,e.refreshItems("first",r||{});case 13:t.next=17;break;case 15:return t.next=17,e.refreshItems(void 0,r||{});case 17:case"end":return t.stop()}}),t)})))()},computed:{filterQueryParamsString:function(){return _services_FormService__WEBPACK_IMPORTED_MODULE_24__["a"].encodeFilterParams(this.filterParams)},filterParams:function(){var e=this,t={};return Object.keys(this.filterDataModels).forEach((function(a){e.urlFilter&&e.urlFilter[a]&&(t[e.filterDataModels[a].ref]=e.urlFilter[a])})),Object.assign(t,this.filterByValuesModel)},selectedFields:function(){var e=this;return this.selectedColumns.map((function(t){return e.fields.find((function(e){return e.name===t}))})).filter((function(e){return e}))},tableHeaders:function(){return[{text:"",value:"",sortable:!1}].concat(Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__["a"])(this.selectedFields.map((function(e){return{text:e.label,value:e.name}}))))},currentRecordIndex:function(){var e=this;if(this.internalValue){var t=this.items.findIndex((function(t){return t.id===e.internalValue.id}));if(t>-1)return(this.pagination.page-1)*this.pagination.rowsPerPage+t+1}return null},isRefreshing:{get:function(){return this.internalRefreshing},set:function(e){this.internalRefreshing=e,this.$emit("update:refreshing",e)}},allColumnsSelected:{get:function(){return this.selectedColumns.length===this.fields.length},set:function(e){this.selectedColumns=e?this.fields.map((function(e){return e.name})):[]}}},methods:{onPaginationUpdate:function(e){this.isRefreshing||(this.formName&&(this.localStorage.pagination=e),this.refreshItems(void 0,e))},setPaginationPage:function(e){this.pagination.page=e,this.onPaginationUpdate(this.pagination)},toggleAllItems:function(){this.selectedItems.length?this.selectedItems=[]:this.selectedItems=this.items.slice()},startWatchingRoute:function(){var e=this;!this.unwatchRoute&&(this.uwatchRoute=this.$watch("$route",{handler:Object(_util_debounce__WEBPACK_IMPORTED_MODULE_30__["a"])(function(){var t=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function t(a,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r||r.query.hasOwnProperty("filter")&&""!==r.query.filter||(r.query.filter=void 0),a.query.hasOwnProperty("filter")&&""!==a.query.filter||(a.query.filter=void 0),!a.params.id||r&&r.params.id===a.params.id){t.next=6;break}console.log("refresh with id"),t.next=16;break;case 6:if(!a.query.selectFirst){t.next=12;break}return console.log("refresh with selectFirst"),t.next=10,e.refreshItems("first");case 10:t.next=16;break;case 12:if(r&&r.query.filter===a.query.filter){t.next=16;break}return console.log("refresh withOUT id"),t.next=16,e.refreshItems(!1);case 16:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),300)}))},stopWatchingRoute:function(){this.uwatchRoute&&this.uwatchRoute(),this.unwatchRoute=null},refreshItems:function(e){var t=arguments,a=this;return Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function r(){var n,s,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:{},r.prev=1,a.isRefreshing=!0,s={"per-page":a.pagination.rowsPerPage>0?a.pagination.rowsPerPage:-1,page:a.pagination.rowsPerPage>0?a.pagination.page:1,sort:"".concat(a.pagination.descending?"-":"").concat(a.pagination.sortBy)},s=Object.assign(s,n),Number.isInteger(e)&&(s=Object.assign(s,{"selected-record-id":e})),r.next=8,a.service.getList(s,a.filterParams);case 8:i=r.sent,a.items=i.items,a.pagination.totalItems=i._meta.totalCount,a.pageCount=i._meta.pageCount,a.pagination.page=i._meta.currentPage,a.pagination.rowsPerPage=s.rowsPerPage?s.rowsPerPage:a.pagination.rowsPerPage,a.$emit("afterRefresh"),r.next=21;break;case 17:r.prev=17,r.t0=r["catch"](1),console.log(r.t0),a.$dialog.notify.error("Unable to load table items: "+_services_BackendService__WEBPACK_IMPORTED_MODULE_26__["a"].lastError.data.message);case 21:return r.prev=21,a.isRefreshing=!1,r.next=25,a.$nextTick();case 25:return Number.isInteger(e)?(o=a.items.find((function(t){return t.id===e})),o&&a.updateValue(o)):!1===e?a.updateValue(null):"first"===e&&a.selectFirstRecord(),r.finish(21);case 27:case"end":return r.stop()}}),r,null,[[1,17,21,27]])})))()},updateValue:function(e){var t=this;return Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.updateValueOnRowClick){a.next=8;break}if(e){a.next=7;break}return t.internalValue=null,t.$emit("input",null),a.abrupt("return");case 7:t.value&&t.internalValue&&e.id===t.internalValue.id||(t.internalValue=e,t.$emit("input",e));case 8:t.detailSectionClosed&&t.$emit("openDetailSection");case 9:case"end":return a.stop()}}),a)})))()},selectFirstRecord:function(){var e=this;return Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1===e.pagination.page){t.next=3;break}return t.next=3,e.refreshItems(void 0,Object.assign(e.pagination,{page:1}));case 3:e.updateValue(e.items[0]);case 4:case"end":return t.stop()}}),t)})))()},selectPreviousRecord:function(){var e=this;return Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.internalValue){t.next=4;break}e.selectLastRecord(),t.next=18;break;case 4:if(a=e.items.findIndex((function(t){return t.id===e.internalValue.id})),-1!==a){t.next=9;break}e.updateValue(e.items[e.items.length-1]),t.next=18;break;case 9:if(!(a>0)){t.next=13;break}e.updateValue(e.items[a-1]),t.next=18;break;case 13:if(console.log("go to previous page if exists",e.pagination.page),!(e.pagination.page>1)){t.next=18;break}return t.next=17,e.refreshItems(void 0,{page:e.pagination.page-1});case 17:e.updateValue(e.items[e.items.length-1]);case 18:case"end":return t.stop()}}),t)})))()},selectNextRecord:function(){var e=this;return Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.internalValue){t.next=4;break}e.selectFirstRecord(),t.next=17;break;case 4:if(a=e.items.findIndex((function(t){return t.id===e.internalValue.id})),-1!==a){t.next=9;break}e.updateValue(e.items[0]),t.next=17;break;case 9:if(!(a<e.pagination.rowsPerPage-1&&a<e.pagination.totalItems-1)){t.next=13;break}e.updateValue(e.items[a+1]),t.next=17;break;case 13:if(!(e.pagination.page<Math.ceil(e.pagination.totalItems/e.pagination.rowsPerPage))){t.next=17;break}return t.next=16,e.refreshItems(void 0,{page:e.pagination.page+1});case 16:e.updateValue(e.items[0]);case 17:case"end":return t.stop()}}),t)})))()},selectLastRecord:function(){var e=this;return Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=Math.ceil(e.pagination.totalItems/e.pagination.rowsPerPage),e.pagination.page===a){t.next=4;break}return t.next=4,e.refreshItems(void 0,{page:a});case 4:e.updateValue(e.items[e.items.length-1]);case 5:case"end":return t.stop()}}),t)})))()},changeSort:function(e){this.pagination.sortBy===e?this.pagination=Object.assign({},this.pagination,{descending:!this.pagination.descending}):this.pagination=Object.assign({},this.pagination,{sortBy:e,descending:!1}),this.onPaginationUpdate(this.pagination)},isHtml:function(e){var t=(new DOMParser).parseFromString(e,"text/html");return Array.from(t.body.childNodes).some((function(e){return 1===e.nodeType}))},renderField:function renderField(item,field){var ignoreFormatter=arguments.length>2&&void 0!==arguments[2]&&arguments[2],inputType=field.formInput?field.formInput.type:null,isManyRelation=function(){return!(!field.formInput||!field.formInput.hasOwnProperty("selectSource"))&&"many_relation"===field.formInput.selectSource.type},isOneRelation=function(){return!(!field.formInput||!field.formInput.hasOwnProperty("selectSource"))&&"one_relation"===field.formInput.selectSource.type};if(field.formatter&&!ignoreFormatter){if(!this.cachedFormatters[item.id+"_"+field.name]){var self=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({formModel:item,$value:item[field.name]},item),cb=function cb(){return eval(field.formatter)},v="";try{v=cb.bind(self)()}catch(e){v="ERROR in formatter",console.error("ERROR in formatter of column",field.name,":",e.message)}this.cachedFormatters[item.id+"_"+field.name]=v}return this.cachedFormatters[item.id+"_"+field.name]}if(isManyRelation()){var displayValues=[];if(item[field.name]){var _iterator=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__["a"])(item[field.name]),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var val=_step.value;displayValues.push(val[field.formInput.selectSource.textField])}}catch(err){_iterator.e(err)}finally{_iterator.f()}return displayValues.join(", ")}}else if(isOneRelation()){if(item[field.name])return item[field.name][field.formInput.selectSource.textField]}else switch(inputType){case"switch":return item[field.name]?"yes":"no";case"datetime":return item[field.name]?this.$dateTime(item[field.name]).asUtc().formatForDisplay():null;case"select":if(item[field.name]){if("api"===field.formInput.selectSource.type){if(field.formInput.multiple){var _displayValues=[],_iterator2=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__["a"])(item[field.name]),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _val=_step2.value;_val.hasOwnProperty(field.formInput.selectSource.textField)?_displayValues.push(_val[field.formInput.selectSource.textField]):_displayValues.push(_val)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return _displayValues.join(", ")}return item[field.name].hasOwnProperty(field.formInput.selectSource.textField)?item[field.name][field.formInput.selectSource.textField]:item[field.name]}if("list"===field.formInput.selectSource.type)return field.formInput.multiple?item[field.name].join(", "):item[field.name]}return null;default:return item[field.name]}},onMultiRecordsReportClick:function(e){var t=this;return Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=window.baseUrl+"report/".concat(e.name,"?model=").concat(t.dataModel,"&columns=").concat(t.selectedColumns.join(","),"&").concat(t.filterQueryParamsString).concat(t.selectedItems&&t.selectedItems.length?"&specific-ids=".concat(t.selectedItems.map((function(e){return e.id})).join(",")):""),!e.confirmationMessage){a.next=8;break}return a.next=4,t.$dialog.confirm({title:"Please confirm!",text:e.confirmationMessage,persistent:!0});case 4:n=a.sent,n&&window.open(r,"_blank"),a.next=9;break;case 8:window.open(r,"_blank");case 9:case"end":return a.stop()}}),a)})))()},sortTheHeadersAndUpdateTheKey:function(e){var t=e.oldIndex-1,a=e.newIndex-1,r=this.selectedColumns;if(a>=r.length){var n=a-r.length+1;while(n--)r.push(void 0)}r.splice(a,0,r.splice(t,1)[0]),this.selectedColumns=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__["a"])(r),this.storedColumns=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__["a"])(r)}},watch:{selectedColumns:function(e){var t=this;if(this.formName){var a=this.storedColumns.filter((function(e){return t.selectedColumns.includes(e)}));this.selectedColumns.length<=this.storedColumns.length&&JSON.stringify(this.selectedColumns)!==JSON.stringify(a)&&(this.selectedColumns=a),this.selectedColumns.length>this.storedColumns.length&&(this.storedColumns=this.selectedColumns),this.localStorage.selectedColumns=e}},storedColumns:function(e){this.formName&&(this.localStorage.originalColumns=e)},value:function(e){e||(this.intervalValue=null)}}}},4678:function(e,t,a){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d833","./ar-tn.js":"6d833","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id="4678"},4851:function(e,t,a){"use strict";a("ac1f"),a("b64b"),a("d3b7"),a("159b"),a("99af"),a("4de4"),a("b0c0"),a("5319"),a("caad"),a("2532");t["a"]={methods:{stringToFilter:function(e){var t=/🔎([^〰]+)〰([^$|🔎]+)/g,a={},r=t.exec(e);while(null!==r)a[r[1]]=parseInt(r[2]),r=t.exec(e);return a},filterToString:function(e){var t=Object.keys(e),a="";return t.forEach((function(t){e[t]&&(a+="🔎".concat(t,"〰").concat(e[t]))})),a}},computed:{urlFilter:{get:function(){try{if(this.$route.query.filter)return this.stringToFilter(this.$route.query.filter)}catch(e){console.log("an error happened while evaluating urlFilter")}return null},set:function(e){var t=Object.assign({},{name:this.$route.name,params:this.$route.params},{query:{}}),a=this.filterToString(e);a.length&&(t.query={filter:a}),this.$router.replace(t).catch((function(e){if("NavigationDuplicated"!==e.name&&!e.message.includes("Avoided redundant navigation to current location"))throw console.error(e),e}))}}}}},"4c34e":function(e,t,a){"use strict";a("6c68")},"505a":function(e,t,a){"use strict";a("7410")},"521a":function(e,t,a){"use strict";a("6464")},5225:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-flex",{attrs:{"align-start":""}},[a("h2",[e._v("Files")]),a("dis-form",{ref:"disForm",attrs:{formName:"files",dataModel:"ArchiveFile",fields:e.simpleFields,requiredFilters:e.requiredFilters,filterDataModels:e.filterDataModels,calculatedFields:e.calculatedFields},scopedSlots:e._u([{key:"form-fields",fn:function(t){t.fields,t.hasNumberValidator,t.getInputComponent;var r=t.formScenario,n=t.selectedItem,s=t.formModel,i=t.serverValidationErrors;return[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{lg9:"",md6:"",sm12:"","pr-2":"","pl-2":""}},[a("v-layout",{attrs:{wrap:"","mb-3":""}},["-group1".startsWith("-")?e._e():a("v-flex",{staticClass:"title",attrs:{xs12:"","pl-2":"","pt-2":""}},[e._v(" -group1 ")]),a("v-flex",{attrs:{lg2:"",md3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("DisTextInput",{class:{"c-dis-form__input":!0,"c-dis-form__input--modified":"edit"===r&&n["parent_combined_id"]!==s["parent_combined_id"]},attrs:{disabled:!0,validators:e.validators["parent_combined_id"],name:"parent_combined_id",label:"Parent ID",serverValidationErrors:i,hint:"CombinedKey of parent: expedition, site, hole, core, section",readonly:"view"===r},model:{value:s["parent_combined_id"],callback:function(t){e.$set(s,"parent_combined_id",t)},expression:"formModel['parent_combined_id']"}})],1),a("v-flex",{attrs:{lg2:"",md3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("DisTextInput",{class:{"c-dis-form__input":!0,"c-dis-form__input--modified":"edit"===r&&n["type"]!==s["type"]},attrs:{disabled:!0,validators:e.validators["type"],name:"type",label:"File Type",serverValidationErrors:i,hint:"File type",readonly:"view"===r},model:{value:s["type"],callback:function(t){e.$set(s,"type",t)},expression:"formModel['type']"}})],1),a("v-flex",{attrs:{lg2:"",md3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("DisTextInput",{class:{"c-dis-form__input":!0,"c-dis-form__input--modified":"edit"===r&&n["filename"]!==s["filename"]},attrs:{disabled:!0,validators:e.validators["filename"],name:"filename",label:"File Name",serverValidationErrors:i,hint:"Name of the renamed file",readonly:"view"===r},model:{value:s["filename"],callback:function(t){e.$set(s,"filename",t)},expression:"formModel['filename']"}})],1),a("v-flex",{attrs:{lg2:"",md3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("DisTextInput",{class:{"c-dis-form__input":!0,"c-dis-form__input--modified":"edit"===r&&n["original_filename"]!==s["original_filename"]},attrs:{disabled:!0,validators:e.validators["original_filename"],name:"original_filename",label:"Original File Name",serverValidationErrors:i,hint:"Name of the originally uploaded file",readonly:"view"===r},model:{value:s["original_filename"],callback:function(t){e.$set(s,"original_filename",t)},expression:"formModel['original_filename']"}})],1),a("v-flex",{attrs:{lg2:"",md3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("DisDateTimeInput",{class:{"c-dis-form__input":!0,"c-dis-form__input--modified":"edit"===r&&n["upload_date"]!==s["upload_date"]},attrs:{disabled:!1,validators:e.validators["upload_date"],name:"upload_date",label:"Upload Date",serverValidationErrors:i,hint:"Date of file upload",readonly:"view"===r},model:{value:s["upload_date"],callback:function(t){e.$set(s,"upload_date",t)},expression:"formModel['upload_date']"}})],1),a("v-flex",{attrs:{lg2:"",md3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("DisTextInput",{class:{"c-dis-form__input":!0,"c-dis-form__input--modified":"edit"===r&&n["filesize"]!==s["filesize"]},attrs:{disabled:!1,validators:e.validators["filesize"],name:"filesize",label:"File Size",serverValidationErrors:i,hint:"File size",readonly:"view"===r},model:{value:s["filesize"],callback:function(t){e.$set(s,"filesize",e._n(t))},expression:"formModel['filesize']"}})],1),a("v-flex",{attrs:{lg2:"",md3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("DisTextInput",{class:{"c-dis-form__input":!0,"c-dis-form__input--modified":"edit"===r&&n["comment"]!==s["comment"]},attrs:{disabled:!1,validators:e.validators["comment"],name:"comment",label:"Additional Information",serverValidationErrors:i,hint:"Additional information on the file",readonly:"view"===r},model:{value:s["comment"],callback:function(t){e.$set(s,"comment",t)},expression:"formModel['comment']"}})],1),a("v-flex",{attrs:{lg2:"",md3:"",sm6:"",xs12:"","pr-2":"","pl-2":""}},[a("DisSelectInput",{class:{"c-dis-form__input":!0,"c-dis-form__input--modified":"edit"===r&&n["curator_contact_person_id"]!==s["curator_contact_person_id"]},attrs:{disabled:!1,validators:e.validators["curator_contact_person_id"],name:"curator_contact_person_id",label:"Curator",serverValidationErrors:i,selectSource:e.selectSources["curator_contact_person_id"],hint:"The analyst/curator who created the data record",readonly:"view"===r},model:{value:s["curator_contact_person_id"],callback:function(t){e.$set(s,"curator_contact_person_id",t)},expression:"formModel['curator_contact_person_id']"}})],1)],1)],1),a("v-flex",{attrs:{lg3:"",md6:"",sm12:"","pr-2":"","pl-2":""}},[n?a("p",[e._v(" Original: "),a("a",{attrs:{href:e.baseUrl+"files/original/"+n.id,target:"_blank"}},[e._v(e._s(n.filename))]),n.mime_type.startsWith("image/")?a("a",{attrs:{href:e.baseUrl+"files/"+n.id,target:"_blank"}},[a("v-img",{attrs:{src:e.baseUrl+"files/"+n.id}})],1):e._e()]):e._e()])],1)]}},{key:"form-actions",fn:function(t){var r=t.onEditClick,n=(t.onCreateNewClick,t.onDeleteClick),s=(t.onDuplicateClick,t.isEditButtonDisabled),i=t.userCanEditForm,o=(t.isNewButtonDisabled,t.isFetchingDefaults,t.isFetchingDuplicate,t.isDeleteButtonDisabled),l=t.shortcuts;return[a("v-btn",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:l.edit,disabled:s||!i},expression:"{keys: shortcuts.edit, disabled: isEditButtonDisabled || !userCanEditForm}"}],staticClass:"c-dis-form__btn-edit",attrs:{disabled:s||!i,title:"Edit"},on:{click:r,mousetrap:function(e){return e.preventDefault(),r(e)}}},[a("v-icon",[e._v("edit")]),e._v(" Edit ")],1),a("v-btn",{staticClass:"c-dis-form__btn-duplicate",attrs:{title:"Un-assign",loading:e.isUnassigning,disabled:s},on:{click:e.onUnassignClick}},[a("v-icon",[e._v("link_off")]),e._v(" Un-assign ")],1),a("v-btn",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:l.delete,disabled:o||!i},expression:"{keys: shortcuts.delete, disabled: isDeleteButtonDisabled || !userCanEditForm}"}],staticClass:"c-dis-form__btn-delete",attrs:{disabled:o||!i,title:"Delete"},on:{click:n,mousetrap:function(e){return e.preventDefault(),n(e)}}},[a("v-icon",[e._v("delete")]),e._v(" Delete ")],1)]}}])})],1)],1)},n=[],s=a("1da1"),i=(a("96cf"),a("8809")),o={name:"FilesForm",data:function(){return{isUnassigning:!1,baseUrl:window.baseUrl}},created:function(){this.fileService=new i["a"],this.validators={},this.validators["parent_combined_id"]=JSON.parse('[{"type":"string","min":null,"max":null}]'),this.validators["type"]=JSON.parse('[{"type":"required"},{"type":"string","min":null,"max":null}]'),this.validators["filename"]=JSON.parse('[{"type":"required"},{"type":"string","min":null,"max":null}]'),this.validators["original_filename"]=JSON.parse('[{"type":"required"},{"type":"string","min":null,"max":null}]'),this.validators["upload_date"]=JSON.parse('[{"type":"required"}]'),this.validators["filesize"]=JSON.parse('[{"type":"number"}]'),this.validators["comment"]=JSON.parse("[]"),this.validators["curator_contact_person_id"]=JSON.parse("[]"),this.selectSources={},this.selectSources["curator_contact_person_id"]=JSON.parse('{"type":"one_relation","listName":"","textField":"person_acronym","valueField":"id","model":"ContactPerson"}'),this.calculatedFields={},this.simpleFields=JSON.parse('[{"name":"parent_combined_id","label":"Parent ID","description":"CombinedKey of parent: expedition, site, hole, core, section","group":"-group1","order":0,"inputType":"text","searchable":true},{"name":"type","label":"File Type","description":"File type","group":"-group1","order":1,"inputType":"text","searchable":true},{"name":"filename","label":"File Name","description":"Name of the renamed file","group":"-group1","order":2,"inputType":"text","searchable":true},{"name":"original_filename","label":"Original File Name","description":"Name of the originally uploaded file","group":"-group1","order":3,"inputType":"text","searchable":true},{"name":"upload_date","label":"Upload Date","description":"Date of file upload","group":"-group1","order":4,"inputType":"datetime","searchable":true},{"name":"filesize","label":"File Size","description":"File size","group":"-group1","order":5,"inputType":"text","searchable":true},{"name":"comment","label":"Additional Information","description":"Additional information on the file","group":"-group1","order":6,"inputType":"text","searchable":true},{"name":"curator_contact_person_id","label":"Curator","description":"The analyst/curator who created the data record","group":"-group1","order":7,"inputType":"select","searchable":true}]'),this.requiredFilters=JSON.parse('[{"value":"person","as":"curator_contact_person_id","skipOnEmpty":false}]'),this.subForms=JSON.parse("[]"),this.supForms=JSON.parse("[]"),this.filterDataModels=JSON.parse('{"expedition":{"model":"ProjectExpedition","value":"id","text":"exp_acronym","ref":"expedition_id"},"site":{"model":"ProjectSite","value":"id","text":"site","ref":"site_id","require":{"value":"expedition","as":"expedition_id"}},"hole":{"model":"ProjectHole","value":"id","text":"hole","ref":"hole_id","require":{"value":"site","as":"site_id"}},"core":{"model":"CoreCore","value":"id","text":"core","ref":"core_id","require":{"value":"hole","as":"hole_id"}},"section":{"model":"CoreSection","value":"id","text":"section","ref":"section_id","require":{"value":"core","as":"core_id"}},"sectionSplit":{"model":"CurationSectionSplit","value":"id","text":"type","ref":"section_split_id","require":{"value":"section","as":"section_id"}},"sample":{"model":"CurationSample","value":"id","text":"id","ref":"sample_id","require":{"value":"sectionSplit","as":"section_split_id"}},"sampleRequest":{"model":"CurationSampleRequest","value":"id","text":"id","ref":"sample_request_id","require":{"value":"expedition","as":"expedition_id"}},"person":{"model":"ContactPerson","value":"id","text":"person_acronym","ref":"curator_contact_person_id"}}')},methods:{onUnassignClick:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$dialog.confirm({title:"Unassign File",text:'This will remove the linkage of this file to this record, and move the file back to the "Files Upload" area.'});case 2:if(a=t.sent,!a){t.next=25;break}return e.isUnassigning=!0,t.prev=5,t.next=8,e.fileService.unassign(e.$refs.disForm.formModel.id);case 8:if(r=t.sent,200!==r.status){t.next=16;break}return e.$refs.disForm.clearForm(),e.$refs.disForm.formScenario="view",e.$refs.disForm.selectedItem=null,e.$dialog.message.success("un-assigned successfully"),t.next=16,e.$refs.disForm.$refs.dataTable.refreshItems(!1);case 16:t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](5),e.$dialog.notify.warning("cannot un-assign - "+t.t0.message,{timeout:3e4}),console.log(t.t0);case 22:return t.prev=22,e.isUnassigning=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[5,18,22,25]])})))()}}},l=o,c=a("2877"),u=a("6544"),d=a.n(u),m=a("8336"),p=a("a523"),f=a("0e8f"),_=a("132d"),v=a("adda"),h=a("a722"),g=Object(c["a"])(l,r,n,!1,null,"29df1ae8",null);t["default"]=g.exports;d()(g,{VBtn:m["a"],VContainer:p["a"],VFlex:f["a"],VIcon:_["a"],VImg:v["a"],VLayout:h["a"]})},5637:function(e,t,a){"use strict";a("1e5d")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=a("ce5b"),s=a.n(n),i=(a("b19f"),a("e3f3")),o=a.n(i);r["default"].use(s.a,{theme:{primary:"#03A9F4",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},customProperties:!0,iconfont:"md"}),r["default"].use(o.a);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire",dark:e.isDark}},[e.loggedInUser?a("v-navigation-drawer",{attrs:{clipped:"",temporary:"",fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[a("router-link",{attrs:{tag:"v-list-tile",to:"/"}},[a("v-list-tile-action",[a("v-icon",[e._v("dashboard")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v("Dashboard")])],1)],1),a("router-link",{attrs:{tag:"v-list-tile",to:"/settings"}},[a("v-list-tile-action",[a("v-icon",[e._v("settings")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v("Settings")])],1)],1),a("v-divider"),e.favoriteForms.length?a("draggable",e._b({staticStyle:{transition:"none"},attrs:{tag:"v-list","force-fallback":!0},on:{end:e.saveUserFavoriteForms},model:{value:e.favoriteForms,callback:function(t){e.favoriteForms=t},expression:"favoriteForms"}},"draggable",{group:"favorites",handle:".drag-handle",ghostClass:"u-drag-ghost"},!1),e._l(e.favoriteForms,(function(t){return a("v-list-tile",{key:t.module+"-"+t.key,staticClass:"c-app__favorite-link",attrs:{to:"/forms/"+t.key+"-form"}},[a("v-list-tile-action",{staticClass:"drag-handle"},[a("v-icon",[e._v("drag_handle")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t.label))])],1),a("v-list-tile-action",[a("v-btn",{attrs:{icon:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),function(){return e.toggleFavoriteLink(t)}()}}},[a("v-icon",{attrs:{color:"yellow"}},[e._v("star")])],1)],1)],1)})),1):e._e(),a("v-divider"),a("v-subheader",{staticClass:"subheading"},[e._v("Forms")]),e._l(Object.keys(e.$store.state.appForms),(function(t){return a("v-list-group",{key:t,attrs:{"prepend-icon":"check","no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t))])],1)],1)]},proxy:!0}],null,!0)},e._l(e.$store.state.appForms[t],(function(r){return a("router-link",{key:r.key,staticClass:"c-app__form-link",attrs:{tag:"v-list-tile",to:"/forms/"+r.key+"-form"}},[a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(r.label))])],1),a("v-list-tile-action",[a("v-btn",{class:{"c-app__favorite-btn":!0,"c-app__favorite-btn--active":e.favoriteForms.findIndex((function(e){return e.module===t&&e.key===r.key}))>-1},attrs:{icon:""},on:{click:function(t){return t.stopPropagation(),function(){return e.toggleFavoriteLink(r)}()}}},[a("v-icon",{attrs:{color:-1===e.favoriteForms.findIndex((function(e){return e.module===t&&e.key===r.key}))?"grey":"yellow"}},[e._v("star")])],1)],1)],1)})),1)})),a("v-divider"),a("v-subheader",{staticClass:"subheading"},[e._v("Files")]),a("router-link",{attrs:{tag:"v-list-tile",to:"/forms/files-form"}},[a("v-list-tile-action",[a("v-icon",[e._v("folder")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v("Files Form")])],1)],1),e.$store.state.loggedInUser&&e.$store.state.loggedInUser.roles.find((function(e){return"operator"===e||"developer"===e||"sa"===e}))?a("router-link",{attrs:{tag:"v-list-tile",to:"/files-upload"}},[a("v-list-tile-action",[a("v-icon",[e._v("cloud_upload")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v("Files Upload")])],1)],1):e._e(),a("v-divider"),a("v-list-tile",{attrs:{href:e.helpLink,target:"_blank"}},[a("v-list-tile-action",[a("v-icon",[e._v("help_outline")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v("Help")])],1)],1)],2)],1):e._e(),e.loggedInUser?a("v-toolbar",{attrs:{app:"",fixed:"",dense:"","clipped-left":""}},[a("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),a("v-toolbar-title",[a("router-link",{attrs:{to:"/"}},[a("v-img",{staticStyle:{display:"inline-block","vertical-align":"middle",width:"60px"},attrs:{src:e.appIcon}})],1),e._v(" "+e._s(e.appShortName)+" ")],1),a("v-spacer"),a("v-menu",{attrs:{"open-on-hover":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){return[a("v-btn",e._g({attrs:{icon:""}},t.on),[a("v-icon",[e._v("person")])],1)]}}],null,!1,1452160534)},[a("v-list",[a("v-list-tile",{attrs:{to:"/settings/account"}},[a("v-list-tile-title",[e._v(e._s(e.loggedInUser.profile.name)+" (@"+e._s(e.loggedInUser.username)+")")])],1),a("v-list-tile",{on:{click:e.logout}},[a("v-list-tile-title",[e._v("Logout")])],1)],1)],1)],1):e._e(),a("v-content",{class:{"v-content-compact":e.$store.state.compactUI}},[a("v-layout",[a("v-flex",[a("dis-breadcrumbs")],1)],1),a("v-fade-transition",[e.isLoading?e._e():a("router-view")],1)],1),a("v-footer",{attrs:{app:"",fixed:""}},[a("div",[a("a",{staticClass:"footer-link",attrs:{href:e.copyrightLink}},[e._v("© "+e._s(e.copyrightText))])]),a("v-spacer"),a("div",[a("a",{staticClass:"footer-link",attrs:{href:e.aboutLink}},[e._v("About")])]),a("v-spacer"),a("v-dialog",{attrs:{"full-width":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"footer-link",attrs:{flat:"",color:"primary"}},r),[e._v("Impressum")])]}}]),model:{value:e.impressumDialog,callback:function(t){e.impressumDialog=t},expression:"impressumDialog"}},[a("v-card",[a("v-card-text",[a("impressum")],1)],1)],1),a("div",{attrs:{id:"footer_buttons"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:"",small:""},on:{click:e.toggleCompactUI}},"v-btn",n,!1),r),[a("v-icon",{attrs:{small:""}},[e._v("swap_vert")])],1)]}}])},[a("span",[e._v("Toggle Compact UI")])]),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:"",small:""},on:{click:e.switchTheme}},"v-btn",n,!1),r),[a("v-icon",{attrs:{small:""}},[e._v("invert_colors")])],1)]}}])},[a("span",[e._v("Toggle Theme")])])],1)],1)],1)},c=[],u=a("1da1"),d=a("5530"),m=(a("96cf"),a("ac1f"),a("5319"),a("c740"),a("4de4"),a("d3b7"),a("de5f")),p=a("2f62"),f=a("4dd0"),_=a.n(f),v=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},h=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-impressum"},[a("h4",{staticClass:"marg1"},[e._v("mDIS -mobile Drilling Information System")]),a("h2",[e._v("Legal information / Provider Identification ")]),a("p",[e._v(" Imprint according to § 5 TMG (Tele Media Act) and § 55 RStV (German Interstate Treaty on Broadcasting). ")]),a("h3",[e._v("Provider")]),a("p",[e._v(" The provider of this instance of mDIS is the Helmholtz Centre Potsdam German Research Centre for Geosciences GFZ which is acting on behalf of the International Continental Scientific Drilling Program (ICDP). ")]),a("h3",[e._v("Address")]),a("div",{staticClass:"marg1"},[a("p",[e._v(" Helmholtz Centre Potsdam German Research Centre for Geosciences – GFZ Telegrafenberg ")]),a("address",[e._v(" D-14473 Potsdam"),a("br"),e._v(" Germany"),a("br"),e._v(" Phone: +49/331-288-0"),a("br"),e._v(" Website: "),a("a",{attrs:{href:"https://www.icdp-online.org"}},[e._v("https://www.icdp-online.org")])])]),a("h3",[e._v("Legal Form")]),a("p",[e._v(" The ICDP is an international program based at the Helmholtz Centre Potsdam German Research Centre for Geosciences – GFZ which is a Public Law Foundation. The GFZ is member of the Helmholtz-Gemeinschaft Deutscher Forschungszentren e.V. (Helmholtz Association of German Research Centres). ")]),a("h3",[e._v("Authorized Representatives")]),a("p",[e._v(" The executive chairman of the ICDP is Prof. Dr. Marco Bohnhoff. GFZ Potsdam is legally represented by Prof. Dr. Niels Hovius (Chairman of the Board and Scientific Executive Director, interim) and Dr. Stefan Schwartze (Administrative Executive Director). ")]),a("h3",[e._v("Value Added Tax ID")]),a("p",[e._v(" A VAT Identification Number according to § 27a VAT Tax Act does not apply to ICDP as an international program. The VAT Identification Number of GFZ according to § 27a VAT Tax Act is DE138407750. ")]),a("h3",[e._v("Editorial Staff")]),a("p",[e._v(" Responsible editors for the contents of this web based application of ICDP are members of the Data and Information Management team within the Operational Support Group of ICDP"),a("br"),e._v(" Phone: +49 331 288-1082"),a("br"),e._v(" E-Mail: "),a("a",{attrs:{href:"mailto:dm@icdp-online.org"}},[e._v("dm(at)icdp-online.org")])]),a("h3",[e._v("IT Operations at GFZ, and Software Development")]),a("p",[e._v(" Responsible for system administration and local devops is Knut Behrends (Software Engineer) in conjunction with the GFZ IT Services and Operations unit."),a("br"),e._v(" E-Mail: "),a("a",{attrs:{href:"mailto:k.behrends@icdp-online.org"}},[e._v("k.behrends(at)icdp-online.org")])]),a("h3",[e._v("mDIS Architectural Design, and General Software Engineering ")]),a("p",[e._v("Die Informationsgesellschaft mbH, "),a("a",{attrs:{href:"https://www.informationsgesellschaft.com/"}},[e._v("https://www.informationsgesellschaft.com/")])])])}],g={name:"Impressum"},b=g,y=(a("25b2"),a("2877")),x=Object(y["a"])(b,v,h,!1,null,"e01f31ce",null),w=x.exports,k=a("b11c"),C=a("b76a"),O=a.n(C);window.baseUrl=location.pathname.replace(/\/[^/]*$/,"/");var M={name:"App",components:{Impressum:w,draggable:O.a},data:function(){return{drawer:!1,impressumDialog:!1,favoriteForms:[],isLoading:!0}},created:function(){var e=this;this.backendService=new m["a"],this.saveUserFavoriteForms=Object(k["a"])(this.saveUserFavoriteForms,1e3);try{this.$store.dispatch("initApp").then((function(){e.isLoading=!1,e.favoriteForms=e.$store.state.config.userConfig["favorite-forms"]||[]})).catch((function(t){e.isLoading=!1;var a=m["a"].lastError;401!==a.status&&console.log("App.created() initApp failed:",t,a)})),this.setIsDark("light"!==_.a.get("theme"))}catch(t){console.log(t)}},methods:Object(d["a"])(Object(d["a"])({},Object(p["c"])({setIsDark:"IS_DARK",toggleCompact:"TOGGLE_COMPACT_UI"})),{},{switchTheme:function(){this.setIsDark(!this.isDark),_.a.set("theme",this.isDark?"dark":"light")},toggleCompactUI:function(){this.toggleCompact(),_.a.set("compact",!!this.compactUI)},logout:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.backendService.logout();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.warn(t.t0);case 8:return t.prev=8,e.$store.commit("SET_LOGGED_IN_USER",null),e.$router.push("/login"),t.finish(8);case 12:case"end":return t.stop()}}),t,null,[[0,5,8,12]])})))()},toggleFavoriteLink:function(e){var t=this.favoriteForms.findIndex((function(t){return t.module===e.module&&t.key===e.key}));t>-1?this.favoriteForms=this.favoriteForms.filter((function(e,a){return a!==t})):this.favoriteForms.push({module:e.module,key:e.key,label:e.label}),this.saveUserFavoriteForms()},saveUserFavoriteForms:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("saveUserFavoritesForms"),t.next=3,e.$store.dispatch("config/saveUserConfig",{"favorite-forms":e.favoriteForms});case 3:case"end":return t.stop()}}),t)})))()}}),computed:Object(d["a"])(Object(d["a"])({},Object(p["b"])({loggedInUser:"loggedInUser",isDark:"isDark",compactUI:"getCompactUI",appShortName:"config/appShortName",appName:"config/appName",appIcon:"config/appIcon",copyrightText:"config/copyrightText",copyrightLink:"config/copyrightLink",aboutLink:"config/aboutLink",helpLink:"config/helpLink"})),{},{menuFavorites:{get:function(){return this.favoriteForms},set:function(e){this.favoriteForms=e,this.saveUserFavoriteForms()}},stateFavoriteForms:function(){return this.$store.state.config.userConfig["favorite-forms"]}}),watch:{stateFavoriteForms:function(e){this.favoriteForms=e||[]}}},j=M,I=(a("505a"),a("6544")),E=a.n(I),D=a("7496"),T=a("8336"),F=a("b0af"),S=a("99d9"),P=a("549c"),V=a("169a"),A=a("ce7e"),R=a("0789"),L=a("0e8f"),$=a("553a"),U=a("132d"),N=a("adda"),B=a("a722"),W=a("8860"),q=a("56b0"),K=a("ba95"),G=a("40fe"),H=a("5d23"),z=a("e449"),Q=a("f774"),Y=a("9910"),Z=a("e0c7"),J=a("71d9"),X=a("706c"),ee=a("2a7f"),te=a("3a2f"),ae=Object(y["a"])(j,l,c,!1,null,"3c72d769",null),re=ae.exports;E()(ae,{VApp:D["a"],VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VContent:P["a"],VDialog:V["a"],VDivider:A["a"],VFadeTransition:R["c"],VFlex:L["a"],VFooter:$["a"],VIcon:U["a"],VImg:N["a"],VLayout:B["a"],VList:W["a"],VListGroup:q["a"],VListTile:K["a"],VListTileAction:G["a"],VListTileContent:H["a"],VListTileTitle:H["b"],VMenu:z["a"],VNavigationDrawer:Q["a"],VSpacer:Y["a"],VSubheader:Z["a"],VToolbar:J["a"],VToolbarSideIcon:X["a"],VToolbarTitle:ee["a"],VTooltip:te["a"]});var ne=a("2909"),se=a("8c4f"),ie=(a("3ca3"),a("ddb0"),a("99af"),a("e372")),oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"pt-0",attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{grow:""}},[e.isLoading?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e()],1),e.$store.getters["userCanEditDashboard"]?a("v-flex",{staticClass:"edit-mode",attrs:{shrink:""}},[a("v-switch",{attrs:{label:"edit mode"},model:{value:e.editMode,callback:function(t){e.editMode=t},expression:"editMode"}})],1):e._e()],1),a("draggable",e._b({attrs:{"force-fallback":!0,tag:"div"},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.myWidgets,callback:function(t){e.myWidgets=t},expression:"myWidgets"}},"draggable",{group:"widgets",handle:".drag-handle",ghostClass:"u-drag-ghost",animation:200},!1),[a("transition-group",{staticClass:"layout row wrap",attrs:{type:"transition",name:e.drag?null:"flip-list"}},e._l(e.myWidgets,(function(t){return a("widget",{key:t.id,attrs:{widget:t,editMode:e.editMode}})})),1)],1),e.editMode?a("div",{staticClass:"inactive-widgets"},[a("div",{staticClass:"title mt-4 mb-2"},[e._v("Inactive Widgets")]),a("draggable",e._b({attrs:{"force-fallback":!0,tag:"div"},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.myInactiveWidgets,callback:function(t){e.myInactiveWidgets=t},expression:"myInactiveWidgets"}},"draggable",{group:"widgets",handle:".drag-handle",ghostClass:"u-drag-ghost",animation:200},!1),[a("transition-group",{staticClass:"layout row wrap",attrs:{type:"transition",name:e.drag?null:"flip-list"}},e._l(e.myInactiveWidgets,(function(t){return a("base-widget",{key:t.id,attrs:{widget:t,editMode:e.editMode}})})),1)],1)],1):e._e(),e.messages.length?a("v-dialog",{attrs:{persistent:"",width:"400"},model:{value:e.showMessages,callback:function(t){e.showMessages=t},expression:"showMessages"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Welcome")]),a("v-card-text",e._l(e.messages,(function(t,r){return a("v-alert",{key:r,attrs:{value:!0,type:t.type}},[e._v(e._s(t.text))])})),1),a("v-card-actions",[a("v-spacer"),a("v-spacer"),a("v-btn",{on:{click:function(t){e.showMessages=!1}}},[e._v("Close")])],1)],1)],1):e._e()],1)},le=[],ce=(a("4e82"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.widgetType,{tag:"component",attrs:{widget:e.widget,editMode:e.editMode}})}),ue=[],de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-flex",{class:"xs"+e.widget.xs_size+" sm"+e.widget.sm_size+" md"+e.widget.md_size+" lg"+e.widget.lg_size},[a("v-card",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{height:"100%",dark:!!e.widget.is_dark,light:!e.widget.is_dark,color:e.widget.color}},[e.isLoading?a("v-progress-linear",{attrs:{indeterminate:"",color:"primary"}}):e._e(),e.widget.title||e.widget.subtitle?a("v-card-text",[e.widget.title?a("div",{staticClass:"title"},[e._v(e._s(e.widget.title))]):e._e(),e.widget.subtitle?a("div",{staticClass:"subheading"},[e._v(e._s(e.widget.subtitle))]):e._e()]):e._e(),a("v-card-text",{staticClass:"grow"},[e._t("default")],2),a("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}]},[a("v-icon",{staticClass:"drag-handle"},[e._v("drag_indicator")]),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{flat:"",icon:""}},r),[a("v-icon",[e._v("settings")])],1)]}}]),model:{value:e.settingsDialog,callback:function(t){e.settingsDialog=t},expression:"settingsDialog"}},[a("v-form",{ref:"settingsForm",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveSettings(t)}}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.widget.type))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{label:"Widget Title"},model:{value:e.widgetModel.title,callback:function(t){e.$set(e.widgetModel,"title",t)},expression:"widgetModel.title"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{label:"Widget Subtitle"},model:{value:e.widgetModel.subtitle,callback:function(t){e.$set(e.widgetModel,"subtitle",t)},expression:"widgetModel.subtitle"}})],1),a("v-flex",{attrs:{xs8:"",md6:""}},[a("v-combobox",{attrs:{items:e.selectColors,rules:[e.validateColor],label:"Select, enter or pick a color"},model:{value:e.selectedColor,callback:function(t){e.selectedColor=t},expression:"selectedColor"}})],1),a("v-flex",{attrs:{xs4:"",md2:""}},[a("v-input-colorpicker",{staticClass:"picker",attrs:{label:"Color"},on:{change:e.onPickColor},model:{value:e.widgetModel.color,callback:function(t){e.$set(e.widgetModel,"color",t)},expression:"widgetModel.color"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-checkbox",{staticClass:"whiteText",attrs:{"true-value":1,"false-value":0,label:"White text?"},model:{value:e.widgetModel.is_dark,callback:function(t){e.$set(e.widgetModel,"is_dark",t)},expression:"widgetModel.is_dark"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{label:"Size on very small screens",items:e.sizeOptions},model:{value:e.widgetModel.xs_size,callback:function(t){e.$set(e.widgetModel,"xs_size",t)},expression:"widgetModel.xs_size"}},[a("v-tooltip",{attrs:{slot:"prepend",bottom:""},slot:"prepend"},[a("v-icon",{attrs:{slot:"activator"},slot:"activator"},[e._v("info")]),a("span",[e._v("screen width < 600px")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{label:"Size on small screens",items:e.sizeOptions},model:{value:e.widgetModel.sm_size,callback:function(t){e.$set(e.widgetModel,"sm_size",t)},expression:"widgetModel.sm_size"}},[a("v-tooltip",{attrs:{slot:"prepend",bottom:""},slot:"prepend"},[a("v-icon",{attrs:{slot:"activator"},slot:"activator"},[e._v("info")]),a("span",[e._v("600px > screen width < 960px")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{label:"Widget on medium screens",items:e.sizeOptions},model:{value:e.widgetModel.md_size,callback:function(t){e.$set(e.widgetModel,"md_size",t)},expression:"widgetModel.md_size"}},[a("v-tooltip",{attrs:{slot:"prepend",bottom:""},slot:"prepend"},[a("v-icon",{attrs:{slot:"activator"},slot:"activator"},[e._v("info")]),a("span",[e._v("960px > screen width < 1264px")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{label:"Size on large screens",items:e.sizeOptions},model:{value:e.widgetModel.lg_size,callback:function(t){e.$set(e.widgetModel,"lg_size",t)},expression:"widgetModel.lg_size"}},[a("v-tooltip",{attrs:{slot:"prepend",bottom:""},slot:"prepend"},[a("v-icon",{attrs:{slot:"activator"},slot:"activator"},[e._v("info")]),a("span",[e._v("screen width > 1264px")])],1)],1)],1)],1),e._t("extraSettingsForm",null,{extraSettingsFormModel:e.extraSettingsFormModel})],2)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.settingsDialog=!1}}},[e._v("Close")]),a("v-btn",{attrs:{color:"blue darken-1",flat:"",loading:e.isLoading},on:{click:e.saveSettings}},[e._v("Save")])],1)],1)],1)],1),e.widget.cloneable?a("v-btn",{attrs:{flat:"",icon:"",loading:e.isDuplicating},on:{click:e.duplicateWidget}},[a("v-icon",{attrs:{color:"teal"}},[e._v("file_copy")])],1):e._e(),e.widget.deletable?a("v-btn",{attrs:{flat:"",icon:"",loading:e.isDeleting},on:{click:e.deleteWidget}},[a("v-icon",{attrs:{color:"red"}},[e._v("delete")])],1):e._e()],1)],1)],1)},me=[],pe=a("3835"),fe=(a("159b"),a("b64b"),a("2ca0"),a("1276"),a("7db0"),a("fb6a"),a("466d"),a("fcf4")),_e=a("79e8"),ve=a.n(_e),he={name:"BaseWidget",components:{"v-input-colorpicker":ve.a},props:{widget:{type:Object,required:!0},editMode:{type:Boolean,required:!0},extraSettingsProps:{type:Array,default:function(){return[]}}},data:function(){return{settingsDialog:!1,selectedColor:"",widgetModel:{title:null,subtitle:null,active:null,color:null,is_dark:0,xs_size:null,sm_size:null,md_size:null,lg_size:null},extraSettingsFormModel:{},isLoading:!1,isDuplicating:!1,isDeleting:!1,sizeOptions:[{text:"25%",value:3},{text:"33%",value:4},{text:"50%",value:6},{text:"66%",value:8},{text:"75%",value:9},{text:"100%",value:12}],selectColors:[]}},mounted:function(){var e=this;this.widgetModel.title=this.widget.title,this.widgetModel.subtitle=this.widget.subtitle,this.selectedColor=this.widget.color,this.widgetModel.is_dark=this.widget.is_dark,this.widgetModel.active=this.widget.active,this.widgetModel.xs_size=this.widget.xs_size,this.widgetModel.sm_size=this.widget.sm_size,this.widgetModel.md_size=this.widget.md_size,this.widgetModel.lg_size=this.widget.lg_size;for(var t=0;t<this.extraSettingsProps.length;t++)this.$set(this.extraSettingsFormModel,this.extraSettingsProps[t],null),this.extraSettingsFormModel[this.extraSettingsProps[t]]=this.widget.extraSettings[this.extraSettingsProps[t]];Object.keys(fe["a"]).forEach((function(t){Object.keys(fe["a"][t]).forEach((function(a){e.selectColors.push(t+" "+a)}))})),this.onPickColor=Object(k["a"])(this.onPickColor,300)},watch:{selectedColor:function(e){console.log("watch selectedColor:",e),this.widgetModel.color=this.hexColor(e),console.log("widgetModel.color:",this.widgetModel.color)}},methods:{saveSettings:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,t.next=4,e.$store.dispatch("saveWidgetSettings",{id:e.widget.id,data:Object.assign({extraSettings:e.extraSettingsFormModel},e.widgetModel)});case 4:e.settingsDialog=!1,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$dialog.notify.warning("could not save widget settings."),console.log(t.t0);case 11:return t.prev=11,e.isLoading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,7,11,14]])})))()},duplicateWidget:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isDuplicating=!0,t.next=4,e.$store.dispatch("duplicateWidget",{id:e.widget.id});case 4:t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$dialog.notify.warning("could not duplicate widget. "+t.t0.message),console.log(t.t0);case 10:return t.prev=10,e.isDuplicating=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,6,10,13]])})))()},deleteWidget:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isDeleting=!0,t.next=4,e.$store.dispatch("deleteWidget",{id:e.widget.id});case 4:t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$dialog.notify.warning("could not delete widget. "+t.t0.message),console.log(t.t0);case 10:return t.prev=10,e.isDeleting=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,6,10,13]])})))()},hexColor:function(e){if(!e)return null;if(e.startsWith("#"))return e.toLowerCase();var t=e.split(" "),a=Object(pe["a"])(t,2),r=a[0],n=a[1],s=["black","white","transparent"],i={family:null,modifier:null};if(s.find((function(e){return e===r})))i.family="shades",i.modifier=r;else{var o=r.split("-"),l=Object(pe["a"])(o,2),c=l[0],u=l[1];i.family=c+(u?u.charAt(0).toUpperCase()+u.slice(1):""),i.modifier=n?n.replace("-",""):"base"}return fe["a"][i.family][i.modifier]},onPickColor:function(e){console.log("picked color",e),this.selectedColor=e},validateColor:function(e){var t=this.hexColor(e);return!(t&&!t.match(/^#[abcdef0123456789]{3,6}$/))||"Please enter, select or pick a valid color"}}},ge=he,be=(a("f321"),a("12b2")),ye=a("ac7c"),xe=a("2b5d"),we=a("a523"),ke=a("4bd4"),Ce=a("8e36"),Oe=a("b56d"),Me=a("2677"),je=Object(y["a"])(ge,de,me,!1,null,"3290fa47",null),Ie=je.exports;E()(je,{VBtn:T["a"],VCard:F["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:be["a"],VCheckbox:ye["a"],VCombobox:xe["a"],VContainer:we["a"],VDialog:V["a"],VFlex:L["a"],VForm:ke["a"],VIcon:U["a"],VLayout:B["a"],VProgressLinear:Ce["a"],VSelect:Oe["a"],VSpacer:Y["a"],VTextField:Me["a"],VTooltip:te["a"]});var Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-widget",{ref:"baseWidget",attrs:{widget:e.widget,editMode:e.editMode,extraSettingsProps:["projectName","projectDescription","projectImage","projectContact","imageWidth","imageAlignment","imageTextStack","websiteLink"]},scopedSlots:e._u([{key:"extraSettingsForm",fn:function(t){var r=t.extraSettingsFormModel;return[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{label:"Project Name"},model:{value:r.projectName,callback:function(t){e.$set(r,"projectName",t)},expression:"extraSettingsFormModel.projectName"}}),a("v-text-field",{attrs:{label:"Project Website Link"},model:{value:r.websiteLink,callback:function(t){e.$set(r,"websiteLink",t)},expression:"extraSettingsFormModel.websiteLink"}}),a("v-textarea",{attrs:{label:"Project Description","auto-grow":""},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}},model:{value:r.projectDescription,callback:function(t){e.$set(r,"projectDescription",t)},expression:"extraSettingsFormModel.projectDescription"}}),a("v-textarea",{attrs:{label:"Project Contacts","auto-grow":""},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}},model:{value:r.projectContact,callback:function(t){e.$set(r,"projectContact",t)},expression:"extraSettingsFormModel.projectContact"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("div",[r.projectImage?a("v-img",{attrs:{src:r.projectImage}},[a("v-btn",{attrs:{icon:""},on:{click:e.pickFile}},[a("v-icon",[e._v("edit")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(e){r.projectImage=""}}},[a("v-icon",[e._v("close")])],1)],1):a("v-btn",{attrs:{icon:""},on:{click:e.pickFile}},[a("v-icon",[e._v("add_a_photo")])],1),a("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}})],1),a("v-select",{attrs:{label:"Image Width",items:["25%","50%","75%","100%"]},model:{value:r.imageWidth,callback:function(t){e.$set(r,"imageWidth",t)},expression:"extraSettingsFormModel.imageWidth"}}),a("v-select",{attrs:{label:"Image Alignment",items:["left","center","right"]},model:{value:r.imageAlignment,callback:function(t){e.$set(r,"imageAlignment",t)},expression:"extraSettingsFormModel.imageAlignment"}}),a("v-select",{attrs:{label:"Stack Image and Text as",items:["row","column"]},model:{value:r.imageTextStack,callback:function(t){e.$set(r,"imageTextStack",t)},expression:"extraSettingsFormModel.imageTextStack"}})],1)],1)]}}])},[a("v-layout",{staticClass:"c-project-information",attrs:{row:"row"!==e.widget.extraSettings.imageTextStack,column:"column"!==e.widget.extraSettings.imageTextStack}},[a("v-flex",{style:{"text-align":e.widget.extraSettings.imageAlignment||"center"},attrs:{xs6:""}},[e.widget.extraSettings.projectImage?a("v-img",{staticClass:"c-project-information__image",style:{width:e.widget.extraSettings.imageWidth||"100%",height:"auto","margin-left":"left"===e.widget.extraSettings.imageAlignment?0:"auto","margin-right":"right"===e.widget.extraSettings.imageAlignment?0:"auto"},attrs:{src:e.widget.extraSettings.projectImage}}):e._e()],1),a("v-flex",{attrs:{xs6:""}},[e.widget.extraSettings.projectName?a("div",{staticClass:"headline c-project-information__title"},[e._v(" "+e._s(e.widget.extraSettings.projectName)+" ")]):e._e(),e.widget.extraSettings.websiteLink?a("a",{staticClass:"c-project-information__website",attrs:{target:"_blank",href:e.widget.extraSettings.websiteLink}},[e._v(e._s(e.widget.extraSettings.websiteLink))]):e._e(),e.widget.extraSettings.projectDescription?a("div",{staticClass:"body-2 c-project-information__description",staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.widget.extraSettings.projectDescription))]):e._e(),e.widget.extraSettings.projectContact?a("div",{staticClass:"body-2 c-project-information__contact",staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.widget.extraSettings.projectContact))]):e._e()])],1),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("div",{staticClass:"text-xs-right mt-2"},[a("span",e._g({},r),[e._v(e._s(e.$store.state.gitInfo.version)+" ("+e._s(e.$store.state.gitInfo.commitdate)+")")])])]}}])},[a("ul",[a("li",[e._v("Version: "+e._s(e.$store.state.gitInfo.version))]),a("li",[e._v("Commit: "),a("a",{attrs:{href:"https://gitlab.informationsgesellschaft.com/dis/dis/commit/"+e.$store.state.gitInfo.commit,target:"_blank"}},[e._v(e._s(e.$store.state.gitInfo.commit.slice(0,8)))])]),a("li",[e._v("Branch: "+e._s(e.$store.state.gitInfo.branch))]),a("li",[e._v("Commit Date: "+e._s(e.$store.state.gitInfo.commitdate))])])])],1)},De=[],Te=(a("b0c0"),a("2b3d"),a("9861"),{name:"ProjectInformationWidget",components:{BaseWidget:Ie},props:{widget:{type:Object,required:!0},editMode:{type:Boolean,required:!0}},methods:{pickFile:function(){this.$refs.image.click()},onFilePicked:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.target.files,void 0===r[0]){a.next=9;break}if(!(r[0].name.lastIndexOf(".")<=0)){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,t.resizeImage(r[0]);case 6:t.$refs.baseWidget.extraSettingsFormModel.projectImage=a.sent,a.next=10;break;case 9:t.$refs.baseWidget.extraSettingsFormModel.projectImage=null;case 10:case"end":return a.stop()}}),a)})))()},resizeImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1920,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1080;return console.log(e),new Promise((function(r,n){var s=new Image;s.src=URL.createObjectURL(e),s.onload=function(){var e=document.createElement("canvas"),n=e.getContext("2d"),i=Math.min(t/s.width,a/s.height);e.width=s.width*i,e.height=s.height*i,n.drawImage(s,0,0,e.width,e.height),r(e.toDataURL())}}))}}}),Fe=Te,Se=a("a844"),Pe=Object(y["a"])(Fe,Ee,De,!1,null,null,null),Ve=Pe.exports;E()(Pe,{VBtn:T["a"],VFlex:L["a"],VIcon:U["a"],VImg:N["a"],VLayout:B["a"],VSelect:Oe["a"],VTextField:Me["a"],VTextarea:Se["a"],VTooltip:te["a"]});var Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-widget",{ref:"baseWidget",attrs:{widget:e.widget,editMode:e.editMode,extraSettingsProps:["videoTutorialsLink","docsPdf","userHelpLink","dataDescriptionPdf"]},scopedSlots:e._u([{key:"extraSettingsForm",fn:function(t){var r=t.extraSettingsFormModel;return[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{label:"Video Tutorials Link"},model:{value:r.videoTutorialsLink,callback:function(t){e.$set(r,"videoTutorialsLink",t)},expression:"extraSettingsFormModel.videoTutorialsLink"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{label:"Docs Pdf File"},model:{value:r.docsPdf,callback:function(t){e.$set(r,"docsPdf",t)},expression:"extraSettingsFormModel.docsPdf"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{label:"User Help Link"},model:{value:r.userHelpLink,callback:function(t){e.$set(r,"userHelpLink",t)},expression:"extraSettingsFormModel.userHelpLink"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{label:"Data Description PDF File"},model:{value:r.dataDescriptionPdf,callback:function(t){e.$set(r,"dataDescriptionPdf",t)},expression:"extraSettingsFormModel.dataDescriptionPdf"}})],1)],1)]}}])},[a("v-list",[e.widget.extraSettings.videoTutorialsLink?a("v-list-tile",{attrs:{href:e.widget.extraSettings.videoTutorialsLink,target:"_blank"}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"red"}},[e._v("video_library")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(" Video Tutorials ")])],1)],1):e._e(),e.widget.extraSettings.docsPdf?a("v-list-tile",{attrs:{href:e.widget.extraSettings.docsPdf,target:"_blank"}},[a("v-list-tile-action",[a("v-icon",[e._v("insert_drive_file")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(" PDF Documentation ")])],1)],1):e._e(),e.widget.extraSettings.userHelpLink?a("v-list-tile",{attrs:{href:e.widget.extraSettings.userHelpLink,target:"_blank"}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"blue"}},[e._v("help")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(" User Help ")])],1)],1):e._e(),e.widget.extraSettings.dataDescriptionPdf?a("v-list-tile",{attrs:{href:e.widget.extraSettings.dataDescriptionPdf,target:"_blank"}},[a("v-list-tile-action",[a("v-icon",[e._v("insert_drive_file")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(" Data Description ")])],1)],1):e._e()],1)],1)},Re=[],Le={name:"InstructionsWidget",components:{BaseWidget:Ie},props:{widget:{type:Object,required:!0},editMode:{type:Boolean,required:!0}}},$e=Le,Ue=Object(y["a"])($e,Ae,Re,!1,null,null,null),Ne=Ue.exports;E()(Ue,{VFlex:L["a"],VIcon:U["a"],VLayout:B["a"],VList:W["a"],VListTile:K["a"],VListTileAction:G["a"],VListTileContent:H["a"],VListTileTitle:H["b"],VTextField:Me["a"]});var Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-widget",{ref:"baseWidget",attrs:{widget:e.widget,editMode:e.editMode}},[a("v-layout",{staticClass:"posts",attrs:{column:""}},[a("v-flex",[a("v-layout",{staticClass:"posts_form",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{grow:""}},[a("v-textarea",{attrs:{rows:"2","auto-grow":"",label:"Post Text","hide-details":"",outline:""},model:{value:e.newPostText,callback:function(t){e.newPostText=t},expression:"newPostText"}})],1),a("v-flex",{attrs:{shrink:""}},[a("v-btn",{attrs:{icon:"",loading:e.isPosting},on:{click:e.submitPost}},[a("v-icon",[e._v("send")])],1)],1)],1)],1),e.isLoading?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),a("v-flex",{staticClass:"scroll-y",staticStyle:{height:"300px"}},[a("v-timeline",{attrs:{light:"",dense:""}},e._l(e.posts,(function(t){return a("v-timeline-item",{key:t.id,attrs:{right:"",small:""}},[a("v-card",{staticClass:"elevation-2"},[a("v-card-text",[a("div",{staticClass:"d-flex body-2"},[e._v(e._s(t.author)+" "),a("v-spacer"),e._v(" "+e._s(e._f("formatTimestamp")(1e3*t.created_at)))],1),e._v(" "+e._s(t.text)+" "),a("div",{staticClass:"text-xs-right"},[a("v-btn",{staticClass:"ma-0",attrs:{small:"",icon:"",disabled:e.isLoading},on:{click:function(){return e.deletePost(t.id)}}},[a("v-icon",{attrs:{color:"red"}},[e._v("delete")])],1)],1)])],1)],1)})),1),e.postsMeta.currentPage<e.postsMeta.pageCount?a("v-btn",{attrs:{loading:e.isLoading},on:{click:function(){return e.getPosts(e.postsMeta.currentPage+1,!0)}}},[e._v("Load Older")]):e._e()],1)],1)],1)},We=[],qe=(a("caad"),a("2532"),a("d4ec")),Ke=a("bee2"),Ge=a("262e"),He=a("2caf"),ze=a("bc3a"),Qe=a.n(ze),Ye=function(e){Object(Ge["a"])(a,e);var t=Object(He["a"])(a);function a(){var e;return Object(qe["a"])(this,a),e=t.call(this),e._controller=e.baseUrl+"api/v1/posts",e}return Object(Ke["a"])(a,[{key:"get",value:function(e){return Qe.a.get("".concat(this._controller,"?").concat(this.encodeQueryParams(e)),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"post",value:function(e){return Qe.a.post("".concat(this._controller),e,{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"put",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Qe.a.put("".concat(this._controller).concat(e?"/"+e:""),t,{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"delete",value:function(e){return Qe.a.delete("".concat(this._controller,"/").concat(e),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}}]),a}(m["a"]),Ze=Ye,Je=new Ze,Xe={name:"PostBoxWidget",components:{BaseWidget:Ie},props:{widget:{type:Object,required:!0},editMode:{type:Boolean,required:!0}},data:function(){return{posts:[],postsMeta:{currentPage:1,pageCount:2,perPage:5,totalCount:7},newPostText:"",isPosting:!1,isLoading:!1}},computed:{userCanDeletePost:function(){return this.$store.state.loggedInUser&&(this.$store.state.loggedInUser.roles.includes("sa")||this.$store.state.loggedInUser.roles.includes("developer"))}},mounted:function(){this.getPosts()},methods:{getPosts:function(){var e=arguments,t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:1,n=e.length>1&&void 0!==e[1]&&e[1],a.prev=2,t.isLoading=!0,a.next=6,Je.get({"per-page":5,sort:"-created_at",page:r});case 6:s=a.sent,n?(i=t.posts).push.apply(i,Object(ne["a"])(s.items)):t.posts=s.items,t.postsMeta=s._meta,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](2),console.log(a.t0);case 14:return a.prev=14,t.isLoading=!1,a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[2,11,14,17]])})))()},submitPost:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isPosting=!0,t.next=4,Je.post({text:e.newPostText});case 4:return a=t.sent,e.posts.unshift(a),e.newPostText="",t.next=9,e.getPosts();case 9:t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0),e.$dialog.notify.warning(t.t0.message);case 15:return t.prev=15,e.isPosting=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,11,15,18]])})))()},deletePost:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isLoading=!0,a.next=4,t.$dialog.confirm({title:"Delete a Post",text:"This action cannot be reverted. Are you sure?"});case 4:if(r=a.sent,!r){a.next=10;break}return a.next=8,Je.delete(e);case 8:return a.next=10,t.getPosts();case 10:a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](0),console.log(a.t0),t.$dialog.notify.warning(a.t0.message);case 16:return a.prev=16,t.isLoading=!1,a.finish(16);case 19:case"end":return a.stop()}}),a,null,[[0,12,16,19]])})))()}}},et=Xe,tt=a("8414"),at=a("1e06"),rt=Object(y["a"])(et,Be,We,!1,null,null,null),nt=rt.exports;E()(rt,{VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VFlex:L["a"],VIcon:U["a"],VLayout:B["a"],VProgressLinear:Ce["a"],VSpacer:Y["a"],VTextarea:Se["a"],VTimeline:tt["a"],VTimelineItem:at["a"]});var st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-widget",{ref:"baseWidget",attrs:{widget:e.widget,editMode:e.editMode,extraSettingsProps:["calendarWidth"]},scopedSlots:e._u([{key:"extraSettingsForm",fn:function(t){var r=t.extraSettingsFormModel;return[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{label:"Calendar width",items:[{text:"25%",value:"xs3"},{text:"33%",value:"xs4"},{text:"50%",value:"xs6"},{text:"75%",value:"xs9"}]},model:{value:r.calendarWidth,callback:function(t){e.$set(r,"calendarWidth",t)},expression:"extraSettingsFormModel.calendarWidth"}})],1)],1)]}}])},[a("v-layout",{staticClass:"messages",attrs:{row:""}},[a("v-flex",{class:e.widget.extraSettings.calendarWidth||"xs8"},[a("v-layout",{attrs:{row:"","justify-space-between":""}},[a("v-btn",{attrs:{fab:"",icon:"",outline:"",small:"",color:"primary"},on:{click:function(t){return e.$refs.calendar.prev()}}},[a("v-icon",{attrs:{dark:""}},[e._v(" keyboard_arrow_left ")])],1),e.isLoading?a("v-progress-circular",{attrs:{indeterminate:""}}):e._e(),a("v-btn",{attrs:{fab:"",icon:"",outline:"",small:"",color:"primary"},on:{click:function(t){return e.$refs.calendar.next()}}},[a("v-icon",{attrs:{dark:""}},[e._v(" keyboard_arrow_right ")])],1)],1),a("v-sheet",{attrs:{height:"400"}},[a("v-calendar",{ref:"calendar",attrs:{start:e.start,end:e.end,color:"primary"},on:{change:e.onCalendarChange},scopedSlots:e._u([{key:"day",fn:function(t){var r=t.date;return[e._l(e.messages.filter((function(e){return e.date===r})),(function(t){return[a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.id,staticClass:"blue text--white pa-1 message-in-calendar",attrs:{title:t.message.trim()},domProps:{innerHTML:e._s(t.message)},on:{click:function(a){e.selectedMessage=t}}})]}))]}}]),model:{value:e.start,callback:function(t){e.start=t},expression:"start"}})],1)],1),a("v-flex",[a("v-tabs",{attrs:{dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tab",{key:"last-message",attrs:{ripple:""}},[e._v(" Last Message ")]),a("v-tab",{key:"new-message",attrs:{ripple:""}},[e._v(" New Message ")]),a("v-tab-item",{key:"last-message"},[a("message-of-the-day-view",{attrs:{messageDefaultImage:e.messageDefaultImage,previewMessage:e.previewMessage,isLastMessage:!e.selectedMessage||e.selectedMessage&&e.lastMessage&&e.selectedMessage.id===e.lastMessage.id},on:{"show-last-message":function(t){e.selectedMessage=null},"delete-message":e.onDeleteMessage,"message-updated":e.onMessageUpdated}})],1),a("v-tab-item",{key:"new-message"},[a("message-of-the-day-form",{attrs:{messageDefaultImage:e.messageDefaultImage},on:{"message-created":e.onMessageCreated}})],1)],1)],1)],1)],1)},it=[],ot=function(e){Object(Ge["a"])(a,e);var t=Object(He["a"])(a);function a(){var e;return Object(qe["a"])(this,a),e=t.call(this),e._controller=e.baseUrl+"api/v1/messages",e}return Object(Ke["a"])(a,[{key:"get",value:function(e){return Qe.a.get("".concat(this._controller,"?").concat(this.encodeQueryParams(e)),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"post",value:function(e){return Qe.a.post("".concat(this._controller),e,{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"put",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Qe.a.put("".concat(this._controller).concat(e?"/"+e:""),t,{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"delete",value:function(e){return Qe.a.delete("".concat(this._controller,"/").concat(e),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}}]),a}(m["a"]),lt=ot,ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"scroll-y",attrs:{flat:"",height:"400"}},[a("v-card-text",[a("v-menu",{attrs:{disabled:!!this.updateFormModel,"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:"Date",readonly:"","prepend-icon":"event"},model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}},r))]}}]),model:{value:e.datePickerMenu,callback:function(t){e.datePickerMenu=t},expression:"datePickerMenu"}},[a("v-date-picker",{attrs:{"no-title":""},on:{input:function(t){e.datePickerMenu=!1},change:e.onDateChange},model:{value:e.formModel.date,callback:function(t){e.$set(e.formModel,"date",t)},expression:"formModel.date"}})],1),a("v-select",{attrs:{label:"File Type",items:e.fileTypesList},model:{value:e.fileType,callback:function(t){e.fileType=t},expression:"fileType"}}),a("v-textarea",{attrs:{rows:"2","auto-grow":"",label:"Message Of The Day","hide-details":"",outline:""},model:{value:e.formModel.message,callback:function(t){e.$set(e.formModel,"message",t)},expression:"formModel.message"}}),e.isLoadingImages?a("v-progress-linear",{attrs:{indeterminate:""}}):e._l(e.imagesList,(function(t,r){return a("v-layout",{key:t.id,attrs:{row:"","align-center":""}},[a("v-flex",[a("v-img",{attrs:{src:t.image_id?e.baseUrl+"files/"+t.image_id:t.src}})],1),a("v-flex",[a("v-checkbox",{attrs:{"hide-details":"",value:e.imagesList[r],label:"Add to message?"},model:{value:e.formModel.images,callback:function(t){e.$set(e.formModel,"images",t)},expression:"formModel.images"}}),a("v-textarea",{attrs:{rows:"2","auto-grow":"",label:"Caption","hide-details":"",outline:""},model:{value:e.imagesList[r].caption,callback:function(t){e.$set(e.imagesList[r],"caption",t)},expression:"imagesList[index].caption"}})],1)],1)})),a("v-alert",{attrs:{dismissible:""},model:{value:e.showErrorSummary,callback:function(t){e.showErrorSummary=t},expression:"showErrorSummary"}},[a("ul",e._l(e.serverValidationErrors,(function(t){return a("li",{key:t.field},[a("strong",[e._v(e._s(t.field))]),e._v(": "+e._s(t.message)+" ")])})),0)])],2),a("v-card-actions",{staticClass:"justify-end"},[e._t("extra-buttons"),a("v-btn",{attrs:{loading:e.isPosting,color:"primary"},on:{click:e.submitMessage}},[e._v(" Submit ")])],2)],1)},ut=[],dt=(a("4d90"),a("d81d"),a("6661")),mt=a("5cce"),pt=new lt,ft={name:"MessageOfTheDayForm",props:{messageDefaultImage:{type:Object,required:!0},updateFormModel:{type:Object,required:!1}},data:function(){return{formModel:{id:null,date:(new Date).toISOString().substr(0,10),message:"",images:[]},imagesList:[],dateFormatted:this.formatDate((new Date).toISOString().substr(0,10)),datePickerMenu:!1,isPosting:!1,isLoadingImages:!1,serverValidationErrors:[],fileType:null,fileTypesList:[],baseUrl:window.baseUrl}},computed:{showErrorSummary:{get:function(){return this.serverValidationErrors.length>0},set:function(e){!e&&(this.serverValidationErrors=[])}},userCanDeleteMessage:function(){return this.$store.state.loggedInUser&&(this.$store.state.loggedInUser.roles.includes("sa")||this.$store.state.loggedInUser.roles.includes("developer"))},computedDateFormatted:function(){return this.formatDate(this.formModel.date)}},mounted:function(){this.getFileTypesList(),this.updateFormModel?(this.formModel=Object.assign({},this.updateFormModel),this.getFilesByDate()):this.getFilesByDate()},methods:{submitMessage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.isPosting=!0,e.showErrorSummary=!1,e.updateFormModel){t.next=15;break}return t.next=6,pt.post({message:e.formModel.message,date:e.formModel.date,images:e.formModel.images});case 6:a=t.sent,e.$emit("message-created",a),e.getFilesByDate(e.newMessageDate),e.formModel.id=null,e.formModel.message="",e.formModel.date=(new Date).toISOString().substr(0,10),e.formModel.images=[],t.next=19;break;case 15:return t.next=17,pt.put(e.formModel.id,e.formModel);case 17:r=t.sent,e.$emit("message-updated",r);case 19:t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](0),console.log(t.t0),t.t0.response&&422===t.t0.response.status?(e.$dialog.notify.warning("Message is not valid."),e.serverValidationErrors=t.t0.response.data):e.$dialog.notify.warning(t.t0.message);case 25:return t.prev=25,e.isPosting=!1,t.finish(25);case 28:case"end":return t.stop()}}),t,null,[[0,21,25,28]])})))()},formatDate:function(e){if(!e)return null;var t=e.split("-"),a=Object(pe["a"])(t,3),r=a[0],n=a[1],s=a[2];return"".concat(s,"-").concat(n,"-").concat(r)},parseDate:function(e){if(!e)return null;var t=e.split("-"),a=Object(pe["a"])(t,3),r=a[0],n=a[1],s=a[2];return"".concat(s,"-").concat(r.padStart(2,"0"),"-").concat(n.padStart(2,"0"))},onDateChange:function(e){console.log("onDateChange",e),this.getFilesByDate()},getFilesByDate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.fileType){t.next=2;break}return t.abrupt("return",[]);case 2:return t.prev=2,t.delegateYield(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoadingImages=!0,e.imagesList=[],e.formModel.images=e.updateFormModel?e.updateFormModel.images:[],a=new dt["a"]("ArchiveFile"),t.next=6,a.getList({"filter[upload_date]":e.formModel.date,"filter[mime_type]":"image/","filter[type]":e.fileType});case 6:for(r=t.sent,n=function(t){e.updateFormModel&&e.updateFormModel.images.findIndex((function(e){return e.image_id===r.items[t].id}))>-1?e.imagesList.push(e.updateFormModel.images.find((function(e){return e.image_id===r.items[t].id}))):e.imagesList.push({image_id:r.items[t].id,caption:r.items[t].remarks})},s=0;s<r.items.length;s++)n(s);0===e.imagesList.length&&e.imagesList.push(e.messageDefaultImage);case 10:case"end":return t.stop()}}),t)}))(),"t0",4);case 4:t.next=9;break;case 6:t.prev=6,t.t1=t["catch"](2),e.$dialog.notify.warning(t.t1.message);case 9:return t.prev=9,e.isLoadingImages=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[2,6,9,12]])})))()},getFileTypesList:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new mt["a"]("ListValues"),t.next=3,a.getList({sort:"sort",fields:"remark,display,sort"},{listname:"UPLOAD_FILE_TYPE"});case 3:r=t.sent,e.fileTypesList=r.items.map((function(e){return{text:e.display+" | "+e.remark,value:e.display}}));case 5:case"end":return t.stop()}}),t)})))()}},watch:{newMessageDate:function(e){this.dateFormatted=this.formatDate(this.newMessageText)},fileType:function(e){this.getFilesByDate()}}},_t=ft,vt=a("0798"),ht=a("2e4b"),gt=Object(y["a"])(_t,ct,ut,!1,null,"360e45ac",null),bt=gt.exports;E()(gt,{VAlert:vt["a"],VBtn:T["a"],VCard:F["a"],VCardActions:S["a"],VCardText:S["b"],VCheckbox:ye["a"],VDatePicker:ht["a"],VFlex:L["a"],VImg:N["a"],VLayout:B["a"],VMenu:z["a"],VProgressLinear:Ce["a"],VSelect:Oe["a"],VTextField:Me["a"],VTextarea:Se["a"]});var yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"scroll-y",attrs:{flat:"",height:"400"}},[e.previewMessage?a("v-card-text",[a("v-layout",{attrs:{row:"","align-center":""}},[a("span",{staticClass:"title"},[e._v(e._s(e.previewMessage.date))]),a("v-spacer"),a("v-btn",{attrs:{flat:"",small:"",disabled:e.isLastMessage},on:{click:function(){return e.$emit("show-last-message")}}},[e._v("Show Last Message")])],1),a("div",{staticClass:"body-1 mt-1 mb-3"},[e._v(" "+e._s(e.previewMessage.message)+" ")]),e._l(e.previewMessage.images,(function(t){return a("v-img",{key:t.id,staticClass:"mb-1",attrs:{src:e.baseUrl+"files/"+t.image_id,"aspect-ratio":1,title:e.previewMessage.date+": "+e.previewMessage.message.trim()+" ("+t.caption.trim()+")"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[a("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)},[a("v-container",{attrs:{"fill-height":"",fluid:"","pa-0":""}},[a("v-layout",{attrs:{row:"","align-end":"","justify-center":"","fill-height":""}},[a("v-flex",{staticClass:"image-caption",attrs:{"pa-2":""}},[a("span",{staticClass:"body-2"},[e._v(e._s(e.previewMessage.date)+": "+e._s(t.caption))])])],1)],1)],1)})),0===e.previewMessage.images.length?a("v-img",{staticClass:"mb-1",attrs:{src:e.messageDefaultImage.src,"aspect-ratio":1,title:e.previewMessage.date+": "+e.previewMessage.message.trim()+" ("+e.messageDefaultImage.caption.trim()+")"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[a("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,1258913907)},[a("v-container",{attrs:{"fill-height":"",fluid:"","pa-0":""}},[a("v-layout",{attrs:{row:"","align-end":"","justify-center":"","fill-height":""}},[a("v-flex",{staticClass:"image-caption",attrs:{"pa-2":""}},[a("span",{staticClass:"body-2"},[e._v(e._s(e.previewMessage.date)+": "+e._s(e.messageDefaultImage.caption))])])],1)],1)],1):e._e(),a("div",{staticClass:"text-xs-right"},[a("v-dialog",{attrs:{"max-width":"600px",lazy:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{flat:""}},r),[a("v-icon",{attrs:{color:"orange"}},[e._v("edit")]),e._v(" edit message ")],1)]}}],null,!1,4102590736),model:{value:e.updateModelDialog,callback:function(t){e.updateModelDialog=t},expression:"updateModelDialog"}},[e.updateModelDialog?a("message-of-the-day-form",{attrs:{"update-form-model":e.previewMessage,messageDefaultImage:e.messageDefaultImage},on:{"message-updated":e.onMessageUpdated},scopedSlots:e._u([{key:"extra-buttons",fn:function(){return[a("v-btn",{attrs:{color:"red",dark:""},on:{click:function(t){e.updateModelDialog=!1}}},[e._v(" Close")])]},proxy:!0}],null,!1,3493038939)}):e._e()],1),a("v-btn",{attrs:{flat:""},on:{click:function(){return e.$emit("delete-message",e.previewMessage.id)}}},[a("v-icon",{attrs:{color:"red"}},[e._v("delete")]),e._v(" delete message ")],1)],1)],2):a("v-card-text",[e._v(" No messages were written yet. Use the form to create a new one ")])],1)},xt=[],wt={name:"MessageOfTheDayView",components:{MessageOfTheDayForm:bt},props:{previewMessage:{required:!0},messageDefaultImage:{type:Object,required:!0},isLastMessage:{type:Boolean,required:!0}},data:function(){return{updateModelDialog:!1,baseUrl:window.baseUrl}},methods:{onMessageUpdated:function(e){this.$emit("message-updated",e),this.updateModelDialog=!1}}},kt=wt,Ct=a("490a"),Ot=Object(y["a"])(kt,yt,xt,!1,null,"11c10c5e",null),Mt=Ot.exports;E()(Ot,{VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VContainer:we["a"],VDialog:V["a"],VFlex:L["a"],VIcon:U["a"],VImg:N["a"],VLayout:B["a"],VProgressCircular:Ct["a"],VSpacer:Y["a"]});var jt=new lt,It={name:"MessageOfTheDayWidget",components:{MessageOfTheDayView:Mt,MessageOfTheDayForm:bt,BaseWidget:Ie},props:{widget:{type:Object,required:!0},editMode:{type:Boolean,required:!0}},data:function(){return{messages:[],messagesMeta:{currentPage:1,pageCount:2,perPage:5,totalCount:7},isLoading:!1,lastMessage:null,selectedMessage:null,activeTab:null,start:null,end:null,messageDefaultImage:{image_id:0,src:a("cf05"),caption:"Default image: woodpecker logo"}}},mounted:function(){this.getLastMessage()},computed:{messagesMap:function(){var e={};return this.messages.forEach((function(t){return(e[t.date]=e[t.date]||[]).push(t)})),e},previewMessage:function(){return this.selectedMessage||this.lastMessage}},methods:{getMessages:function(e,t){var a=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a.isLoading=!0,r.next=4,jt.get({"filter[date][gt]":e,"filter[date][lt]":t});case 4:n=r.sent,a.messages=n.items,a.messagesMeta=n._meta,r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0);case 12:return r.prev=12,a.isLoading=!1,r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,9,12,15]])})))()},getLastMessage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,t.next=4,jt.get({"per-page":1,sort:"-date"});case 4:a=t.sent,a.items.length?e.lastMessage=a.items[0]:e.lastMessage=null,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:return t.prev=11,e.isLoading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()},onDeleteMessage:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isLoading=!0,a.next=4,t.$dialog.confirm({title:"Delete a Message",text:"This action cannot be reverted. Are you sure?"});case 4:if(r=a.sent,!r){a.next=11;break}return a.next=8,jt.delete(e);case 8:t.selectedMessage=null,t.messages=t.messages.filter((function(t){return t.id!==e})),t.getLastMessage();case 11:a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](0),console.log(a.t0),t.$dialog.notify.warning(a.t0.message);case 17:return a.prev=17,t.isLoading=!1,a.finish(17);case 20:case"end":return a.stop()}}),a,null,[[0,13,17,20]])})))()},onCalendarChange:function(e){this.getMessages(e.start.date,e.end.date)},onMessageCreated:function(e){this.messages.push(e),!this.lastMessage||this.lastMessage&&e.date>=this.lastMessage.date?this.lastMessage=e:this.getLastMessage()},onMessageUpdated:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("onMessageUpdated"),r=t.messages.findIndex((function(t){return t.id===e.id})),t.messages[r].message=e.message,t.messages[r].images=e.images,a.next=6,t.$nextTick();case 6:t.selectedMessage=t.messages[r];case 7:case"end":return a.stop()}}),a)})))()}}},Et=It,Dt=(a("7d36"),a("a4f6")),Tt=a("8dd9"),Ft=a("71a3"),St=a("c671"),Pt=a("fe57"),Vt=a("269a"),At=a.n(Vt),Rt=a("3ccf"),Lt=Object(y["a"])(Et,st,it,!1,null,null,null),$t=Lt.exports;E()(Lt,{VBtn:T["a"],VCalendar:Dt["a"],VFlex:L["a"],VIcon:U["a"],VLayout:B["a"],VProgressCircular:Ct["a"],VSelect:Oe["a"],VSheet:Tt["a"],VTab:Ft["a"],VTabItem:St["a"],VTabs:Pt["a"]}),At()(Lt,{Ripple:Rt["a"]});var Ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-widget",{ref:"baseWidget",attrs:{widget:e.widget,editMode:e.editMode,extraSettingsProps:["sitesColumnInTooltip","holesColumnInTooltip","mapInitType","startLatitude","startLongitude","startZoom","tilesBaseUrl"]},scopedSlots:e._u([{key:"extraSettingsForm",fn:function(t){var r=t.extraSettingsFormModel;return[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{multiple:"",items:e.siteColumns,label:"Sites Columns in Tooltip"},model:{value:r.sitesColumnInTooltip,callback:function(t){e.$set(r,"sitesColumnInTooltip",t)},expression:"extraSettingsFormModel.sitesColumnInTooltip"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{multiple:"",items:e.holeColumns,label:"Holes Columns in Tooltip"},model:{value:r.holesColumnInTooltip,callback:function(t){e.$set(r,"holesColumnInTooltip",t)},expression:"extraSettingsFormModel.holesColumnInTooltip"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-radio-group",{attrs:{label:"Start zoom/position"},model:{value:r.mapInitType,callback:function(t){e.$set(r,"mapInitType",t)},expression:"extraSettingsFormModel.mapInitType"}},[a("v-radio",{attrs:{label:"Auto",value:"auto"}}),a("v-radio",{attrs:{label:"Manual",value:"manual"}})],1),"manual"===r.mapInitType?a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Zoom Level",type:"number"},model:{value:r.startZoom,callback:function(t){e.$set(r,"startZoom",t)},expression:"extraSettingsFormModel.startZoom"}})],1),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Longitude",type:"number"},model:{value:r.startLongitude,callback:function(t){e.$set(r,"startLongitude",t)},expression:"extraSettingsFormModel.startLongitude"}})],1),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Latitude",type:"number"},model:{value:r.startLatitude,callback:function(t){e.$set(r,"startLatitude",t)},expression:"extraSettingsFormModel.startLatitude"}})],1)],1):e._e()],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{label:"Tiles Url",type:"text",hint:"without / at the end"},model:{value:r.tilesBaseUrl,callback:function(t){e.$set(r,"tilesBaseUrl",t)},expression:"extraSettingsFormModel.tilesBaseUrl"}})],1)],1)]}}])},[e.isLoading?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),a("vl-map",{ref:"map",staticStyle:{height:"400px"},attrs:{"load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,"data-projection":"EPSG:4326"}},[a("vl-view",{ref:"mapView",attrs:{zoom:e.zoom,center:e.center,rotation:e.rotation},on:{"update:zoom":function(t){e.zoom=t},"update:center":function(t){e.center=t},"update:rotation":function(t){e.rotation=t}}}),a("vl-interaction-select",{attrs:{features:e.selectedFeatures},on:{"update:features":function(t){e.selectedFeatures=t}},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.features,(function(t){return a("vl-overlay",{key:t.id,staticClass:"feature-popup",attrs:{id:t.id,position:e.pointOnSurface(t.geometry),"auto-pan":!0,"auto-pan-animation":{duration:300}},scopedSlots:e._u([{key:"default",fn:function(){return[a("v-card",{staticClass:"scroll-y",attrs:{"max-width":"30em","max-height":"20em"}},[a("v-card-title",{staticClass:"pb-0"},[t.id.startsWith("hole")?a("div",{staticClass:"title"},[e._v(" Hole "+e._s(t.properties.hole?t.properties.hole:"")+" ")]):e._e(),t.id.startsWith("site")?a("div",{staticClass:"title"},[e._v(" Site "+e._s(t.properties.site?t.properties.site:"")+" ")]):e._e(),a("v-spacer"),a("a",{staticClass:"card-header-icon",attrs:{title:"Close"},on:{click:function(a){e.selectedFeatures=e.selectedFeatures.filter((function(e){return e.id!==t.id}))}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[t.id.startsWith("hole")&&e.widget.extraSettings.holesColumnInTooltip?a("ul",e._l(Object.keys(t.properties).filter((function(t){return e.widget.extraSettings.holesColumnInTooltip.includes(t)})),(function(r){return a("li",{key:r},[a("strong",[e._v(e._s(r)+":")]),e._v(" "+e._s(t.properties[r])+" ")])})),0):e._e(),t.id.startsWith("site")&&e.widget.extraSettings.sitesColumnInTooltip?a("ul",e._l(Object.keys(t.properties).filter((function(t){return e.widget.extraSettings.sitesColumnInTooltip.includes(t)})),(function(r){return a("li",{key:r},[a("strong",[e._v(e._s(r)+":")]),e._v(" "+e._s(t.properties[r])+" ")])})),0):e._e()])],1)]},proxy:!0}],null,!0)})}))}}])}),a("vl-layer-tile",{attrs:{id:"osm"}},[a("vl-source-osm",{ref:"osmSource",attrs:{url:e.widget.extraSettings.tilesBaseUrl?e.widget.extraSettings.tilesBaseUrl+"/{z}/{x}/{y}.png":"https://{a-c}.tile.openstreetmap.de/{z}/{x}/{y}.png"}})],1),a("vl-layer-vector",[a("vl-source-vector",{ref:"vectorSource"},[e._l(e.validSites,(function(t){return a("vl-feature",{key:t.id,attrs:{id:"site"+t.id,properties:t||{}}},[a("vl-geom-point",{attrs:{coordinates:[t.longitude_dec,t.latitude_dec]}}),a("vl-style-box",[a("vl-style-icon",{attrs:{src:e.siteMarker,scale:.5,anchor:[.5,1]}})],1)],1)})),e._l(e.validHoles,(function(t){return a("vl-feature",{key:t.id,attrs:{id:"hole"+t.id,properties:t||{}}},[a("vl-geom-point",{attrs:{coordinates:[t.longitude_dec,t.latitude_dec]}}),a("vl-style-box",[a("vl-style-icon",{attrs:{src:e.holeMarker,scale:.4,anchor:[.5,1]}})],1)],1)}))],2)],1)],1)],1)},Nt=[],Bt=a("1cf8"),Wt=a("2986"),qt=(a("2b69"),a("906d")),Kt=a.n(qt),Gt=a("7b41"),Ht=a.n(Gt);r["default"].use(Bt["c"]),r["default"].use(Bt["i"]),r["default"].use(Bt["d"]),r["default"].use(Bt["h"]),r["default"].use(Bt["b"]),r["default"].use(Bt["a"]),r["default"].use(Bt["f"]),r["default"].use(Bt["g"]),r["default"].use(Bt["e"]),r["default"].use(Bt["j"]),r["default"].use(Bt["k"]);var zt={name:"SitesAndHolesMapWidget",components:{BaseWidget:Ie},props:{widget:{type:Object,required:!0},editMode:{type:Boolean,required:!0}},data:function(){return{zoom:2,center:[0,0],rotation:0,geolocPosition:void 0,siteMarker:Kt.a,holeMarker:Ht.a,selectedFeatures:[],isLoading:!1,sites:[],holes:[],isMapMounted:!1}},computed:{validSites:function(){return this.sites.filter((function(e){return e.latitude_dec&&e.longitude_dec}))},validHoles:function(){return this.holes.filter((function(e){return e.latitude_dec&&e.longitude_dec}))},siteColumns:function(){var e=this.$store.state.templates.summary.models.find((function(e){return"ProjectSite"===e.fullName}));return e?e.columns:[]},holeColumns:function(){var e=this.$store.state.templates.summary.models.find((function(e){return"ProjectHole"===e.fullName}));return e?e.columns:[]}},mounted:function(){this.getSitesAndHoles()},methods:{pointOnSurface:Wt["A"],getSitesAndHoles:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new dt["a"]("ProjectSite"),r=new dt["a"]("ProjectHole"),t.prev=2,e.isLoading=!0,t.next=6,a.getList({"per-page":200});case 6:return n=t.sent,t.next=9,r.getList({"per-page":200});case 9:s=t.sent,e.sites=n.items,e.holes=s.items,t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](2),console.log(t.t0),e.$dialog.notify.warning(t.t0.message);case 18:return t.prev=18,e.isLoading=!1,e.isMapMounted?e.setZoomAndPosition():e.$refs.mapView.$mountPromise.then((function(){setTimeout((function(){e.setZoomAndPosition()}),1e3)})),t.finish(18);case 22:case"end":return t.stop()}}),t,null,[[2,14,18,22]])})))()},setZoomAndPosition:function(){"manual"===this.widget.extraSettings.mapInitType?(this.zoom=parseInt(this.widget.extraSettings.startZoom),this.center=[parseFloat(this.widget.extraSettings.startLongitude),parseFloat(this.widget.extraSettings.startLatitude)]):this.$refs.mapView.$view.fit(this.$refs.vectorSource.$source.getExtent(),{size:this.$refs.map.$map.getSize(),duration:1e3})}},watch:{"widget.extraSettings":{immediate:!0,deep:!0,handler:function(e){this.getSitesAndHoles()}}}},Qt=zt,Yt=a("67b6"),Zt=a("43a6"),Jt=Object(y["a"])(Qt,Ut,Nt,!1,null,null,null),Xt=Jt.exports;E()(Jt,{VCard:F["a"],VCardText:S["b"],VCardTitle:be["a"],VFlex:L["a"],VIcon:U["a"],VLayout:B["a"],VProgressLinear:Ce["a"],VRadio:Yt["a"],VRadioGroup:Zt["a"],VSelect:Oe["a"],VSpacer:Y["a"],VTextField:Me["a"]});var ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-widget",{ref:"baseWidget",attrs:{widget:e.widget,editMode:e.editMode,extraSettingsProps:["model","xColumn","yColumn","pointsCount","queryFilter","chartType"]},scopedSlots:e._u([{key:"extraSettingsForm",fn:function(t){var r=t.extraSettingsFormModel;return[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{label:"Table",items:e.$store.state.templates.summary.models.map((function(e){return e.fullName}))},model:{value:r.model,callback:function(t){e.$set(r,"model",t)},expression:"extraSettingsFormModel.model"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{disabled:!r.model,label:"x Axis Column",items:e.$store.state.templates.summary.models.find((function(e){return e.fullName===r.model}))?e.$store.state.templates.summary.models.find((function(e){return e.fullName===r.model})).columns:[]},model:{value:r.xColumn,callback:function(t){e.$set(r,"xColumn",t)},expression:"extraSettingsFormModel.xColumn"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{disabled:!r.model,label:"y Axis Column",items:e.$store.state.templates.summary.models.find((function(e){return e.fullName===r.model}))?e.$store.state.templates.summary.models.find((function(e){return e.fullName===r.model})).columns:[]},model:{value:r.yColumn,callback:function(t){e.$set(r,"yColumn",t)},expression:"extraSettingsFormModel.yColumn"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{type:"number",label:"Points Count"},model:{value:r.pointsCount,callback:function(t){e.$set(r,"pointsCount",t)},expression:"extraSettingsFormModel.pointsCount"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{type:"string",hint:"write filter condition as a url query string 'col1Name=value1&col2Name=value2'",label:"Query Filter"},model:{value:r.queryFilter,callback:function(t){e.$set(r,"queryFilter",t)},expression:"extraSettingsFormModel.queryFilter"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{items:["line","pie","bar","radar","doughnut"],hint:"select how you want to draw the chart'",label:"Chart Type"},model:{value:r.chartType,callback:function(t){e.$set(r,"chartType",t)},expression:"extraSettingsFormModel.chartType"}})],1)],1)]}}])},[e.isLoading?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),a("canvas",{staticClass:"chart",attrs:{id:"myChart"+e.widget.id,width:"100%",height:"100%"}}),a("v-alert",{attrs:{value:!e.isChartSettingsValid,color:"warning"}},[a("ul",e._l(e.errors,(function(t,r){return a("li",{key:r},[e._v(" "+e._s(t)+" ")])})),0)])],1)},ta=[],aa=a("30ef"),ra=a.n(aa),na={name:"SimpleChartWidget",components:{BaseWidget:Ie},props:{widget:{type:Object,required:!0},editMode:{type:Boolean,required:!0}},data:function(){return{isLoading:!1,xValues:[],yValues:[],myChart:null,errors:[]}},mounted:function(){this.isChartSettingsValid&&this.updateChartValues()},computed:{chartOptions:function(){return{type:this.widget.extraSettings.chartType||"line",data:{labels:this.xValues,datasets:[{fill:!1,label:this.widget.extraSettings.yColumn,data:this.yValues,borderColor:["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(201, 203, 207)"],backgroundColor:["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(201, 203, 207)"]}]},options:{tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:"line"===this.widget.extraSettings.chartType,scaleLabel:{display:"line"===this.widget.extraSettings.chartType,labelString:this.widget.extraSettings.xColumn}}]}}}},isChartSettingsValid:function(){return!!this.modelTemplate&&0===this.errors.length},modelTemplate:function(){var e=this;return this.$store.state.templates.summary.models.find((function(t){return t.fullName===e.widget.extraSettings.model}))},filterObject:function(){var e=this.widget.extraSettings.queryFilter;if(!e)return{};for(var t=e.split("&"),a={},r=0;r<t.length;r++){var n=t[r].split("=");2===n.length&&(a[n[0]]=n[1])}return a}},methods:{validateSettings:function(){for(var e in this.errors=[],this.widget.extraSettings.model||this.errors.push("Table cannot be empty"),this.widget.extraSettings.xColumn||this.errors.push("x Axis Column cannot be empty"),this.widget.extraSettings.yColumn||this.errors.push("y Axis Column cannot be empty"),this.filterObject)this.modelTemplate.columns.includes(e)||this.errors.push("".concat(e," in Query Filter does not exist"))},getChartPoints:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t.isLoading=!0,t.isChartSettingsValid){a.next=4;break}return a.abrupt("return");case 4:return r=new dt["a"](e.model),a.next=7,r.getList({"per-page":e.pointsCount,fields:"".concat(e.xColumn,",").concat(e.yColumn),sort:"-"+e.xColumn},t.filterObject);case 7:n=a.sent,t.xValues=n.items.map((function(t){return t[e.xColumn]})),t.yValues=n.items.map((function(t){return t[e.yColumn]})),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](0),t.$dialog.notify.warning(a.t0.message);case 15:return a.prev=15,t.isLoading=!1,a.finish(15);case 18:case"end":return a.stop()}}),a,null,[[0,12,15,18]])})))()},updateChartValues:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getChartPoints(e.widget.extraSettings);case 2:e.myChart&&e.myChart.destroy(),e.myChart=new ra.a("myChart".concat(e.widget.id),e.chartOptions);case 4:case"end":return t.stop()}}),t)})))()}},watch:{"widget.extraSettings":{deep:!0,handler:function(e,t){this.validateSettings(),this.isChartSettingsValid&&this.updateChartValues()}},modelTemplate:function(e){e&&this.isChartSettingsValid&&this.getChartPoints(this.widget.extraSettings)}}},sa=na,ia=(a("4c34e"),Object(y["a"])(sa,ea,ta,!1,null,null,null)),oa=ia.exports;E()(ia,{VAlert:vt["a"],VFlex:L["a"],VLayout:B["a"],VProgressLinear:Ce["a"],VSelect:Oe["a"],VTextField:Me["a"]});var la=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-widget",{ref:"baseWidget",attrs:{widget:e.widget,editMode:e.editMode}},[a("dis-qr-code-scanner")],1)},ca=[],ua={name:"ScanQrCodeWidget",components:{BaseWidget:Ie},props:{widget:{type:Object,required:!0},editMode:{type:Boolean,required:!0}},data:function(){return{isLoading:!1}},computed:{},mounted:function(){},methods:{}},da=ua,ma=Object(y["a"])(da,la,ca,!1,null,null,null),pa=ma.exports,fa={name:"Widget",components:{BaseWidget:Ie,ProjectInformationWidget:Ve,InstructionsWidget:Ne,PostBoxWidget:nt,MessageOfTheDayWidget:$t,SitesAndHolesMapWidget:Xt,SimpleChartWidget:oa,ScanQrCodeWidget:pa},props:{widget:{type:Object,required:!0},editMode:{type:Boolean,required:!0}},computed:{widgetType:function(){switch(this.widget.type){case"ProjectInformationWidget":return"project-information-widget";case"InstructionsWidget":return"instructions-widget";case"PostBoxWidget":return"post-box-widget";case"MessageOfTheDayWidget":return"message-of-the-day-widget";case"SitesAndHolesMapWidget":return"sites-and-holes-map-widget";case"SimpleChartWidget":return"simple-chart-widget";case"ScanQrCodeWidget":return"scan-qr-code-widget";default:return"base-widget"}}}},_a=fa,va=Object(y["a"])(_a,ce,ue,!1,null,null,null),ha=va.exports,ga=a("d3fe"),ba={name:"Dashboard",components:{BaseWidget:Ie,Widget:ha,draggable:O.a},data:function(){return{isLoading:!0,editMode:!1,drag:!1,messages:[],showMessages:!0}},computed:{myWidgets:{get:function(){return this.$store.state.widgets.filter((function(e){return e.active})).sort((function(e,t){return e.order<t.order?-1:1}))},set:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isLoading=!0,a.next=4,t.$store.dispatch("reorderActiveWidgets",e);case 4:a.next=12;break;case 6:return a.prev=6,a.t0=a["catch"](0),t.$dialog.notify.warning("could not reorder widgets"),a.next=11,t.refreshWidgets();case 11:console.log(a.t0);case 12:return a.prev=12,t.isLoading=!1,a.finish(12);case 15:case"end":return a.stop()}}),a,null,[[0,6,12,15]])})))()}},myInactiveWidgets:{get:function(){return this.$store.state.widgets.filter((function(e){return!e.active}))},set:function(e){return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}},created:function(){this.loadMessages()},mounted:function(){this.$setTitle("Dashboard"),this.refreshWidgets()},methods:{loadMessages:function(){var e=this,t="lastMessDay",a=(new Date).getDay();console.log("today:",a,new Date);var r=_.a.get(window.baseUrl+t)||0;if(r!==a){var n=new ga["a"];n.getMessages().then((function(r){e.messages=r,_.a.set(window.baseUrl+t,a)}))}},refreshWidgets:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,t.next=4,e.$store.dispatch("getWidgets");case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$dialog.notify.warning("could not load widgets");case 9:return t.prev=9,e.isLoading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})))()}}},ya=ba,xa=(a("7aa2"),a("b73d")),wa=Object(y["a"])(ya,oe,le,!1,null,"608e0532",null),ka=wa.exports;E()(wa,{VAlert:vt["a"],VBtn:T["a"],VCard:F["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:be["a"],VContainer:we["a"],VDialog:V["a"],VFlex:L["a"],VLayout:B["a"],VProgressLinear:Ce["a"],VSpacer:Y["a"],VSwitch:xa["a"]});var Ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[e.userIsAdmin?a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg3:"",xl2:""}},[a("v-card",{attrs:{color:"primary"}},[a("v-card-title",[e._v(" User Management ")]),a("v-card-text",[e._v(" Add or block users, manage role assignments and more. ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{href:e.baseUrl+"user/admin/index",target:"_blank",flat:""}},[e._v(" Open "),a("v-icon",{attrs:{right:""}},[e._v("open_in_new")])],1)],1)],1)],1):e._e(),e.userIsDeveloper?a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg3:"",xl2:""}},[a("v-card",{attrs:{color:"lime darken-4",dark:""}},[a("v-card-title",[e._v(" Template Manager ")]),a("v-card-text",[e._v(" Manage Model & Forms templates and generate corresponding code ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{to:"/settings/templates-manager",flat:""}},[e._v(" Go To Template Manager "),a("v-icon",{attrs:{right:""}},[e._v("show_chart")])],1)],1)],1)],1):e._e(),e.userIsDeveloper?a("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg3:"",xl2:""}},[a("v-card",{attrs:{color:"teal darken-1",dark:""}},[a("v-card-title",[e._v(" My Account ")]),a("v-card-text",[e._v(" Change your user account settings ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{to:"/settings/account",flat:""}},[e._v(" Account Settings "),a("v-icon",{attrs:{right:""}},[e._v("person")])],1)],1)],1)],1):e._e()],1)],1)},Oa=[],Ma={name:"Settings",data:function(){return{baseUrl:window.baseUrl}},mounted:function(){this.$setTitle("Settings")}},ja=Ma,Ia=Object(y["a"])(ja,Ca,Oa,!1,null,"6ffc790a",null),Ea=Ia.exports;E()(Ia,{VBtn:T["a"],VCard:F["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:be["a"],VContainer:we["a"],VFlex:L["a"],VIcon:U["a"],VLayout:B["a"],VSpacer:Y["a"]});var Da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{staticClass:"c-dis-login",attrs:{"justify-center":"","fill-height":"","align-center":"",column:""}},[a("div",{staticClass:"c-dis-login__title"},[a("h1",[e._v(e._s(e.appName))]),a("div",{staticClass:"c-dis-login__underline"},[a("div"),a("div"),a("div"),a("div")])]),a("v-flex",{attrs:{shrink:""}},[a("v-card",{staticClass:"pa-4"},[a("v-form",{ref:"loginForm",attrs:{"lazy-validation":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}}},[a("v-card-text",[a("h1",[e._v("Login to "+e._s(e.appShortName))]),a("v-text-field",{attrs:{autocorrect:"off",autocapitalize:"none",rules:[function(e){return!!e||"This is required"}],label:"Username / Email"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{rules:[function(e){return!!e||"This is required"}],label:"Password",type:e.passwordFieldType,autocorrect:"off",autocapitalize:"none","error-messages":e.errorMessages,"append-icon":"text"===e.passwordFieldType?"visibility_off":"visibility"},on:{"click:append":e.switchVisibility},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-card-actions",[a("v-btn",{attrs:{loading:e.loading,disabled:e.loading,color:"primary",outline:"",block:""},on:{click:e.submit}},[e._v("Log In")])],1),a("v-card-text"),a("v-card-actions",[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){t.on,t.attrs;return[e.canSendEmails?a("v-btn",{attrs:{color:"primary",flat:"",block:""},on:{click:function(){return e.dialog=!0}}},[e._v(" Forgot Password ")]):e._e()]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{staticClass:"pa-4"},[a("v-form",{ref:"resendForm",attrs:{"lazy-validation":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send(t)}}},[e.canSend&&!e.sent?a("v-card-text",[a("h1",[e._v("Reset password")]),a("p",[e._v("Enter your email to send a reset link")]),a("v-text-field",{attrs:{autocorrect:"off",autocapitalize:"none",rules:[function(e){return!!e||"This is required"},function(t){return e.emailReg.test(t)||"Please enter a valid email"}],label:"Email"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1):a("v-card-text",[a("v-icon",{staticClass:"full-width",attrs:{"x-large":"",color:"green"}},[e._v("check")]),a("v-spacer"),a("p",[e._v("An email has been sent with instructions for resetting your password. You will be able to send a new request after 6 hours since your last request.")])],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",flat:"",block:""},on:{click:function(){return e.dialog=!1}}},[e._v("Close")]),a("v-btn",{attrs:{loading:e.sending,disabled:!e.canSend&&e.sent,color:"primary",outline:"",block:""},on:{click:e.send}},[e._v("Send")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},Ta=[],Fa=function(e){Object(Ge["a"])(a,e);var t=Object(He["a"])(a);function a(){var e;return Object(qe["a"])(this,a),e=t.call(this),e._controller=e.baseUrl+"api/v1/account",e}return Object(Ke["a"])(a,[{key:"updateProfile",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.a.put("".concat(this._controller),t,{headers:this.getBearerHeader()}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"changePassword",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.a.post("".concat(this._controller,"/change-password"),t,{headers:this.getBearerHeader()}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"requestRecoveryEmail",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.a.post("".concat(this._controller,"/send-recovery-email"),{email:t}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkRecoveryLink",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.a.post("".concat(this._controller,"/check-recovery-link"),{userId:t,code:a}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"resetPassord",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,a,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.a.post("".concat(this._controller,"/reset-password"),{userId:t,code:a,password:r}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,a,r){return e.apply(this,arguments)}return t}()}]),a}(m["a"]),Sa=Fa,Pa={name:"Login",data:function(){return{username:"",password:"",passwordFieldType:"password",errorMessages:[],loading:!1,sending:!1,dialog:!1,sent:!1,emailReg:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,canSend:!0}},mounted:function(){this.$setTitle("Login"),this.backendService=new m["a"],this.accountService=new Sa;var e=_.a.get("recovery-email-sent_at");null!==e&&e+216e5>Date.now()&&(this.canSend=!1,this.sent=!0)},computed:Object(d["a"])({},Object(p["b"])({appShortName:"config/appShortName",appName:"config/appName",canSendEmails:"config/canSendEmails"})),methods:{clear:function(){this.$refs.form.reset(),this.errorMessages=[],this.dialog=!1,this.sent=!1},switchVisibility:function(){this.passwordFieldType="password"===this.passwordFieldType?"text":"password"},submit:function(){var e=this;this.$refs.loginForm.validate()&&(this.loading=!0,this.backendService.login({username:this.username,password:this.password}).then(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.commit("SET_LOGGED_IN_USER",a),e.$store.dispatch("initApp"),e.$route.query.redirect&&"/login"!==e.$route.query.redirect?e.$router.push(e.$route.query.redirect):e.$router.push("/"),e.loading=!1;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,t.response&&422===t.response.status&&(e.errorMessages=t.response.data.map((function(e){return e.message})))})))},send:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.resendForm.validate()){t.next=15;break}return e.sending=!0,t.prev=2,t.next=5,e.accountService.requestRecoveryEmail(e.username);case 5:_.a.set("recovery-email-sent_at",Date.now()),e.sent=!0,e.sending=!1,e.canSend=!1,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),e.sending=!1,t.t0.response&&422===t.t0.response.status&&("still_valid"===t.t0.response.data.kind||"not_found"===t.t0.response.data.kind||"is_ldap"===t.t0.response.data.kind?e.$dialog.message.warning(t.t0.response.data.message):e.$dialog.message.warning("Invalid email"));case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()}}},Va=Pa,Aa=(a("d742"),Object(y["a"])(Va,Da,Ta,!1,null,"9aa55898",null)),Ra=Aa.exports;E()(Aa,{VBtn:T["a"],VCard:F["a"],VCardActions:S["a"],VCardText:S["b"],VDialog:V["a"],VFlex:L["a"],VForm:ke["a"],VIcon:U["a"],VLayout:B["a"],VSpacer:Y["a"],VTextField:Me["a"]});var La=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"pt-0",attrs:{fluid:"","grid-list-md":"","fill-height":""}},[e.isChecking?a("v-progress-linear",{staticClass:"fixed-top",attrs:{indeterminate:""}}):e._e(),e.isChecking?e._e():a("v-layout",{attrs:{"justify-center":"","align-center":""}},[e.canReset?a("v-flex",{attrs:{shrink:""}},[!e.passwordChangedText&&e.canReset?a("v-card",{staticClass:"pa-4"},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}}},[a("v-card-text",[a("h1",[e._v("Reset password")]),a("v-text-field",{attrs:{rules:[function(e){return!!e||"This is required"}],label:"New password",type:e.passwordFieldType,autocorrect:"off",autocapitalize:"none","error-messages":e.errorMessages,"append-icon":"text"===e.passwordFieldType?"visibility_off":"visibility"},on:{"click:append":e.switchVisibility},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-card-actions",[a("v-btn",{attrs:{loading:e.loading,disabled:e.loading,color:"primary",outline:"",block:""},on:{click:e.submit}},[e._v("submit")])],1)],1)],1):a("v-card",{staticClass:"pa-4"},[a("v-card-text",[a("v-icon",{staticClass:"full-width",attrs:{"x-large":"",color:"green"}},[e._v("check")]),a("v-spacer"),a("p",[e._v(e._s(e.passwordChangedText))])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{to:"/login",flat:""}},[e._v(" Go to Login "),a("v-icon",{attrs:{right:""}},[e._v("open_in_browser")])],1)],1)],1)],1):a("div",[a("v-flex",{attrs:{shrink:""}},[a("span",{staticClass:"not-valid"},[e._v(" Not Valid ")])]),a("v-flex",{attrs:{shrink:""}},[a("p",{staticClass:"title"},[e._v(" "+e._s(e.notValidText)+" ")]),a("router-link",{attrs:{to:"/"}},[e._v("Back")])],1)],1)],1)],1)},$a=[],Ua={name:"ResetPassword",data:function(){return{password:"",passwordFieldType:"password",errorMessages:[],loading:!1,isChecking:!0,notValidText:null,passwordChangedText:null,canReset:!1}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$setTitle("Reset password"),e.accountService=new Sa,t.prev=2,t.next=5,e.accountService.checkRecoveryLink(e.$route.params.userId,e.$route.params.code);case 5:e.isChecking=!1,e.canReset=!0,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),e.isChecking=!1,t.t0.response&&422===t.t0.response.status&&(e.notValidText=t.t0.response.data.message);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},methods:{clear:function(){this.$refs.form.reset(),this.errorMessages=[]},switchVisibility:function(){this.passwordFieldType="password"===this.passwordFieldType?"text":"password"},submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=14;break}return e.loading=!0,t.prev=2,t.next=5,e.accountService.resetPassord(e.$route.params.userId,e.$route.params.code,e.password);case 5:e.passwordChangedText="Congratulations, Your password has been changed.",_.a.remove("recovery-email-sent_at"),e.loading=!1,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),e.loading=!1,t.t0.response&&422===t.t0.response.status&&(e.errorMessages=t.t0.response.data.map((function(e){return e.message})));case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()}}},Na=Ua,Ba=(a("1d94"),Object(y["a"])(Na,La,$a,!1,null,"291d2953",null)),Wa=Ba.exports;E()(Ba,{VBtn:T["a"],VCard:F["a"],VCardActions:S["a"],VCardText:S["b"],VContainer:we["a"],VFlex:L["a"],VForm:ke["a"],VIcon:U["a"],VLayout:B["a"],VProgressLinear:Ce["a"],VSpacer:Y["a"],VTextField:Me["a"]});var qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:"",xl3:""}},[a("v-card",{attrs:{dark:""}},[a("v-card-title",[a("h3",{staticClass:"mb-0"},[e._v("Template Manager - Main Page")])])],1)],1),a("v-flex",{attrs:{sm12:"",md9:"",xl9:""}},[a("v-combobox",{attrs:{solo:"","hide-details":"",placeholder:"Filter a Table Set...",clearable:"",items:e.$store.state.templates.summary.modules.filter((function(e){return"Archive"!==e})),value:e.$store.state.templates.modelsFilterString},on:{input:e.setFilterString},nativeOn:{input:function(t){return e.setFilterString(t)}}})],1),e.loading?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),a("v-flex",{attrs:{sm12:"",md3:"",xl3:""}},[a("v-card",{staticClass:"mb-2",attrs:{color:"blue-grey",dark:""}},[a("v-card-text",[a("h3",{staticClass:"mb-3"},[e._v("New data model template")]),a("p",[e._v(" Select an existing table set or enter the name of a new one to assign the new data model template ")]),a("v-combobox",{attrs:{label:"Table Set",items:e.$store.state.templates.summary.modules,clearable:""},model:{value:e.selectedModule,callback:function(t){e.selectedModule=t},expression:"selectedModule"}}),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-spacer"),a("v-flex",{attrs:{shrink:""}},[a("v-btn",{attrs:{disabled:!e.selectedModule,small:"",color:"blue"},on:{click:e.createNewTableTemplate}},[e._v("Create")])],1)],1)],1)],1),a("v-card",{attrs:{color:"blue-grey",elevation:"12",dark:""}},[a("v-card-text",[a("h3",{staticClass:"mb-3"},[e._v("Upload ")]),a("div",[a("span",[e._v(" Upload mDIS data model template or form template files."),a("br"),a("br"),e._v(" Download (+ optionally edit) such files by clicking on ")]),a("span",{staticClass:"intra-text-icon"},[a("v-icon",[e._v("cloud_download")])],1),e._v(". ")]),a("h4",{staticClass:"mt-2 mb-2"},[e._v("Upload an exported zip file")]),a("dis-file-upload",{attrs:{allowedTypes:["application/zip","application/x-zip-compressed"],multiple:!1},on:{uploaded:e.onZipUploaded}}),a("h4",{staticClass:"mt-2 mb-2"},[e._v("Upload a model template (*.json)")]),a("dis-file-upload",{attrs:{allowedTypes:["application/json"],multiple:!1},on:{uploaded:function(t){return e.onTemplateUploaded("model",t)}}}),a("h4",{staticClass:"mt-2 mb-2"},[e._v("Upload a form template (*.json)")]),a("dis-file-upload",{attrs:{allowedTypes:["application/json"],multiple:!1},on:{uploaded:function(t){return e.onTemplateUploaded("form",t)}}})],1)],1)],1),a("v-flex",{attrs:{sm12:"",md9:"",xl9:""}},[a("v-layout",{attrs:{wrap:""}},e._l(e.filteredModels,(function(e){return a("v-flex",{key:e.table,attrs:{sm12:"",lg6:"",xl4:"","pa-1":""}},[a("model-template-summary",{attrs:{model:e}})],1)})),1)],1)],1)],1)},Ka=[],Ga=a("53ca"),Ha=function(e){Object(Ge["a"])(a,e);var t=Object(He["a"])(a);function a(){var e;return Object(qe["a"])(this,a),e=t.call(this),e._controller=e.baseUrl+"cg/api",e}return Object(Ke["a"])(a,[{key:"getSummary",value:function(){return Qe.a.get("".concat(this._controller,"/summary"),{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"getBehaviors",value:function(){return Qe.a.get("".concat(this._controller,"/behaviors"),{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"getModelTemplate",value:function(e){return Qe.a.get("".concat(this._controller,"/get-model-template?name=").concat(e),{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"getFormTemplate",value:function(e){return Qe.a.get("".concat(this._controller,"/get-form-template?name=").concat(e),{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"getFormTemplateSeed",value:function(e){return Qe.a.get("".concat(this._controller,"/get-form-template-seed?modelName=").concat(e),{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"createForm",value:function(e,t,a){return Qe.a.post("".concat(this._controller,"/create-form"),{template:Object.assign(e,{availableSubForms:t,availableSupForms:a})},{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"updateForm",value:function(e,t,a,r){return Qe.a.put("".concat(this._controller,"/update-form?name=").concat(e),{template:Object.assign(t,{availableSubForms:a,availableSupForms:r})},{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"deleteForm",value:function(e){return Qe.a.delete("".concat(this._controller,"/delete-form?name=").concat(e),{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"createModel",value:function(e){return Qe.a.post("".concat(this._controller,"/create-model"),{template:e},{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"updateModel",value:function(e,t){return Qe.a.post("".concat(this._controller,"/update-model?name=").concat(e),{template:t},{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"deleteModel",value:function(e){return Qe.a.delete("".concat(this._controller,"/delete-model?name=").concat(e),{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"duplicate",value:function(e,t,a){return Qe.a.post("".concat(this._controller,"/duplicate?type=").concat(e,"&oldName=").concat(t,"&newName=").concat(a),{},{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"verifyUploadedTemplate",value:function(e,t){return Qe.a.post("".concat(this._controller,"/verify-uploaded-template?type=").concat(e,"&filename=").concat(t),{},{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"verifyUploadedZip",value:function(e,t){return Qe.a.post("".concat(this._controller,"/verify-uploaded-zip?filename=").concat(t),{},{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"createModelTable",value:function(e){return Qe.a.post("".concat(this._controller,"/create-model-table"),{model:e},{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"cgView",value:function(e,t,a,r){return Qe.a.post("".concat(this._controller,"/view?id=").concat(e),{Generator:t,generate:a,answers:r},{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"cgDiff",value:function(e,t,a){return Qe.a.post("".concat(this._controller,"/diff?id=").concat(e,"&file=").concat(a),{Generator:t},{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"cgPreview",value:function(e,t,a){return Qe.a.post("".concat(this._controller,"/preview?id=").concat(e,"&file=").concat(a),{Generator:t},{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"download",value:function(e,t){return Qe()({url:"".concat(this._controller,"/download?type=").concat(e,"&name=").concat(t),method:"GET",headers:this.getBearerHeader(),responseType:"blob"}).then((function(e){return e}))}},{key:"renameForm",value:function(e,t){return console.log(this.getBearerHeader),Qe.a.post("".concat(this._controller,"/rename-form?name=").concat(e,"&newName=").concat(t),{},{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"openForm",value:function(e){window.location="".concat(this.baseUrl,"#/forms/").concat(e,"-form")}}]),a}(m["a"]),za=Ha,Qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"c-model-template-summary",attrs:{height:"100%"}},[a("v-card-title",[a("span",[a("div",{staticClass:"title"},[e._v(e._s(e.model.name)+" "),a("small",[e._v("("+e._s(e.model.fullName)+")")])]),a("span",{staticClass:"subheading"},[e._v(e._s(e._f("formatTimestamp")(1e3*e.model.modifiedAt)))])]),a("v-spacer"),a("v-btn",{attrs:{icon:"",loading:e.loading,color:"black",title:"download",dark:""},on:{click:function(){return e.onModelDownloadClick(e.model)}}},[a("v-icon",[e._v("cloud_download")])],1),a("v-btn",{attrs:{icon:"",loading:e.loading,color:"teal darken-4",title:"duplicate",dark:""},on:{click:function(){return e.onModelDuplicateClick(e.model)}}},[a("v-icon",[e._v("file_copy")])],1),a("v-btn",{attrs:{icon:"",loading:e.loading,color:"orange",to:"/settings/templates-manager/data-models/update/"+e.model.fullName,title:"edit",dark:""}},[a("v-icon",[e._v("edit")])],1),a("v-btn",{attrs:{icon:"",loading:e.loading,color:"red",title:"delete",dark:"",disabled:"ArchiveFile"===e.model.fullName},on:{click:e.deleteModelTemplate}},[a("v-icon",[e._v("delete")])],1)],1),a("v-card-text",[e.model.isTableCreated?a("p",{staticStyle:{"vertical-align":"center"}},[a("v-icon",{attrs:{color:"green",small:""}},[e._v("check_circle")]),e._v(" Table was created in DB "),e.model.tableGenerationTimestamp?a("span",[e._v(" at "+e._s(e._f("formatTimestamp")(1e3*e.model.tableGenerationTimestamp))+".")]):a("span",[e._v(", (no timestamp available).")])],1):a("p",[a("v-icon",{attrs:{color:"red",small:""}},[e._v("error")]),e._v(" Table not yet created in the database. ")],1),a("p",[0===e.model.generatedFiles.filter((function(e){return!1===e.modified})).length?a("span",[a("v-icon",{attrs:{color:"green",small:""}},[e._v("check_circle")]),e._v(" All required code-files were generated.")],1):a("span",[a("v-icon",{attrs:{color:"red",small:""}},[e._v("error")]),e._v(" required code-files were not generated: ")],1),a("generated-files",{attrs:{files:e.model.generatedFiles,"template-generated-at":e.model.generatedAt||0}})],1)]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{to:"/settings/templates-manager/forms/"+e.model.fullName,disabled:e.model.generatedFiles.filter((function(e){return e.modified})).length!==e.model.generatedFiles.length,small:"",color:"teal"}},[e._v(" manage forms ")])],1)],1)},Ya=[],Za=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){return[a("v-btn",e._g({attrs:{flat:"",small:"",color:"blue"}},t.on),[e._v(" details ")])]}}]),model:{value:e.popover,callback:function(t){e.popover=t},expression:"popover"}},[a("v-card",[a("v-card-text",[a("div",{staticClass:"c-generated-files"},[a("div",[e._v(" "+e._s(e.sharedStartPath)+" "),a("ul",{staticClass:"c-generated-files__list"},e._l(e.files,(function(t,r){return a("li",{key:r},[t.modified?a("v-tooltip",{attrs:{top:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[a("span",{staticClass:"c-generated-files__file"},[e._v(" "+e._s(t.path.substring(e.sharedStartPath.length))+" "),e.templateGeneratedAt>t.modified?a("span",{staticClass:"c-generated-files__file--old"}):e._e()])]),a("span",[e._v(e._s(e._f("formatTimestamp")(1e3*t.modified)))])]):a("span",{staticClass:"c-generated-files__file"},[e._v(e._s(t.path.substring(e.sharedStartPath.length)))])],1)})),0)])])])],1)],1)},Ja=[],Xa=(a("a9e3"),a("e9c4"),{name:"GeneratedFiles",props:{templateGeneratedAt:{type:Number,required:!0},files:{type:Array,required:!0}},data:function(){return{popover:!1}},computed:{sharedStartPath:function(){var e=JSON.parse(JSON.stringify(this.files.map((function(e){return e.path}))));e=e.sort();var t=e[0],a=e[e.length-1],r=t.length,n=0;while(n<r&&t.charAt(n)===a.charAt(n))n++;var s=t.substring(0,n);return n=s.lastIndexOf("/"),n>1&&(s=s.substring(0,n)),s}}}),er=Xa,tr=(a("7c4e"),Object(y["a"])(er,Za,Ja,!1,null,null,null)),ar=tr.exports;E()(tr,{VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VMenu:z["a"],VTooltip:te["a"]});var rr=a("8103"),nr=a.n(rr),sr=a("bba4"),ir=a.n(sr),or={name:"ModelTemplateSummary",components:{GeneratedFiles:ar},props:{model:{required:!0,type:Object}},data:function(){return{loading:!1}},methods:{deleteModelTemplate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$dialog.confirm({title:"Are you sure?",text:"This will deletes the model template, table and it all the generated files that are based on this model.",persistent:!0});case 4:if(a=t.sent,!a){t.next=9;break}return t.next=8,e.$store.dispatch("templates/deleteModelTemplate",e.model.fullName);case 8:e.$dialog.message.success("deleted successfully",{position:"bottom"});case 9:t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](1),e.$dialog.notify.warning("unable to delete: ".concat(t.t0.message)),console.log(t.t0);case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,11,15,18]])})))()},onModelDuplicateClick:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$dialog.prompt({title:"Duplicate Name",text:"enter the desired model name (the model name will be prefixed with module name ".concat(e.module,")")});case 2:if(r=a.sent,r=nr()(ir()(r)),!(t.$store.state.templates.summary.models.findIndex((function(t){return t.fullName===e.module+r}))>-1)){a.next=7;break}return t.$dialog.error({title:"Model name is invalid",text:"model name ".concat(e.module+r," already exists")}),a.abrupt("return",!1);case 7:return n=new za,a.prev=8,t.loading=!0,a.next=12,n.duplicate("model",e.fullName,e.module+r);case 12:return t.$dialog.message.success("template was duplicated successfully"),a.next=15,t.$store.dispatch("templates/refreshSummary");case 15:a.next=23;break;case 17:if(a.prev=17,a.t0=a["catch"](8),s="",a.t0.response&&422===a.t0.response.status)for(i in s="Validation Error",a.t0.response.data)s+="*".concat(a.t0.response.data[i].field,"*: ").concat(a.t0.response.data[i].message," ");else s=a.t0.response&&a.t0.response.statusText?a.t0.response.statusText:"error: cannot duplicate template";t.$dialog.notify.warning(s),console.log(a.t0.response?a.t0.response:a.t0);case 23:return a.prev=23,t.loading=!1,a.finish(23);case 26:case"end":return a.stop()}}),a,null,[[8,17,23,26]])})))()},onModelDownloadClick:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=new za,a.prev=1,t.loading=!0,a.next=5,r.download("model",e.fullName);case 5:n=a.sent,s=window.URL.createObjectURL(new Blob([n.data])),i=document.createElement("a"),i.href=s,i.setAttribute("download",e.fullName+".zip"),document.body.appendChild(i),i.click(),a.next=17;break;case 14:a.prev=14,a.t0=a["catch"](1),console.log("Model Template Download Error",a.t0);case 17:return a.prev=17,t.loading=!1,a.finish(17);case 20:case"end":return a.stop()}}),a,null,[[1,14,17,20]])})))()}}},lr=or,cr=Object(y["a"])(lr,Qa,Ya,!1,null,"7aaf5a6c",null),ur=cr.exports;E()(cr,{VBtn:T["a"],VCard:F["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:be["a"],VIcon:U["a"],VSpacer:Y["a"]});var dr={name:"TemplateManager",components:{ModelTemplateSummary:ur},data:function(){return{loading:!1,selectedModule:null}},computed:{filteredModels:function(){var e=this;return 0===this.$store.state.templates.modelsFilterString.length?this.$store.state.templates.summary.models:this.$store.state.templates.summary.models.filter((function(t){return t.fullName.toLowerCase().includes(e.$store.state.templates.modelsFilterString.toLowerCase())}))}},created:function(){this.disTemplateService=new za},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$setTitle("Templates Manager"),t.prev=1,e.loading=!0,t.next=5,e.$store.dispatch("templates/refreshSummary");case 5:t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](1),e.$dialog.notify.warning(t.t0.message,{timeout:3e4}),console.log(t.t0);case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,7,11,14]])})))()},methods:{setFilterString:function(e){e?"string"!==typeof e&&e?"object"===Object(Ga["a"])(e)&&this.$store.commit("templates/SET_MODELS_FILTER_STRING",e.srcElement.value):this.$store.commit("templates/SET_MODELS_FILTER_STRING",e):this.$store.commit("templates/SET_MODELS_FILTER_STRING","")},createNewTableTemplate:function(){var e=this;setTimeout(Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="this will create a new template in the table set <code>".concat(e.selectedModule,"</code>"),e.$store.state.templates.summary.modules.includes(e.selectedModule)||(a="this will create a new template and a new table set with the name <code>".concat(nr()(ir()(e.selectedModule)),"</code>")),t.next=4,e.$dialog.confirm({title:"Are you sure?",text:a,persistent:!0});case 4:r=t.sent,r&&e.$router.push("/settings/templates-manager/data-models/new/".concat(e.selectedModule));case 6:case"end":return t.stop()}}),t)}))),200)},onZipUploaded:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.loading=!0,a.next=4,t.disTemplateService.verifyUploadedZip("model",e.name);case 4:return a.next=6,a.sent;case 6:return t.$dialog.message.success("template was uploaded successfully"),a.next=9,t.$store.dispatch("templates/refreshSummary");case 9:a.next=18;break;case 11:if(a.prev=11,a.t0=a["catch"](0),console.log(a.t0,a.t0.response),r="",a.t0.response&&422===a.t0.response.status)for(n in r="Validation Error: ",a.t0.response.data)r+="*".concat(a.t0.response.data[n].field,"*: ").concat(a.t0.response.data[n].message," ");else r=a.t0.response&&a.t0.response.statusText?a.t0.response.statusText:a.t0.message?a.t0.message:"error: cannot upload template";t.$dialog.notify.warning(r),console.log(a.t0.response?a.t0.response:a.t0);case 18:return a.prev=18,t.loading=!1,a.finish(18);case 21:case"end":return a.stop()}}),a,null,[[0,11,18,21]])})))()},onTemplateUploaded:function(e,t){var a=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a.loading=!0,r.next=4,a.disTemplateService.verifyUploadedTemplate(e,t.name);case 4:return r.next=6,r.sent;case 6:return a.$dialog.message.success("template was uploaded successfully"),r.next=9,a.$store.dispatch("templates/refreshSummary");case 9:r.next=18;break;case 11:if(r.prev=11,r.t0=r["catch"](0),console.log(r.t0,r.t0.response),n="",r.t0.response&&422===r.t0.response.status)for(s in n="Validation Error: ",r.t0.response.data)n+="*".concat(r.t0.response.data[s].field,"*: ").concat(r.t0.response.data[s].message," ");else n=r.t0.response&&r.t0.response.statusText?r.t0.response.statusText:r.t0.message?r.t0.message:"error: cannot upload template";a.$dialog.notify.warning(n),console.log(r.t0.response?r.t0.response:r.t0);case 18:return r.prev=18,a.loading=!1,r.finish(18);case 21:case"end":return r.stop()}}),r,null,[[0,11,18,21]])})))()}}},mr=dr,pr=(a("af16"),Object(y["a"])(mr,qa,Ka,!1,null,"3b5f95ca",null)),fr=pr.exports;E()(pr,{VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VCardTitle:be["a"],VCombobox:xe["a"],VContainer:we["a"],VFlex:L["a"],VIcon:U["a"],VLayout:B["a"],VProgressLinear:Ce["a"],VSpacer:Y["a"]});var _r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","grid-list-md":""}},[e.loading?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),a("data-model-template",{attrs:{initialTemplate:e.template,scenario:"create"}})],1)},vr=[],hr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:"",lg3:""}},[a("v-card",[a("v-form",[a("v-card-text",[a("v-text-field",{attrs:{disabled:"",label:"Tableset"},model:{value:e.module,callback:function(t){e.module=t},expression:"module"}}),a("v-text-field",{attrs:{label:"Data model name",disabled:"update"===e.scenario},on:{input:e.fixModelNameCase},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{label:"Database table",readonly:"",disabled:""},model:{value:e.table,callback:function(t){e.table=t},expression:"table"}}),a("v-select",{ref:"parentSelectInput",attrs:{disabled:!e.name,label:"Parent data model",items:e.$store.state.templates.summary.models,"item-text":"fullName",clearable:""},model:{value:e.parentModel,callback:function(t){e.parentModel=t},expression:"parentModel"}})],1)],1),a("v-btn",{attrs:{to:"/settings/templates-manager/"+(e.model?"forms/"+e.model.fullName:""),disabled:!e.model||e.model.generatedFiles.filter((function(e){return e.modified})).length!==e.model.generatedFiles.length,small:"",color:"teal"}},[e._v(" manage forms ")])],1)],1),a("v-flex",{attrs:{sm12:"",md8:"",lg9:""}},[a("v-card",{staticClass:"mb-2"},[a("v-card-title",[a("h2",[e._v("Columns")])]),a("v-card-text",[a("v-btn",{staticClass:"mb-3",on:{click:e.addColumn}},[e._v("Add Column")]),a("draggable",e._b({staticClass:"c-data-model-template__columns",attrs:{"force-fallback":!0,tag:"ul"},model:{value:e.columns,callback:function(t){e.columns=t},expression:"columns"}},"draggable",{group:"columns",handle:".drag-handle",ghostClass:"u-drag-ghost"},!1),e._l(e.columns,(function(t,r){return a("li",{key:t.name},[a("data-model-column-template",{attrs:{allColumnsName:e.columns.map((function(e){return e.name})).filter((function(e){return e!==t.name})),isFKColumn:!!e.parentModel&&t.name===e.parentModelColumnName,parentModelColumnName:e.parentModelColumnName},on:{remove:function(){return e.removeColumn(r)}},model:{value:e.columns[r],callback:function(t){e.$set(e.columns,r,t)},expression:"columns[index]"}})],1)})),0)],1)],1),a("v-card",{staticClass:"mb-2"},[a("v-card-title",[a("h2",[e._v("Indices")])]),a("v-card-text",[a("v-btn",{staticClass:"mb-3",on:{click:e.addIndex}},[e._v("Add Index")]),a("ul",{staticClass:"c-data-model-template__indices"},e._l(e.indices,(function(t,r){return a("li",{key:t.name},[a("data-model-index-template",{attrs:{columns:e.columns.map((function(e){return e.name})),parentModelColumnName:e.parentModelColumnName},on:{remove:function(){return e.removeIndex(r)}},model:{value:e.indices[r],callback:function(t){e.$set(e.indices,r,t)},expression:"indices[index]"}})],1)})),0)],1)],1),a("v-card",{staticClass:"mb-2"},[a("v-card-title",[a("h2",[e._v("Relations")])]),a("v-card-text",[a("v-btn",{staticClass:"mb-3",on:{click:function(t){t.stopPropagation(),e.relationDialog=!0}}},[e._v(" Add Relation ")]),a("v-dialog",{attrs:{"max-width":"600"},model:{value:e.relationDialog,callback:function(t){e.relationDialog=t},expression:"relationDialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[a("h1",{staticStyle:{"font-weight":"normal"}},[e._v("Relations")])]),a("v-card-text",[a("v-select",{attrs:{label:"Relation type",items:e.relationTypes,chips:"",clearable:""},model:{value:e.relationType,callback:function(t){e.relationType=t},expression:"relationType"}}),a("v-select",{attrs:{label:"Related model",items:e.relatedModels,"item-text":"fullName",chips:"",clearable:""},model:{value:e.relatedModel,callback:function(t){e.relatedModel=t},expression:"relatedModel"}}),"1n"===e.relationType||"nm"===e.relationType?a("v-select",{attrs:{label:"Display column of the related model",items:e.oneToManyAvailableColumns,chips:"",clearable:""},model:{value:e.displayColumn,callback:function(t){e.displayColumn=t},expression:"displayColumn"}}):e._e(),a("v-text-field",{attrs:{label:"nm"===e.relationType?"Pseudo column to access the related records":"Column containing the id of the related record"},model:{value:e.columnName,callback:function(t){e.columnName=t},expression:"columnName"}}),"nm"===e.relationType?a("v-text-field",{attrs:{label:"Pseudo column in related model to access the records in this model"},model:{value:e.oppositeColumnName,callback:function(t){e.oppositeColumnName=t},expression:"oppositeColumnName"}}):e._e()],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(t){e.relationDialog=!1}}},[e._v(" Cancer ")]),a("v-btn",{attrs:{text:""},on:{click:e.addRelation}},[e._v(" Ok ")])],1)],1)],1),a("ul",{staticClass:"c-data-model-template__indices"},e._l(e.relations,(function(t,r){return a("li",{key:t.name},[a("data-model-foreign-key-template",{attrs:{allColumnsName:e.columns.map((function(e){return e.name})).filter((function(e){return e!==t.localColumns[0]})),isParentRelation:e.parentModelObject&&e.relations[r].foreignTable===e.parentModelObject.table&&1===e.relations[r].localColumns.length&&e.relations[r].localColumns[0]===e.parentModelColumnName,columns:e.columns.map((function(e){return e.name})),relationIndex:r},on:{remove:function(){return e.removeRelation(r)},displayColumns:e.updateDisplayColumns,columnName:e.updateColumnName,oppositeColumnName:e.updateOppositeColumnName},model:{value:e.relations[r],callback:function(t){e.$set(e.relations,r,t)},expression:"relations[index]"}})],1)})),0)],1)],1),a("v-card",{staticClass:"mb-2"},[a("v-card-title",[a("h2",[e._v("Behaviors")])]),a("v-card-text",[a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({ref:"behaviorAddButton",staticClass:"mb-3"},r),[e._v("ADD")])]}}]),model:{value:e.behaviorsMenu,callback:function(t){e.behaviorsMenu=t},expression:"behaviorsMenu"}},[a("v-list",{ref:"behaviorsList"},[a("v-list-tile",[a("v-text-field",{ref:"behaviorFilterInput",attrs:{placeholder:"Filter","hide-details":""},model:{value:e.behaviorsFilter,callback:function(t){e.behaviorsFilter=t},expression:"behaviorsFilter"}})],1),e._l(e.behaviorsList,(function(t,r){return a("v-list-tile",{key:r,on:{click:function(){return e.addBehavior(t)}}},[a("v-list-tile-title",[e._v(e._s(t.name))])],1)}))],2)],1),a("ul",{staticClass:"c-data-model-template__behaviors"},[a("draggable",e._b({staticClass:"c-data-model-template__columns",attrs:{"force-fallback":!0,tag:"ul"},model:{value:e.behaviors,callback:function(t){e.behaviors=t},expression:"behaviors"}},"draggable",{group:"behaviors",handle:".drag-handle",ghostClass:"u-drag-ghost"},!1),e._l(e.behaviors,(function(t,r){return a("li",{key:r},[a("data-model-behavior-template",{attrs:{columns:e.columns.map((function(e){return e.name}))},on:{remove:function(){return e.removeBehavior(r)}},model:{value:e.behaviors[r],callback:function(t){e.$set(e.behaviors,r,t)},expression:"behaviors[index]"}})],1)})),0)],1)],1)],1),a("v-card",{staticClass:"mb-2"},[a("v-card-text",[a("v-btn",{staticClass:"mb-3",attrs:{color:"success",loading:e.loading,disabled:"update"===e.scenario},on:{click:function(){return e.saveModelTemplate(!1)}}},[e._v("Save")]),a("v-btn",{staticClass:"mb-3",attrs:{color:"blue",loading:e.loading,disabled:"create"===e.scenario},on:{click:function(){return e.saveModelTemplate(!0)}}},[e._v("Save & Generate")]),a("v-alert",{attrs:{dismissible:""},model:{value:e.showErrorSummary,callback:function(t){e.showErrorSummary=t},expression:"showErrorSummary"}},[a("ul",e._l(e.serverValidationErrors,(function(t){return a("li",{key:t.field},[a("strong",[e._v(e._s(t.field))]),e._v(": "+e._s(t.message)+" ")])})),0)]),a("v-alert",{attrs:{dismissible:"",color:"info"},model:{value:e.showGenerationLog,callback:function(t){e.showGenerationLog=t},expression:"showGenerationLog"}},[a("ul",e._l(e.generationLog,(function(t,r){return a("li",{key:r},[e._v(" "+e._s(t)+" ")])})),0)]),e.generatorAttributes?a("auto-code-generator",{ref:"autoCodeGenerator",attrs:{generatorAttributes:e.generatorAttributes,generatorId:"dis-model"},model:{value:e.generationDialog,callback:function(t){e.generationDialog=t},expression:"generationDialog"}}):e._e()],1)],1)],1)],1)],1)},gr=[],br=(a("4fad"),a("a434"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:Object.assign({"c-column-template":!0},e.themeClasses)},[a("dis-simple-panel",{attrs:{newColumnAdded:e.value.newColumnAdded},scopedSlots:e._u([{key:"head",fn:function(){return[a("v-icon",{staticClass:"drag-handle mr-3"},[e._v("drag_indicator")]),a("h3",[e._v(" "+e._s(e.columnName)+" ")]),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[e.value.isLocked||"id"===e.value.name?a("v-icon",e._g(e._b({staticClass:"ml-2",attrs:{color:"grey darken-1"}},"v-icon",n,!1),r),[e._v("lock_outline")]):e._e(),"one_to_many"===e.value.type||"many_to_many"===e.value.type?a("v-icon",e._g(e._b({staticClass:"ml-2",attrs:{color:"grey darken-1"}},"v-icon",n,!1),r),[e._v("all_inclusive")]):e._e(),e.value.name===e.parentModelColumnName?a("v-icon",e._g(e._b({staticClass:"ml-2",attrs:{color:"grey darken-1"}},"v-icon",n,!1),r),[e._v("scatter_plot")]):e._e()]}}])},[e.value.isLocked||"id"===e.value.name?a("span",[e._v("Can not be modified")]):e._e(),"one_to_many"===e.value.type||"many_to_many"===e.value.type?a("span",[e._v(" Part of a relation ")]):e._e(),e.value.name===e.parentModelColumnName?a("span",[e._v(" Part of the parent relation ")]):e._e()])]},proxy:!0}])},[a("v-flex",{attrs:{"pa-2":"",sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-text",[a("v-text-field",{ref:"columnName",attrs:{label:"Column Name",rules:[function(t){return!e.allColumnsName.includes(t)||"The name is taken."},function(e){return""!==e||"Column should not be empty string"}],disabled:e.value.isLocked||"id"===e.value.name||"one_to_many"===e.value.type||"many_to_many"===e.value.type},on:{blur:function(t){return e.saveColumnName(t.target.value)}},model:{value:e.columnName,callback:function(t){e.columnName=t},expression:"columnName"}}),a("v-text-field",{ref:"columnLabel",attrs:{label:"Label",disabled:e.value.isLocked||"id"===e.value.name||e.isFKColumn},on:{blur:function(t){return e.removeFieldForNewAddedColumn()}},model:{value:e.value.label,callback:function(t){e.$set(e.value,"label",t)},expression:"value.label"}}),a("v-text-field",{attrs:{label:"Description",disabled:e.value.isLocked||"id"===e.value.name||e.isFKColumn},model:{value:e.value.description,callback:function(t){e.$set(e.value,"description",t)},expression:"value.description"}}),e.value.name!==e.value.oldName?a("v-text-field",{attrs:{label:"Original Column Name",disabled:""},model:{value:e.value.oldName,callback:function(t){e.$set(e.value,"oldName",t)},expression:"value.oldName"}}):e._e(),a("v-btn",{attrs:{color:"error",disabled:e.value.isLocked||"id"===e.value.name||e.isFKColumn||"many_to_many"===e.value.type||"one_to_many"===e.value.type},on:{click:function(t){return e.$emit("remove")}}},[e._v("Remove Field")])],1)],1)],1),a("v-flex",{attrs:{"pa-2":"",sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-text",[a("v-select",{attrs:{items:e.filteredColumnTypes,label:"Type",disabled:e.value.isLocked||"id"===e.value.name||"many_to_many"===e.value.type||"one_to_many"===e.value.type||e.isFKColumn},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}}),a("v-text-field",{attrs:{label:"Size",disabled:e.value.isLocked||"id"===e.value.name||e.isFKColumn||"pseudo"===e.value.type||"many_to_many"===e.value.type||"one_to_many"===e.value.type},model:{value:e.value.size,callback:function(t){e.$set(e.value,"size",e._n(t))},expression:"value.size"}}),a("v-checkbox",{attrs:{label:"Required?",disabled:e.value.isLocked||"id"===e.value.name||e.isFKColumn||"pseudo"===e.value.type||"many_to_many"===e.value.type||"one_to_many"===e.value.type},model:{value:e.value.required,callback:function(t){e.$set(e.value,"required",t)},expression:"value.required"}}),a("v-text-field",{attrs:{label:"Validator",disabled:e.value.isLocked||"id"===e.value.name||e.isFKColumn||"pseudo"===e.value.type||"many_to_many"===e.value.type||"one_to_many"===e.value.type},model:{value:e.value.validator,callback:function(t){e.$set(e.value,"validator",t)},expression:"value.validator"}}),"pseudo"===e.value.type?a("v-textarea",{attrs:{label:"Pseudo Column Value",disabled:e.value.isLocked||"id"===e.value.name||e.isFKColumn},model:{value:e.value.pseudoCalc,callback:function(t){e.$set(e.value,"pseudoCalc",t)},expression:"value.pseudoCalc"}},[a("v-tooltip",{attrs:{slot:"append",bottom:"","max-width":"200"},slot:"append"},[a("v-icon",{attrs:{slot:"activator",dark:""},slot:"activator"},[e._v("info")]),a("u",[e._v("Searchable")]),a("div",[e._v(" Dot separated string that represent a column of parent "),a("code",[e._v("parent.parent.name")])]),a("br"),a("u",[e._v("Non Searchable")]),a("div",[e._v(" A php code that has a variable $model represents the current row "),a("code",[e._v("$model->parent->top_depth + $model->length")])])],1)],1):e._e()],1)],1)],1),a("v-flex",{attrs:{"pa-2":"",sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-text",[a("v-text-field",{attrs:{label:"Unit",disabled:e.value.isLocked||"id"===e.value.name||e.isFKColumn||"many_to_many"===e.value.type||"one_to_many"===e.value.type},model:{value:e.value.unit,callback:function(t){e.$set(e.value,"unit",t)},expression:"value.unit"}}),a("v-text-field",{attrs:{label:"Calculate (PHP code)",disabled:e.value.isLocked||"id"===e.value.name||e.isFKColumn||"pseudo"===e.value.type||"many_to_many"===e.value.type||"one_to_many"===e.value.type},model:{value:e.value.calculate,callback:function(t){e.$set(e.value,"calculate",t)},expression:"value.calculate"}}),a("v-text-field",{attrs:{label:"Default Value",disabled:e.value.isLocked||"id"===e.value.name||e.isFKColumn||"pseudo"===e.value.type||"many_to_many"===e.value.type||"one_to_many"===e.value.type},model:{value:e.value.defaultValue,callback:function(t){e.$set(e.value,"defaultValue",t)},expression:"value.defaultValue"}})],1)],1)],1)],1)],1)}),yr=[],xr=a("6a18"),wr={name:"DataModelColumnTemplate",mixins:[xr["a"]],props:{value:{type:Object,required:!0},isFKColumn:{type:Boolean},parentModelColumnName:{type:String},allColumnsName:{type:Array}},created:function(){var e=this;this.initOldColumnName(),this.columnName=this.value.name,this.value.newColumnAdded&&this.$nextTick((function(){return e.$refs.columnLabel.focus()}))},data:function(){return{fullView:!1,columnName:"",wantToEditColumnName:!1}},computed:{filteredColumnTypes:function(){var e=["integer","double","boolean","string","dateTime","date","time","text","pseudo",{text:"string (multiple)",value:"string_multiple"},{text:"many (relation)",value:"many_to_many"},{text:"one - many (relation)",value:"one_to_many"}],t=["one_to_many","many_to_many"].includes(this.value.type)?e:e.filter((function(e){return"one_to_many"!==e.value&&"many_to_many"!==e.value}));return t}},methods:{initOldColumnName:function(){this.value.oldName=this.value.oldName?this.value.oldName:this.value.name},saveColumnName:function(e){""===e||this.allColumnsName.includes(e)?this.columnName=this.value.name:this.value.name=e,this.wantToEditColumnName=!1},editColumnName:function(){this.value.isLocked||"id"===this.value.name||"one_to_many"===this.value.type||"many_to_many"===this.value.type||this.value.name===this.parentModelColumnName||(this.wantToEditColumnName=!0)},removeFieldForNewAddedColumn:function(){this.value.newColumnAdded&&this.$delete(this.value,"newColumnAdded")}},watch:{"value.type":{handler:function(e,t){if("pseudo"===e&&e!==t){var a=Object.assign(this.value,{size:null,required:!1,validator:"",calculate:"",defaultValue:""});this.$emit("input",a)}}},wantToEditColumnName:function(e){var t=this;e&&this.$nextTick((function(){return t.$refs.columnName.focus()}))}}},kr=wr,Cr=Object(y["a"])(kr,br,yr,!1,null,"76001e5d",null),Or=Cr.exports;E()(Cr,{VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VCheckbox:ye["a"],VFlex:L["a"],VIcon:U["a"],VSelect:Oe["a"],VTextField:Me["a"],VTextarea:Se["a"],VTooltip:te["a"]});var Mr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:Object.assign({"c-index-template":!0},e.themeClasses)},[a("dis-simple-panel",{scopedSlots:e._u([{key:"head",fn:function(){return[a("h3",[e._v(e._s(e.value.name))]),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[e.value.isLocked||"id"===e.value.name?a("v-icon",e._g(e._b({staticClass:"ml-2",attrs:{color:"grey darken-1"}},"v-icon",n,!1),r),[e._v("lock_outline")]):e._e(),"one_to_many"===e.value.type||"many_to_many"===e.value.type?a("v-icon",e._g(e._b({staticClass:"ml-2",attrs:{color:"grey darken-1"}},"v-icon",n,!1),r),[e._v("all_inclusive")]):e._e(),e.value.name===e.parentModelColumnName?a("v-icon",e._g(e._b({staticClass:"ml-2",attrs:{color:"grey darken-1"}},"v-icon",n,!1),r),[e._v("scatter_plot")]):e._e()]}}])},[e.value.isLocked||"id"===e.value.name?a("span",[e._v("Can not be modified")]):e._e(),"one_to_many"===e.value.type||"many_to_many"===e.value.type?a("span",[e._v(" Part of a relation ")]):e._e(),e.value.name===e.parentModelColumnName?a("span",[e._v(" Part of the parent relation ")]):e._e()])]},proxy:!0}])},[a("v-flex",{attrs:{"pa-2":"",sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-text",[a("v-btn",{attrs:{color:"error",disabled:e.value.isLocked||"PRIMARY"===e.value.type},on:{click:function(t){return e.$emit("remove")}}},[e._v("Remove Index")])],1)],1)],1),a("v-flex",{attrs:{"pa-2":"",sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-text",[a("v-select",{attrs:{items:["PRIMARY","UNIQUE","KEY"],label:"Type",disabled:e.value.isLocked||"PRIMARY"===e.value.type},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)],1),a("v-flex",{attrs:{"pa-2":"",sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-text",[a("v-select",{attrs:{label:"Columns",items:e.columns,multiple:"",chips:"",disabled:e.value.isLocked||"PRIMARY"===e.value.type},model:{value:e.value.columns,callback:function(t){e.$set(e.value,"columns",t)},expression:"value.columns"}})],1)],1)],1)],1)],1)},jr=[],Ir={name:"DataModelIndexTemplate",mixins:[xr["a"]],props:{value:{type:Object,required:!0},columns:{type:Array,required:!0},parentModelColumnName:{type:String}},data:function(){return{}}},Er=Ir,Dr=Object(y["a"])(Er,Mr,jr,!1,null,null,null),Tr=Dr.exports;E()(Dr,{VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VFlex:L["a"],VIcon:U["a"],VSelect:Oe["a"],VTooltip:te["a"]});var Fr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:Object.assign({"c-index-template":!0},e.themeClasses)},[a("dis-simple-panel",{scopedSlots:e._u([{key:"head",fn:function(){return[a("h3",[e._v(e._s(e.value.name))])]},proxy:!0}])},[a("v-flex",{attrs:{"pa-2":"",sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-text",[a("v-btn",{attrs:{color:"error",disabled:e.value.isLocked||e.isParentRelation},on:{click:function(t){return e.$emit("remove")}}},[e._v("Remove Relation")])],1)],1)],1),a("v-flex",{attrs:{"pa-2":"",sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-text",[e.isParentRelation?e._e():a("v-select",{attrs:{chips:"",label:"Relation type",items:e.relationTypes,disabled:!!e.value.relationType},model:{value:e.value.relationType,callback:function(t){e.$set(e.value,"relationType",t)},expression:"value.relationType"}}),e.value.localColumns&&!e.value.relationType?a("v-select",{attrs:{label:"Local Columns",items:e.columns,chips:"",disabled:e.value.isLocked||e.isParentRelation},model:{value:e.value.localColumns[0],callback:function(t){e.$set(e.value.localColumns,0,t)},expression:"value.localColumns[0]"}}):e._e()],1)],1)],1),a("v-flex",{attrs:{"pa-2":"",sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-text",[a("v-text-field",{attrs:{label:"nm"===e.value.relationType?"Pseudo column to access the related records":"Column containing the id of the related record",rules:[function(t){return!e.allColumnsName.includes(t)||"The name is taken."},function(e){return""!==e||"Column should not be empty string"}],disabled:e.value.isLocked},on:{blur:function(t){return e.saveColumnName(t.target.value)}},model:{value:e.columnName,callback:function(t){e.columnName=t},expression:"columnName"}}),"nm"===e.value.relationType?a("v-text-field",{attrs:{label:"Pseudo column in related model to access the records in this model",disabled:e.value.isLocked},model:{value:e.oppositeColumnName,callback:function(t){e.oppositeColumnName=t},expression:"oppositeColumnName"}}):e._e(),"nm"===e.value.relationType?a("v-autocomplete",{attrs:{label:"Related model",chips:"",items:e.availableTables,disabled:e.value.isLocked||!!e.value.relationType},model:{value:e.value.relatedTable,callback:function(t){e.$set(e.value,"relatedTable",t)},expression:"value.relatedTable"}}):e._e(),"1n"!==e.value.relationType&&e.value.relationType?e._e():a("v-autocomplete",{attrs:{label:"Related model",chips:"",items:e.availableTables,disabled:e.value.isLocked||!!e.value.relationType},model:{value:e.value.foreignTable,callback:function(t){e.$set(e.value,"foreignTable",t)},expression:"value.foreignTable"}}),e.value.foreignColumns||!e.value.relationType?a("v-select",{attrs:{label:"Remote Column",items:e.availableColumnsWithoutPseudoColumn,chips:"",disabled:e.value.isLocked||e.isParentRelation||"1n"===e.value.relationType},model:{value:e.value.foreignColumns[0],callback:function(t){e.$set(e.value.foreignColumns,0,t)},expression:"value.foreignColumns[0]"}}):e._e(),e.value.displayColumns&&e.value.relationType?a("v-select",{attrs:{label:"Display column of the related model",items:e.availableColumns,chips:"",disabled:e.value.isLocked||e.isParentRelation,clearable:""},model:{value:e.displayColumns[0],callback:function(t){e.$set(e.displayColumns,0,t)},expression:"displayColumns[0]"}}):e._e()],1)],1)],1)],1)],1)},Sr=[],Pr={name:"DataModelForeignKeyTemplate",mixins:[xr["a"]],props:{value:{type:Object,required:!0},columns:{type:Array,required:!0},relationIndex:{type:Number},isParentRelation:{type:Boolean,default:!1},allColumnsName:{type:Array}},data:function(){return{displayColumns:[],columnName:"",oppositeColumnName:""}},created:function(){this.value.displayColumns=null===this.value.displayColumns?[]:this.value.displayColumns,this.displayColumns=Object(ne["a"])(this.value.displayColumns),this.columnName=this.value.localColumns[0],this.oppositeColumnName=this.value.oppositeColumnName},mounted:function(){this.$watch("displayColumns",(function(e){this.$emit("displayColumns",e,this.relationIndex,this.columnName)})),this.$watch("oppositeColumnName",(function(e,t){this.$emit("oppositeColumnName",e,t,this.relationIndex)}))},computed:{availableTables:function(){return this.$store.state.templates.summary.models.filter((function(e){return e.isTableCreated})).map((function(e){return e.table}))},availableColumns:function(){var e=this;return this.value.relatedTable?Object.entries(this.$store.state.templates.summary.models.find((function(t){return t.table===e.value.relatedTable})).columns).map((function(e){return e[0]})):this.value.foreignTable?Object.entries(this.$store.state.templates.summary.models.find((function(t){return t.table===e.value.foreignTable})).columns).map((function(e){return e[0]})):[]},availableColumnsWithoutPseudoColumn:function(){var e=this;return this.value.relatedTable?Object.entries(this.$store.state.templates.summary.models.find((function(t){return t.table===e.value.relatedTable})).columns).filter((function(e){return"pseudo"!==e[1].type})).map((function(e){return e[0]})):this.value.foreignTable?Object.entries(this.$store.state.templates.summary.models.find((function(t){return t.table===e.value.foreignTable})).columns).filter((function(e){return"pseudo"!==e[1].type})).map((function(e){return e[0]})):[]},relationTypes:function(){return[{text:"One-to-many",value:"1n"},{text:"Many-to-many",value:"nm"}]}},methods:{saveColumnName:function(e){""===e||this.allColumnsName.includes(e)?this.columnName=this.value.localColumns[0]:(this.columnName=e,this.$emit("columnName",this.columnName,this.value.localColumns[0],this.relationIndex))}}},Vr=Pr,Ar=a("c6a6"),Rr=Object(y["a"])(Vr,Fr,Sr,!1,null,null,null),Lr=Rr.exports;E()(Rr,{VAutocomplete:Ar["a"],VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VFlex:L["a"],VSelect:Oe["a"],VTextField:Me["a"]});var $r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:Object.assign({"c-index-template":!0},e.themeClasses)},[a("dis-simple-panel",{scopedSlots:e._u([{key:"head",fn:function(){return[a("v-icon",{staticClass:"drag-handle mr-3"},[e._v("drag_indicator")]),a("h3",[e._v(e._s(e.behaviorName))])]},proxy:!0}])},[a("v-flex",{attrs:{"pa-2":"",sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-text",[a("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.$emit("remove")}}},[e._v("Remove Behavior")])],1)],1)],1),a("v-flex",{attrs:{"pa-2":"",sm12:"",md6:"",lg8:""}},[a("v-card",[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.behaviorInfo.parameters,(function(t){return a("v-flex",{key:t.name,attrs:{"pa-2":"",sm12:"",lg6:""}},[a("v-text-field",{attrs:{"persistent-hint":"",hint:e.behaviorHints[t.name],label:t.name},model:{value:e.value.parameters[t.name],callback:function(a){e.$set(e.value.parameters,t.name,a)},expression:"value.parameters[param.name]"}})],1)})),1)],1)],1)],1)],1)],1)},Ur=[],Nr={name:"DataModelBehaviorTemplate",mixins:[xr["a"]],props:{value:{type:Object,required:!0}},data:function(){return{}},computed:{behaviorInfo:function(){var e=this;return this.$store.state.templates.behaviors.find((function(t){return t.behaviorClass===e.value.behaviorClass}))},behaviorName:function(){return this.behaviorInfo?this.behaviorInfo.name:null},behaviorHints:function(){if(!this.behaviorInfo)return null;var e={};return this.behaviorInfo.parameters.forEach((function(t){e[t.name]=t.hint})),e}},watch:{}},Br=Nr,Wr=Object(y["a"])(Br,$r,Ur,!1,null,null,null),qr=Wr.exports;E()(Wr,{VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VFlex:L["a"],VIcon:U["a"],VLayout:B["a"],VTextField:Me["a"]});var Kr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{value:e.value,"max-width":"920",persistent:""}},[a("v-card",[a("v-card-title",[a("h1",[e._v("Model Code Generator")])]),a("v-card-text",[a("code-generator",e._b({ref:"codeGenerator"},"code-generator",e.$attrs,!1))],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"red"},on:{click:function(t){return e.$emit("input",!1)}}},[e._v("close")])],1)],1)],1)},Gr=[],Hr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-code-generator"},[a("v-layout",{attrs:{row:"","align-center":""}},[a("h3",[e._v("Code Generator")]),e.loading?a("v-progress-circular",{staticClass:"ml-2",attrs:{size:"28",indeterminate:""}}):e._e(),a("v-spacer"),a("v-btn",{attrs:{color:"info",disabled:e.loading},on:{click:function(t){return e.cgView(!1)}}},[e._v("Preview")]),e.files&&e.files.length>0?a("v-btn",{attrs:{color:"green",disabled:e.loading},on:{click:function(t){return e.cgView(!0)}}},[e._v(" generate ")]):e._e()],1),a("v-alert",{class:{error:e.hasError,info:!e.hasError,"c-code-generator__results-overflow":!0},attrs:{dismissible:""},model:{value:e.showAlert,callback:function(t){e.showAlert=t},expression:"showAlert"}},[a("pre",{staticClass:"c-code-generator__results"},[e._v(e._s(e.results))])]),a("div",{staticClass:"c-code-generator__table-overflow"},[e.files&&e.files.length>0?a("table",{staticClass:"c-code-generator__preview-table"},[e._m(0),e._l(e.files,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.path))]),a("td",[a("v-checkbox",{attrs:{label:t.operation,value:t.id,"hide-details":"",disabled:"skip"===t.operation},model:{value:e.answers[t.id],callback:function(a){e.$set(e.answers,t.id,a)},expression:"answers[file.id]"}})],1),a("td",[a("v-layout",{attrs:{row:""}},[a("v-btn",{attrs:{flat:"",color:"green",disabled:e.loading,small:""},on:{click:function(){return e.showContent(t.id)}}},[e._v("Content")]),a("v-btn",{attrs:{flat:"",color:"orange",disabled:"overwrite"!==t.operation||e.loading,small:""},on:{click:function(){return e.showDiff(t.id)}}},[e._v("diff")])],1)],1)])})),a("tfoot",{attrs:{colspa:""}})],2):e._e()]),a("v-dialog",{attrs:{"max-width":"760px"},model:{value:e.fileContentDialog,callback:function(t){e.fileContentDialog=t},expression:"fileContentDialog"}},[a("v-card",[a("v-card-title",[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.fileContentDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",{domProps:{innerHTML:e._s(e.fileContent)}})],1)],1)],1)},zr=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",[e._v("File")]),a("th",[e._v("Operation")]),a("th")])}],Qr={name:"CodeGenerator",props:{generatorId:{type:String,required:!0},generatorAttributes:{type:Object,required:!0}},data:function(){return{fileContentDialog:!1,fileContent:null,filesToSave:[],loading:!1,hasError:!1,results:"",files:[],answers:{}}},computed:{showAlert:{get:function(){return!!this.results},set:function(){this.results=""}}},created:function(){this.disTemplateService=new za},methods:{showDiff:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.loading=!0,t.loading=!0,a.next=5,t.$store.dispatch("templates/cgDiff",{id:t.generatorId,generatorAttributes:t.generatorAttributes,file:e});case 5:r=a.sent,t.fileContent=r.data,t.fileContentDialog=!0,a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),t.$dialog.notify.warning(a.t0.message,{timeout:3e4}),console.log(a.t0);case 14:return a.prev=14,t.loading=!1,a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[0,10,14,17]])})))()},showContent:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.loading=!0,t.loading=!0,a.next=5,t.$store.dispatch("templates/cgPreview",{id:t.generatorId,generatorAttributes:t.generatorAttributes,file:e});case 5:r=a.sent,t.fileContent=r.data,t.fileContentDialog=!0,t.loading=!1,a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](0),t.$dialog.notify.warning(a.t0.message,{timeout:3e4}),console.log(a.t0);case 15:return a.prev=15,t.loading=!1,a.finish(15);case 18:case"end":return a.stop()}}),a,null,[[0,11,15,18]])})))()},cgView:function(){var e=arguments,t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]&&e[0],a.prev=1,t.loading=!0,a.next=5,t.$store.dispatch("templates/cgView",{id:t.generatorId,generatorAttributes:t.generatorAttributes,generate:r,answers:t.answers});case 5:n=a.sent,t.files=n.data.files,Array.isArray(n.data.answers)&&n.data.answers.length>0?t.answers=n.data.answers:Array.isArray(n.data.files)&&n.data.files.length>0?t.answers=n.data.files.reduce((function(e,t,a){return e[t.id]=!1,e}),{}):t.answers=[],t.results=n.data.results,a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](1),t.$dialog.notify.warning(a.t0.message,{timeout:3e4}),console.log(a.t0);case 15:return a.prev=15,t.loading=!1,a.finish(15);case 18:case"end":return a.stop()}}),a,null,[[1,11,15,18]])})))()}}},Yr=Qr,Zr=(a("3edc"),Object(y["a"])(Yr,Hr,zr,!1,null,"a96dcf78",null)),Jr=Zr.exports;E()(Zr,{VAlert:vt["a"],VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VCardTitle:be["a"],VCheckbox:ye["a"],VDialog:V["a"],VIcon:U["a"],VLayout:B["a"],VProgressCircular:Ct["a"],VSpacer:Y["a"]});var Xr={name:"AutoCodeGenerator",components:{CodeGenerator:Jr},props:{value:{type:Boolean,required:!0}},data:function(){return{ready:!0}},methods:{generate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.codeGenerator.cgView();case 3:if(a=e.$refs.codeGenerator.files.findIndex((function(e){return"overwrite"===e.operation}))>-1,a){t.next=18;break}t.t0=regeneratorRuntime.keys(e.$refs.codeGenerator.answers);case 6:if((t.t1=t.t0()).done){t.next=13;break}return r=t.t1.value,e.$refs.codeGenerator.answers[r]=!0,t.next=11,e.$nextTick();case 11:t.next=6;break;case 13:return t.next=15,e.$refs.codeGenerator.cgView(!0);case 15:return t.abrupt("return","generated");case 18:return t.abrupt("return","waitingForUser");case 19:t.next=24;break;case 21:t.prev=21,t.t2=t["catch"](0),console.log("auto generator",t.t2);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()}}},en=Xr,tn=Object(y["a"])(en,Kr,Gr,!1,null,"3c614131",null),an=tn.exports;E()(tn,{VBtn:T["a"],VCard:F["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:be["a"],VDialog:V["a"],VSpacer:Y["a"]});var rn=a("2ef0"),nn={name:"DataModelTemplate",components:{AutoCodeGenerator:an,DataModelForeignKeyTemplate:Lr,DataModelBehaviorTemplate:qr,DataModelIndexTemplate:Tr,DataModelColumnTemplate:Or,draggable:O.a},props:{initialTemplate:{type:Object,required:!0},scenario:{type:String,required:!0}},data:function(){return{module:"",name:"",parentModel:"",columns:[],indices:[],behaviors:[],serverValidationErrors:[],generationLog:[],generationDialog:!1,loading:!1,behaviorsFilter:"",behaviorsMenu:!1,relations:[],relatedModel:"",relationType:"",relationDialog:!1,displayColumn:"",columnName:"",oppositeColumnName:""}},mounted:function(){this.module=this.initialTemplate.module,this.name=this.initialTemplate.name,this.parentModel=this.initialTemplate.parentModel,this.columns=this.initialTemplate.columns,this.indices=this.initialTemplate.indices,this.relations=this.initialTemplate.relations,this.behaviors=this.initialTemplate.behaviors,this.$watch("parentModel",(function(e,t){var a=this;if(t){var r=Object(rn["upperFirst"])(Object(rn["camelCase"])("".concat(this.module,"-").concat(this.name)))===t,n=this.$store.state.templates.summary.models.find((function(e){return e.fullName===t}));this.removeColumn(this.columns.findIndex((function(e){return e.name===Object(rn["snakeCase"])("".concat(r?"parent":n.name," id"))}))),this.removeIndex(this.indices.findIndex((function(e){return e.name===Object(rn["snakeCase"])("".concat(r?"parent":n.name," id"))}))),this.removeIndex(this.indices.findIndex((function(e){return e.columns[0]===Object(rn["snakeCase"])("".concat(r?"parent":n.name," id"))}))),this.removeRelation(this.relations.findIndex((function(e){return e.foreignTable===(r?a.table:n.table)&&1===e.localColumns.length&&e.localColumns[0]===Object(rn["snakeCase"])("".concat(r?"parent":n.name," id"))})))}if(e){var s=Object(rn["upperFirst"])(Object(rn["camelCase"])("".concat(this.module,"-").concat(this.name)))===this.parentModel,i=this.$store.state.templates.summary.models.find((function(t){return t.fullName===e}));this.columns.push({name:this.parentModelColumnName,importSource:"",type:"integer",size:11,required:!s,primaryKey:!1,autoInc:!1,label:s?"parent":i.name,description:"",validator:"",validatorMessage:"",unit:"",selectListName:"",calculate:"",defaultValue:""}),this.indices.push({columns:[Object(rn["snakeCase"])("".concat(s?"parent":i.name," id"))],isLocked:null,name:Object(rn["snakeCase"])("".concat(s?"parent":i.name," id")),type:"KEY"}),this.relations.unshift({name:"".concat(this.table,"__").concat(i.table,"__parent"),foreignTable:s?this.table:i.table,localColumns:[this.parentModelColumnName],foreignColumns:["id"],displayColumns:null})}}))},watch:{relationDialog:function(){this.relationType="",this.relatedModel="",this.displayColumn="",this.columnName="",this.oppositeColumnName=""}},computed:{showErrorSummary:{get:function(){return this.serverValidationErrors.length>0},set:function(){this.serverValidationErrors=[]}},showGenerationLog:{get:function(){return this.generationLog.length>0},set:function(){this.generationLog=[]}},generatorAttributes:function(){return{templateName:this.$route.params.modelFullName}},table:function(){return this.name?Object(rn["snakeCase"])("".concat(this.module," ").concat(this.name)):""},parentModelObject:function(){var e=this;return this.$store.state.templates.summary.models.find((function(t){return t.fullName===e.parentModel}))},parentModelColumnName:function(){var e=Object(rn["upperFirst"])(Object(rn["camelCase"])("".concat(this.module,"-").concat(this.name)))===this.parentModel;return this.parentModelObject?Object(rn["snakeCase"])("".concat(e?"parent":this.parentModelObject.name," id")):""},relatedModelObject:function(){var e=this;return this.$store.state.templates.summary.models.find((function(t){return t.fullName===e.relatedModel}))},oneToManyAvailableColumns:function(){var e=this;return this.relatedModel?Object.entries(this.$store.state.templates.summary.models.find((function(t){return t.fullName===e.relatedModel})).columns).map((function(e){return e[0]})):[]},relatedModelColumnName:function(){var e="";return this.relatedModelObject&&(e="nm"===this.relationType?Object(rn["snakeCase"])("".concat(this.relatedModelObject.table,"_ids_nm")):Object(rn["snakeCase"])("".concat(this.relatedModelObject.table,"_").concat(this.displayColumn,"_ids"))+"_1n"),e},behaviorsList:function(){var e=this;return this.behaviorsFilter?this.$store.state.templates.behaviors.filter((function(t){return t.name.toLowerCase().indexOf(e.behaviorsFilter.toLowerCase())>=0})):this.$store.state.templates.behaviors},model:function(){var e=Object(rn["upperFirst"])(this.module)+Object(rn["upperFirst"])(this.name);return this.$store.state.templates.summary.models.find((function(t){return t.fullName===e}))},relatedModels:function(){return this.$store.state.templates.summary.models},relationTypes:function(){return[{text:"One-to-many",value:"1n"},{text:"Many-to-many",value:"nm"}]}},methods:{addColumn:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$dialog.prompt({title:"Column Name",text:"Enter a unique column name"});case 2:a=t.sent,e.addColumnWithColumnName(a);case 4:case"end":return t.stop()}}),t)})))()},addColumnWithColumnName:function(e){var t=e?Object(rn["snakeCase"])(e):null;t&&this.columns.findIndex((function(e){return e.name===t}))<0&&this.columns.push({name:t,importSource:"",type:"integer",size:null,required:!1,primaryKey:!1,autoInc:!1,label:Object(rn["startCase"])(e),description:"",validator:"",validatorMessage:"",unit:"",selectListName:"",calculate:"",defaultValue:"",newColumnAdded:!0})},removeColumn:function(e){e>-1&&this.columns.splice(e,1)},addIndex:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$dialog.prompt({title:"Index Name",text:"enter the desired index name"});case 2:a=t.sent,r=Object(rn["snakeCase"])(a),r&&e.indices.findIndex((function(e){return e.name===r}))<0&&e.indices.push({name:r,type:"",columns:[]});case 5:case"end":return t.stop()}}),t)})))()},removeIndex:function(e){e>-1&&this.indices.splice(e,1)},addRelation:function(){var e=this;if(this.relationType&&this.relatedModel){var t=Object(rn["snakeCase"])(this.relatedModel),a=Object(rn["lowerCase"])(this.relationType).replace(/\s/g,"");if(t&&this.relations.findIndex((function(e){return e.name===t}))<0){var r=Object(rn["upperFirst"])(Object(rn["camelCase"])("".concat(this.module,"-").concat(this.name)))===this.relatedModel,n=this.$store.state.templates.summary.models.find((function(t){return t.fullName===e.relatedModel}));"nm"===a?this.relations.push({name:"".concat(this.table,"__").concat(n.table,"__").concat(this.columnName,"__").concat(a),relatedTable:r?this.table:n.table,relationType:a,localColumns:[this.columnName],foreignColumns:null,displayColumns:[this.displayColumn],oppositeColumnName:this.oppositeColumnName}):this.relations.push({name:"".concat(this.table,"__").concat(n.table,"__").concat(this.columnName,"__").concat(a),foreignTable:r?this.table:n.table,relationType:a,localColumns:[this.columnName],foreignColumns:["id"],displayColumns:[this.displayColumn]}),this.relatedModel&&this.relationType&&this.columns.push({name:this.columnName,importSource:"",type:"nm"===this.relationType?Object(rn["snakeCase"])("many to many"):Object(rn["snakeCase"])("one to many"),size:null,required:!1,primaryKey:!1,autoInc:!1,label:r?"self":n.name,description:"",validator:"",validatorMessage:"",unit:"",selectListName:"",calculate:"",defaultValue:"",searchable:!1,displayColumn:this.displayColumn,relatedTable:n.table}),"1n"===this.relationType&&this.indices.push({name:this.columnName,type:"KEY",columns:[this.columnName],isLocked:!0}),this.relationDialog=!1}}},updateDisplayColumns:function(e,t,a){this.relations[t].displayColumns=Object(ne["a"])(e),"nm"===this.relations[t].relationType&&(this.columns.find((function(e){return e.name===a})).displayColumn=e[0],this.relations[t].name="".concat(this.table,"__").concat(this.relations[t].relatedTable,"__").concat(a,"__").concat(this.relations[t].relationType)),"1n"===this.relations[t].relationType&&(this.columns.find((function(e){return e.name===a})).displayColumn=e[0],this.relations[t].name="".concat(this.table,"__").concat(this.relations[t].foreignTable,"__").concat(a,"__").concat(this.relations[t].relationType))},updateColumnName:function(e,t,a){this.columns.find((function(e){return e.name===t})).name=e,"nm"===this.relations[a].relationType&&(this.relations[a].name="".concat(this.table,"__").concat(this.relations[a].relatedTable,"__").concat(e,"__").concat(this.relations[a].relationType),this.relations[a].localColumns=[e]),"1n"===this.relations[a].relationType&&(this.indices.find((function(e){return e.name===t})).name=e,this.indices.find((function(t){return t.name===e})).columns=[e],this.relations[a].name="".concat(this.table,"__").concat(this.relations[a].foreignTable,"__").concat(e,"__").concat(this.relations[a].relationType),this.relations[a].localColumns=[e])},updateOppositeColumnName:function(e,t,a){"nm"===this.relations[a].relationType&&(this.relations[a].oppositeColumnName=e)},removeRelation:function(e){var t=this.relations[e];if(e>-1){var a=this.columns.findIndex((function(e){return e.displayColumn===t.displayColumns[0]}));if(a>-1){var r=this.columns[a].name;if(this.removeColumn(a),"1n"===t.relationType){var n=this.indices.findIndex((function(e){return e.name===r}));n&&this.removeIndex(n)}}this.relations.splice(e,1)}},addBehavior:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r={},e.parameters.forEach((function(e){r[e.name]=""})),t.behaviors.push({behaviorClass:e.behaviorClass,parameters:r}),t.behaviorsFilter="",t.behaviorsMenu=!1;case 5:case"end":return a.stop()}}),a)})))()},removeBehavior:function(e){e>-1&&this.behaviors.splice(e,1)},saveModelTemplate:function(){var e=arguments,t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.length>0&&void 0!==e[0]&&e[0],n={module:t.module,name:Object(rn["upperFirst"])(t.name),table:t.table,parentModel:t.parentModel,columns:{},indices:{},relations:{},behaviors:[]},t.columns.forEach((function(e){n.columns[e.name]=e})),t.indices.forEach((function(e){e.columns=e.columns.filter((function(e){return Object.keys(n.columns).includes(e)})),n.indices[e.name]=e})),t.relations.forEach((function(e){"nm"!==e.relationType&&(e.localColumns=e.localColumns.filter((function(e){return Object.keys(n.columns).includes(e)}))),n.relations[e.name]=e})),t.behaviors.forEach((function(e){n.behaviors.push({behaviorClass:e.behaviorClass,parameters:e.parameters})})),!r){a.next=11;break}return a.next=9,t.saveAndGenerate(n);case 9:a.next=13;break;case 11:return a.next=13,t.save(n);case 13:case"end":return a.stop()}}),a)})))()},save:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.serverValidationErrors=[],t.loading=!0,a.prev=2,"update"!==t.scenario){a.next=10;break}return a.next=6,t.$store.dispatch("templates/updateModelTemplate",{fullName:Object(rn["upperFirst"])(Object(rn["camelCase"])("".concat(e.module,"-").concat(e.name))),template:e});case 6:return a.next=8,t.$dialog.message.success("saved successfully",{position:"bottom"});case 8:a.next=21;break;case 10:if("create"!==t.scenario){a.next=20;break}return a.next=13,t.$store.dispatch("templates/createModelTemplate",e);case 13:return r=a.sent,a.next=16,t.$dialog.message.success("created successfully",{position:"bottom"});case 16:return a.next=18,t.$router.push("/settings/templates-manager/data-models/update/".concat(r.fullName));case 18:a.next=21;break;case 20:throw Error("DataModelTemplate: invalid scenario "+t.scenario);case 21:return a.abrupt("return",!0);case 24:if(a.prev=24,a.t0=a["catch"](2),!a.t0.response||422!==a.t0.response.status){a.next=30;break}t.serverValidationErrors=a.t0.response.data,a.next=31;break;case 30:throw a.t0;case 31:return a.prev=31,t.loading=!1,a.finish(31);case 34:case"end":return a.stop()}}),a,null,[[2,24,31,34]])})))()},saveAndGenerate:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.save(e);case 2:if(r=a.sent,t.generationLog.push("Step 1/3: saving the template"),!r){a.next=37;break}return t.generationLog.push("template was saved successfully"),t.loading=!0,a.prev=7,t.generationLog.push("Step 2/3: creating table"),a.next=11,t.$store.dispatch("templates/createModelTable",Object(rn["upperFirst"])(Object(rn["camelCase"])("".concat(e.module,"-").concat(e.name))));case 11:if(n=a.sent,!n){a.next=24;break}return t.generationLog.push("table was created successfully"),t.generationLog.push("Step 3/3: generating classes"),t.generationDialog=!0,a.next=18,t.$nextTick();case 18:return a.next=20,t.$refs.autoCodeGenerator.generate();case 20:s=a.sent,"generated"===s?t.generationLog.push("classes were generated successfully"):t.generationLog.push("some files will be overwritten. choose how you want to continue."),a.next=25;break;case 24:t.generationLog.push("was not able to create/re-create the table");case 25:a.next=32;break;case 27:return a.prev=27,a.t0=a["catch"](7),a.next=31,t.$dialog.notify.warning(a.t0.message,{timeout:3e4});case 31:console.log(a.t0);case 32:return a.prev=32,t.loading=!1,a.finish(32);case 35:a.next=38;break;case 37:t.generationLog.push("was not able to save the template");case 38:case"end":return a.stop()}}),a,null,[[7,27,32,35]])})))()},fixModelNameCase:function(){this.name=Object(rn["upperFirst"])(Object(rn["camelCase"])(this.name))}}},sn=nn,on=(a("8156"),Object(y["a"])(sn,hr,gr,!1,null,"2c6d1b49",null)),ln=on.exports;E()(on,{VAlert:vt["a"],VBtn:T["a"],VCard:F["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:be["a"],VDialog:V["a"],VFlex:L["a"],VForm:ke["a"],VLayout:B["a"],VList:W["a"],VListTile:K["a"],VListTileTitle:H["b"],VMenu:z["a"],VSelect:Oe["a"],VSpacer:Y["a"],VTextField:Me["a"]});var cn={name:"NewDataModelTemplate",components:{DataModelTemplate:ln},data:function(){return{loading:!1,template:{module:nr()(this.$route.params.moduleName),name:"",parentModel:"",columns:[{name:"id",importSource:"",type:"integer",size:11,required:!1,primaryKey:!0,autoInc:!0,label:"ID",description:"",validator:"",validatorMessage:"",unit:"",selectListName:"",calculate:"",defaultValue:""}],indices:[{name:"pk_id",type:"PRIMARY",columns:["id"]}],relations:[],behaviors:[]},serverValidationErrors:[]}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$store.dispatch("templates/refreshSummary");case 4:return t.next=6,e.$store.dispatch("templates/refreshBehaviors");case 6:t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$dialog.notify.warning(t.t0.message,{timeout:3e4}),console.log(t.t0);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})))()},mounted:function(){this.$setTitle("Create Data Model Template")}},un=cn,dn=Object(y["a"])(un,_r,vr,!1,null,"6dc2a6b7",null),mn=dn.exports;E()(dn,{VContainer:we["a"],VProgressLinear:Ce["a"]});var pn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","grid-list-md":""}},[e.loading?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),e.template?a("data-model-template",{attrs:{initialTemplate:e.template,scenario:"update"}}):e._e()],1)},fn=[],_n=(a("07ac"),{name:"UpdateDataModelTemplate",components:{DataModelTemplate:ln},data:function(){return{loading:!1,template:null}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$store.dispatch("templates/refreshSummary");case 4:return t.next=6,e.$store.dispatch("templates/refreshBehaviors");case 6:return t.next=8,e.$store.dispatch("templates/getModelTemplate",e.$route.params.modelFullName);case 8:a=t.sent,r={module:a.module,name:a.name,parentModel:a.parentModel,columns:Object.values(a.columns),indices:Object.values(a.indices),relations:Object.values(a.relations),behaviors:a.behaviors||[]},e.template=r,t.next=18;break;case 13:return t.prev=13,t.t0=t["catch"](1),t.next=17,e.$dialog.notify.warning(t.t0.message,{timeout:3e4});case 17:console.log(t.t0);case 18:return t.prev=18,e.loading=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[1,13,18,21]])})))()},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$setTitle("Update Data Model Template");case 1:case"end":return t.stop()}}),t)})))()}}),vn=_n,hn=Object(y["a"])(vn,pn,fn,!1,null,"23da8113",null),gn=hn.exports;E()(hn,{VContainer:we["a"],VProgressLinear:Ce["a"]});var bn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"c-model-forms",attrs:{fluid:"","grid-list-md":""}},[e.loading?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:"",lg4:""}},[a("v-card",{attrs:{height:"100%",color:"blue-grey",dark:""}},[a("v-card-title",[a("h2",[e._v(e._s(e.$route.params.modelFullName))])]),a("v-card-text",[e._v(" These tiles display information about certain forms that are available in the sidebar. "),a("br"),e._v(" Each tile here represents a form that is bound to "+e._s(e.$route.params.modelFullName)+"."),a("br"),e._v(' As we say, all forms here share the same "data model". ')]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green",to:"/settings/templates-manager/forms/"+e.$route.params.modelFullName+"/new",disabled:"ArchiveFile"===e.$route.params.modelFullName}},[e._v(" New ")])],1)],1)],1),e._l(e.modelForms,(function(e){return a("v-flex",{key:e.name,attrs:{sm12:"",md6:"",lg4:""}},[a("form-template-summary",{attrs:{form:e}})],1)}))],2)],1)},yn=[],xn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{height:"100%"}},[a("v-card-title",[a("span",[a("div",{staticClass:"title"},[e._v(" "+e._s(e.form.name)+" "),a("v-btn",{attrs:{icon:"",small:"",loading:e.loading,title:"rename",dark:""},on:{click:e.onFormRenameClick}},[a("v-icon",{attrs:{small:""}},[e._v("edit")])],1)],1),a("span",{staticClass:"subheading"},[e._v(e._s(e._f("formatTimestamp")(1e3*e.form.modifiedAt)))])]),a("v-spacer"),a("v-btn",{attrs:{icon:"",loading:e.loading,color:"primary",title:"open",dark:""},on:{click:function(){return e.onFormOpenClick(e.form)}}},[a("v-icon",[e._v("open_in_new")])],1),a("v-btn",{attrs:{icon:"",loading:e.loading,color:"black",title:"download",dark:""},on:{click:function(){return e.onFormDownloadClick(e.form)}}},[a("v-icon",[e._v("cloud_download")])],1),a("v-btn",{attrs:{icon:"",loading:e.loading,color:"teal",title:"duplicate",dark:""},on:{click:function(){return e.onFormDuplicateClick(e.form)}}},[a("v-icon",[e._v("file_copy")])],1),a("v-btn",{attrs:{icon:"",loading:e.loading,color:"orange",to:"/settings/templates-manager/forms/"+e.$route.params.modelFullName+"/update/"+e.form.name,title:"edit",dark:""}},[a("v-icon",[e._v("edit")])],1),a("v-btn",{attrs:{icon:"",loading:e.loading,color:"red",title:"delete",dark:"",disabled:"ArchiveFile"===e.form.dataModel},on:{click:function(){return e.deleteFormTemplate(e.form.name)}}},[a("v-icon",[e._v("delete")])],1)],1),a("v-card-text",[a("p",[0===e.form.generatedFiles.filter((function(e){return!1===e.modified})).length?a("span",[a("v-icon",{attrs:{color:"green",small:""}},[e._v("check_circle")]),e._v(" All required classes and files were generated")],1):a("span",[a("v-icon",{attrs:{color:"red",small:""}},[e._v("error")]),e._v(" required code-files were not generated.")],1),a("generated-files",{attrs:{files:e.form.generatedFiles,"template-generated-at":e.form.generatedAt||0}})],1),e.form.customVueFile?a("div",[a("div",[a("v-icon",{attrs:{color:"orange",small:""}},[e._v("warning")]),e._v("Code for this form was customized!"),a("generated-files",{attrs:{files:[e.form.customVueFile],"template-generated-at":e.form.generatedAt||0}})],1),a("div",[a("v-icon",{attrs:{color:"orange",small:""}},[e._v("warning")]),e._v("This means: do NOT choose ' ✓ Overwrite' in 'Save & Generate' dialog for the '.vue' file.")],1)]):e._e()])],1)},wn=[],kn=a("375a"),Cn=a.n(kn),On={name:"FormTemplateSummary",components:{GeneratedFiles:ar},props:{form:{required:!0,type:Object}},data:function(){return{loading:!1}},methods:{deleteFormTemplate:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$dialog.confirm({title:"Confirm deletion of form '".concat(e,"'"),text:"Delete the form '".concat(e,"', and also ALL code-files generated previously: the form template (").concat(e,'.json), and all ".php" and ".vue*" files comprising that form.'),persistent:!0});case 2:if(r=a.sent,a.prev=3,t.loading=!0,!r){a.next=13;break}return a.next=8,t.$store.dispatch("templates/deleteFormTemplate",e);case 8:return a.next=10,t.$store.dispatch("refreshUser");case 10:return a.next=12,t.$store.dispatch("getForms");case 12:t.$dialog.message.success("Form '".concat(e,"' deleted successfully"),{position:"bottom"});case 13:a.next=19;break;case 15:a.prev=15,a.t0=a["catch"](3),t.$dialog.notify.warning("unable to delete form '".concat(e,"': ").concat(a.t0.message),{timeout:3e4}),console.log(a.t0);case 19:return a.prev=19,t.loading=!1,a.finish(19);case 22:case"end":return a.stop()}}),a,null,[[3,15,19,22]])})))()},onFormDuplicateClick:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$dialog.prompt({title:"Duplicate form '".concat(e.name,"'"),text:"Enter name of new form:"});case 2:if(r=a.sent,!r){a.next=28;break}if(console.log("duplicate",r,"type",Object(Ga["a"])(r)),r=Cn()(r),!(t.$store.state.templates.summary.forms.findIndex((function(e){return e.formName===r}))>-1)){a.next=9;break}return t.$dialog.error({title:"Name of new form is invalid",text:"New form '".concat(e.name,"' already exists!")}),a.abrupt("return",!1);case 9:return n=new za,a.prev=10,t.loading=!0,a.next=14,n.duplicate("form",e.name,r);case 14:return t.$dialog.message.success("Form template duplicated to: '".concat(r,"'")),a.next=17,t.$store.dispatch("templates/refreshSummary");case 17:a.next=25;break;case 19:if(a.prev=19,a.t0=a["catch"](10),s="",a.t0.response&&422===a.t0.response.status)for(i in s="Validation Error",a.t0.response.data)s+="*".concat(a.t0.response.data[i].field,"*: ").concat(a.t0.response.data[i].message," ");else s=a.t0.response&&a.t0.response.statusText?a.t0.response.statusText:"error: cannot create form duplicate ".concat(r,".");t.$dialog.notify.warning(s),console.log(a.t0.response?a.t0.response:a.t0);case 25:return a.prev=25,t.loading=!1,a.finish(25);case 28:case"end":return a.stop()}}),a,null,[[10,19,25,28]])})))()},onFormOpenClick:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=new za,a.prev=1,t.loading=!0,a.next=5,r.openForm(e.name);case 5:a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),console.log("Cannot open form from within template-manager: ",a.t0);case 10:return a.prev=10,t.loading=!1,a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[1,7,10,13]])})))()},onFormDownloadClick:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=new za,a.prev=1,t.loading=!0,a.next=5,r.download("form",e.name);case 5:n=a.sent,s=window.URL.createObjectURL(new Blob([n.data])),i=document.createElement("a"),i.href=s,i.setAttribute("download",e.name+".zip"),document.body.appendChild(i),i.click(),a.next=17;break;case 14:a.prev=14,a.t0=a["catch"](1),console.log("Model Template Download Error",a.t0);case 17:return a.prev=17,t.loading=!1,a.finish(17);case 20:case"end":return a.stop()}}),a,null,[[1,14,17,20]])})))()},onFormRenameClick:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new za,e.next=3,t.$dialog.prompt({title:"Rename Form",text:"Enter the desired new form name:"});case 3:if(r=e.sent,!r){e.next=25;break}return console.log("rename",r,"type",Object(Ga["a"])(r)),r=Cn()(r),e.prev=7,t.loading=!0,e.next=11,a.renameForm(t.form.name,r);case 11:return e.next=13,t.$store.dispatch("templates/refreshSummary");case 13:return e.next=15,t.$store.dispatch("refreshUser");case 15:return e.next=17,t.$store.dispatch("getForms");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](7),t.$dialog.message.error(e.t0);case 22:return e.prev=22,t.loading=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[7,19,22,25]])})))()}}},Mn=On,jn=Object(y["a"])(Mn,xn,wn,!1,null,"95ff7a1e",null),In=jn.exports;E()(jn,{VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VCardTitle:be["a"],VIcon:U["a"],VSpacer:Y["a"]});var En={name:"ModelForms",components:{FormTemplateSummary:In},data:function(){return{loading:!1}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$store.dispatch("templates/refreshSummary");case 4:t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](1),e.$dialog.notify.warning(t.t0.message,{timeout:3e4}),console.log(t.t0);case 10:return t.prev=10,e.loading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,6,10,13]])})))()},computed:{modelForms:function(){var e=this;return this.$store.state.templates.summary.forms.filter((function(t){return t.dataModel===e.$route.params.modelFullName}))}}},Dn=En,Tn=Object(y["a"])(Dn,bn,yn,!1,null,"ee42d974",null),Fn=Tn.exports;E()(Tn,{VBtn:T["a"],VCard:F["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:be["a"],VContainer:we["a"],VFlex:L["a"],VLayout:B["a"],VProgressLinear:Ce["a"],VSpacer:Y["a"]});var Sn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loading?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),e.ready?a("form-template",{attrs:{availableFieldsTemplates:e.availableFieldsTemplates,initialTemplate:e.initialTemplate,scenario:"create"}}):e._e()],1)},Pn=[],Vn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{class:Object.assign({"c-form-template":!0},e.themeClasses),attrs:{fluid:"","grid-list-md":""}},[e.loading?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),a("v-layout",[a("v-flex",{attrs:{sm12:""}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-card-text",[a("v-text-field",{ref:"formNameInput",attrs:{label:"Form Name",disabled:"update"===e.scenario,rules:[function(e){return!!e||"Name is required"}],hint:"should be unique kebab-case string"},on:{input:e.fixFormNameCase},model:{value:e.exportedTemplate.name,callback:function(t){e.$set(e.exportedTemplate,"name",t)},expression:"exportedTemplate.name"}}),a("v-text-field",{attrs:{label:"Data Model",disabled:!0,hint:"Against which data model should this be generated"},model:{value:e.exportedTemplate.dataModel,callback:function(t){e.$set(e.exportedTemplate,"dataModel",t)},expression:"exportedTemplate.dataModel"}}),a("v-layout",{attrs:{row:""}},[a("v-flex",{class:Object.assign({"c-form-template__left-col":!0},e.themeClasses),attrs:{md3:""}},[a("div",{class:Object.assign({"c-form-template__left-col-head":!0},e.themeClasses)},[a("h3",[e._v("Fields")])]),a("div",{class:Object.assign({"c-form-template__left-col-content":!0},e.themeClasses)},[a("draggable",{class:Object.assign({"c-form-template__fields-to-select-bag":!0,"js-fields-to-select":!0},e.themeClasses),attrs:{"force-fallback":!0,group:"fields",sort:!1,ghostClass:"u-drag-ghost",tag:"ul"},model:{value:e.fields,callback:function(t){e.fields=t},expression:"fields"}},e._l(e.fields,(function(t){return a("li",{key:t.name},[a("field-template",{attrs:{isDbRequired:e.dbRequiredColumns.includes(t.name),dataModelFullName:e.exportedTemplate.dataModel,dataModelColumnName:t.name,enabled:!1,newField:!0},model:{value:e.fieldsTemplates[t.name],callback:function(a){e.$set(e.fieldsTemplates,t.name,a)},expression:"fieldsTemplates[field.name]"}})],1)})),0)],1)]),a("v-flex",{class:Object.assign({"c-form-template__selected-fields":!0},e.themeClasses),attrs:{md9:""}},[a("draggable",{staticClass:"groups-drag-bag",attrs:{"force-fallback":!0,group:"groups",handle:".drag-handle",tag:"ul"},model:{value:e.selectedFieldsGroups,callback:function(t){e.selectedFieldsGroups=t},expression:"selectedFieldsGroups"}},e._l(e.selectedFieldsGroups,(function(t){return a("li",{key:t.id},[a("div",{class:Object.assign({"c-form-template__group":!0},e.themeClasses)},[a("div",{class:Object.assign({"c-form-template__group-label":!0},e.themeClasses)},[a("v-icon",{staticClass:"drag-handle mr-3"},[e._v("drag_indicator")]),a("h2",[e._v(e._s(t.label))]),a("v-spacer"),0!==t.id?a("v-btn",{attrs:{icon:"",title:"remove",disabled:t.fields.length>0},on:{click:function(){return e.removeFieldsGroup(t)}}},[a("v-icon",[e._v(" remove ")])],1):e._e(),a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(r){return[a("v-btn",e._g({attrs:{icon:""},on:{click:function(e){t["dialog"]=!t["dialog"]}}},r.on),[a("v-icon",[e._v("edit")])],1)]}}],null,!0),model:{value:t.dialog,callback:function(a){e.$set(t,"dialog",a)},expression:"group.dialog"}},[a("v-card",[a("v-card-text",[a("v-text-field",{attrs:{label:"Group Name",hint:"if it starts with `-`, it will not be shown in form"},model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"group.label"}})],1)],1)],1),a("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){t.expanded=!t.expanded}}},[t.expanded?e._e():a("v-icon",[e._v("arrow_drop_down")]),t.expanded?a("v-icon",[e._v("arrow_drop_up")]):e._e()],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"group.expanded"}],class:Object.assign({"c-form-template__group-fields":!0},e.themeClasses)},[0===t.fields.length?a("v-alert",{staticStyle:{display:"flex"},attrs:{dismissible:"",transition:"scroll-y-transition",color:"info",dense:""},model:{value:e.hintGroupFieldEmpty,callback:function(t){e.hintGroupFieldEmpty=t},expression:"hintGroupFieldEmpty"}},[e._v(" Add fields to this group by dragging them below this message. Empty field-groups will be deleted on save. ")]):e._e(),a("ul",[a("draggable",{attrs:{"force-fallback":!0,group:{name:"fields",pull:e.onSelectedFieldPull},ghostClass:"u-drag-ghost",handle:".field-drag-handle"},model:{value:t.fields,callback:function(a){e.$set(t,"fields",a)},expression:"group.fields"}},e._l(t.fields,(function(t){return a("li",{key:t.name,class:{"list-complete-item":!0,"js-is-db-required":e.dbRequiredColumns.includes(t.name)}},[a("field-template",{ref:"formFieldTemplate",refInFor:!0,attrs:{isDbRequired:e.dbRequiredColumns.includes(t.name),dataModelFullName:e.exportedTemplate.dataModel,dataModelColumnName:t.name,enabled:!0},model:{value:e.fieldsTemplates[t.name],callback:function(a){e.$set(e.fieldsTemplates,t.name,a)},expression:"fieldsTemplates[field.name]"}})],1)})),0)],1)],1)])])})),0),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){return[a("v-btn",e._g({ref:"addGroupButton",attrs:{color:"green darken-4"}},t.on),[e._v("Add a Group")])]}}]),model:{value:e.addGroupDialog,callback:function(t){e.addGroupDialog=t},expression:"addGroupDialog"}},[a("v-card",[a("v-card-text",[a("v-text-field",{ref:"newGroupName",attrs:{label:"Group Name"},model:{value:e.newGroupName,callback:function(t){e.newGroupName=t},expression:"newGroupName"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:function(t){e.addGroupDialog=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"teal"},on:{click:e.addFieldsGroup}},[e._v("ADD")])],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{items:e.availableSupForms,multiple:"",label:"Parent Forms Buttons"},model:{value:e.selectedSupForms,callback:function(t){e.selectedSupForms=t},expression:"selectedSupForms"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{items:e.availableSubForms,multiple:"",label:"Child Forms Buttons"},model:{value:e.selectedSubForms,callback:function(t){e.selectedSubForms=t},expression:"selectedSubForms"}})],1)],1),a("v-alert",{attrs:{dismissible:""},model:{value:e.showErrorSummary,callback:function(t){e.showErrorSummary=t},expression:"showErrorSummary"}},[a("ul",e._l(e.serverValidationErrors,(function(t){return a("li",{key:t.field},[a("strong",[e._v(e._s(t.field))]),e._v(": "+e._s(t.message)+" ")])})),0)])],1)],1)],1)],1)],1),a("v-card",{staticClass:"mt-2"},[a("v-card-text",[a("v-btn",{attrs:{color:"success",loading:e.loading},on:{click:function(){return e.saveTemplate(!1)}}},[e._v("Save")]),a("v-btn",{attrs:{color:"blue",loading:e.loading,disabled:"create"===e.scenario},on:{click:function(){return e.saveTemplate(!0)}}},[e._v("Save & Generate")]),a("v-alert",{attrs:{dismissible:"",color:"info"},model:{value:e.showGenerationLog,callback:function(t){e.showGenerationLog=t},expression:"showGenerationLog"}},[a("ul",e._l(e.generationLog,(function(t,r){return a("li",{key:r},[e._v(" "+e._s(t)+" ")])})),0)]),e.generatorAttributes?a("auto-code-generator",{ref:"autoCodeGenerator",attrs:{generatorAttributes:e.generatorAttributes,generatorId:"dis-form"},model:{value:e.generationDialog,callback:function(t){e.generationDialog=t},expression:"generationDialog"}}):e._e()],1)],1)],1)],1)],1)},An=[],Rn=a("b85c"),Ln=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:Object.assign({"c-field-template":!0},e.themeClasses)},[a("div",{class:Object.assign({"c-field-template__name":!0},e.themeClasses)},[e.enabled||e.newField?a("v-icon",{staticClass:"field-drag-handle mr-3"},[e._v("drag_indicator")]):e._e(),a("h3",[e._v(e._s(e.value.name+" "+(e.isDbRequired?"*":"")))]),a("v-spacer"),e.enabled?a("v-btn",{attrs:{small:"",icon:""},on:{click:function(t){e.fullView=!e.fullView}}},[this.fullView?e._e():a("v-icon",[e._v("arrow_drop_down")]),this.fullView?a("v-icon",[e._v("arrow_drop_up")]):e._e()],1):e._e()],1),e.fullView&&e.enabled?a("div",{class:Object.assign({"c-field-template__form":!0},e.themeClasses)},[a("v-flex",{attrs:{sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-title",[e._v(" Visual Options ")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Label"},model:{value:e.value.label,callback:function(t){e.$set(e.value,"label",t)},expression:"value.label"}}),a("v-text-field",{attrs:{label:"Description"},model:{value:e.value.description,callback:function(t){e.$set(e.value,"description",t)},expression:"value.description"}}),a("v-text-field",{attrs:{label:"Formatter for data table",hint:"A string formatter for the data table, use 'this.' to access column values. Provide an URL to display a link."},model:{value:e.value.formatter,callback:function(t){e.$set(e.value,"formatter",t)},expression:"value.formatter"}}),a("v-checkbox",{attrs:{label:"Show as additional filter"},model:{value:e.value.showAsAdditionalFilter,callback:function(t){e.$set(e.value,"showAsAdditionalFilter",t)},expression:"value.showAsAdditionalFilter"}})],1)],1)],1),a("v-flex",{attrs:{"pl-2":"","pr-2":"",sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-title",[e._v(" Input Options ")]),a("v-card-text",[a("input-template",{attrs:{dataModelFullName:e.dataModelFullName,dataModelColumnName:e.dataModelColumnName},model:{value:e.value.formInput,callback:function(t){e.$set(e.value,"formInput",t)},expression:"value.formInput"}})],1)],1)],1),a("v-flex",{attrs:{"pl-2":"","pr-2":"",sm12:"",md6:"",lg4:""}},[a("v-card",[a("v-card-title",[e._v(" Input Validators ")]),a("v-card-text",[a("validators-select",e._b({attrs:{dataModelFullName:e.dataModelFullName,dataModelColumnName:e.dataModelColumnName,"is-db-required":e.isDbRequired},model:{value:e.value.validators,callback:function(t){e.$set(e.value,"validators",t)},expression:"value.validators"}},"validators-select",e.$attrs,!1))],1)],1)],1)],1):e._e()])},$n=[],Un=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-validators-input"},[a("div",[a("v-checkbox",{attrs:{disabled:e.isDbRequired||e.isPseudoColumn,"hide-details":"",label:"Required"},model:{value:e.validators.required.checked,callback:function(t){e.$set(e.validators.required,"checked",t)},expression:"validators.required.checked"}})],1),a("div",[a("v-checkbox",{attrs:{disabled:"","hide-details":"",label:"Number"},model:{value:e.validators.number.checked,callback:function(t){e.$set(e.validators.number,"checked",t)},expression:"validators.number.checked"}}),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:e.validators.number.checked,expression:"validators.number.checked"}],attrs:{placeholder:"min number"},model:{value:e.validators.number.min,callback:function(t){e.$set(e.validators.number,"min",e._n(t))},expression:"validators.number.min"}}),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:e.validators.number.checked,expression:"validators.number.checked"}],attrs:{placeholder:"max number"},model:{value:e.validators.number.max,callback:function(t){e.$set(e.validators.number,"max",e._n(t))},expression:"validators.number.max"}})],1),a("div",[a("v-checkbox",{attrs:{disabled:"","hide-details":"",label:"String"},model:{value:e.validators.string.checked,callback:function(t){e.$set(e.validators.string,"checked",t)},expression:"validators.string.checked"}}),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:e.validators.string.checked,expression:"validators.string.checked"}],attrs:{placeholder:"min length"},model:{value:e.validators.string.min,callback:function(t){e.$set(e.validators.string,"min",e._n(t))},expression:"validators.string.min"}}),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:e.validators.string.checked,expression:"validators.string.checked"}],attrs:{placeholder:"max length"},model:{value:e.validators.string.max,callback:function(t){e.$set(e.validators.string,"max",e._n(t))},expression:"validators.string.max"}})],1)])},Nn=[],Bn={name:"ValidatorsTemplate",props:{value:{type:Array},isDbRequired:{type:Boolean,default:!1},dataModelFullName:{type:String,required:!0},dataModelColumnName:{type:String,required:!0}},data:function(){return{validators:{required:{checked:!1},number:{checked:!1,min:null,max:null},string:{checked:!1,min:null,max:null}}}},computed:{dataModelTemplate:function(){var e=this;return this.$store.state.templates.models.find((function(t){return t.fullName===e.dataModelFullName}))},columnDataType:function(){return this.dataModelTemplate.columns[this.dataModelColumnName].type},isPseudoColumn:function(){return"pseudo"===this.dataModelTemplate.columns[this.dataModelColumnName].type}},created:function(){this.isDbRequired&&(this.validators.required.checked=!0)},methods:{updateValue:function(){var e=[];for(var t in this.validators)if(this.validators[t].checked){var a=Object.assign({},{type:t},this.validators[t]);delete a.checked,e.push(a)}this.$emit("input",e)}},watch:{validators:{deep:!0,handler:function(){this.updateValue()}},value:{immediate:!0,handler:function(e){var t=this;e.map((function(e){t.validators[e.type].checked=!0,e.min&&(t.validators[e.type].min=e.min),e.max&&(t.validators[e.type].max=e.max)}))}},columnDataType:{immediate:!0,handler:function(e){"integer"!==e&&"double"!==e||(this.validators.number.checked=!0,this.validators.string.checked=!1),"string"!==e&&"string_multiple"!==e||(this.validators.number.checked=!1,this.validators.string.checked=!0)}}}},Wn=Bn,qn=(a("521a"),Object(y["a"])(Wn,Un,Nn,!1,null,"50862fb5",null)),Kn=qn.exports;E()(qn,{VCheckbox:ye["a"],VTextField:Me["a"]});var Gn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-form-inputs-input"},[a("div",[a("v-select",{attrs:{label:"Input Type",items:e.formInputTypeList,disabled:"many_to_many"===e.columnDataType||"one_to_many"===e.columnDataType},model:{value:e.formInput.type,callback:function(t){e.$set(e.formInput,"type",t)},expression:"formInput.type"}}),a("v-checkbox",{attrs:{disabled:e.isPseudoColumn,label:"Disabled"},model:{value:e.formInput.disabled,callback:function(t){e.$set(e.formInput,"disabled",t)},expression:"formInput.disabled"}}),a("v-text-field",{attrs:{label:"Calculate",disabled:e.isPseudoColumn,hint:"Calculate a value, use 'this.' to access column values."},model:{value:e.formInput.calculate,callback:function(t){e.$set(e.formInput,"calculate",t)},expression:"formInput.calculate"}})],1),"select"===e.formInput.type?a("div",{staticClass:"c-form-inputs-input__select-options"},[a("v-radio-group",{attrs:{label:"List Source",disabled:"many_to_many"===e.columnDataType||"one_to_many"===e.columnDataType},on:{change:e.onListSourceChange},model:{value:e.formInput.selectInputOptions.selectSource.type,callback:function(t){e.$set(e.formInput.selectInputOptions.selectSource,"type",t)},expression:"formInput.selectInputOptions.selectSource.type"}},[a("v-radio",{attrs:{label:"Value list",value:"list"}}),a("v-radio",{attrs:{label:"Linked data model",value:"api"}}),"many_to_many"===e.columnDataType?a("v-radio",{attrs:{label:"Related data model",value:"many_relation"}}):e._e(),"one_to_many"===e.columnDataType?a("v-radio",{attrs:{label:"Related data model",value:"one_relation"}}):e._e()],1),"list"===e.formInput.selectInputOptions.selectSource.type?a("v-combobox",{attrs:{label:"List Name",items:e.$store.state.listValues.listNames,clearable:""},on:{change:e.onListNameChange},scopedSlots:e._u([{key:"no-data",fn:function(){return[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[e._v(" This list name does not exist. Press "),a("kbd",[e._v("tab")]),e._v(" to enter it anyway ")])],1)],1)]},proxy:!0}],null,!1,4043033268),model:{value:e.formInput.selectInputOptions.selectSource.listName,callback:function(t){e.$set(e.formInput.selectInputOptions.selectSource,"listName",t)},expression:"formInput.selectInputOptions.selectSource.listName"}}):e._e(),"api"===e.formInput.selectInputOptions.selectSource.type?a("v-select",{attrs:{clearable:"",label:"Linked data model",items:e.availableModels},model:{value:e.formInput.selectInputOptions.selectSource.model,callback:function(t){e.$set(e.formInput.selectInputOptions.selectSource,"model",t)},expression:"formInput.selectInputOptions.selectSource.model"}}):e._e(),"many_relation"===e.formInput.selectInputOptions.selectSource.type||"one_relation"===e.formInput.selectInputOptions.selectSource.type?a("v-select",{attrs:{clearable:"",label:"Related data model",items:e.availableModels,disabled:"many_to_many"===e.columnDataType||"one_to_many"===e.columnDataType},model:{value:e.formInput.selectInputOptions.selectSource.model,callback:function(t){e.$set(e.formInput.selectInputOptions.selectSource,"model",t)},expression:"formInput.selectInputOptions.selectSource.model"}}):e._e(),"api"===e.formInput.selectInputOptions.selectSource.type?a("v-select",{attrs:{clearable:"",label:"Value Column",items:e.availableColumnsWithoutPseudoColumn},model:{value:e.formInput.selectInputOptions.selectSource.valueField,callback:function(t){e.$set(e.formInput.selectInputOptions.selectSource,"valueField",t)},expression:"formInput.selectInputOptions.selectSource.valueField"}}):e._e(),"api"===e.formInput.selectInputOptions.selectSource.type||"many_relation"===e.formInput.selectInputOptions.selectSource.type||"one_relation"===e.formInput.selectInputOptions.selectSource.type?a("v-select",{attrs:{clearable:"",label:"Display column of the related or linked data model",items:e.availableColumns},model:{value:e.formInput.selectInputOptions.selectSource.textField,callback:function(t){e.$set(e.formInput.selectInputOptions.selectSource,"textField",t)},expression:"formInput.selectInputOptions.selectSource.textField"}}):e._e(),"list"===e.formInput.selectInputOptions.selectSource.type?a("v-checkbox",{attrs:{"hide-details":"",label:"Allow Free Text input"},model:{value:e.formInput.selectInputOptions.allowFreeInput,callback:function(t){e.$set(e.formInput.selectInputOptions,"allowFreeInput",t)},expression:"formInput.selectInputOptions.allowFreeInput"}}):e._e(),a("v-text-field",{attrs:{label:"Extra Filter",hint:"Filter the records"},model:{value:e.formInput.selectInputOptions.selectSource.extraFilter,callback:function(t){e.$set(e.formInput.selectInputOptions.selectSource,"extraFilter",t)},expression:"formInput.selectInputOptions.selectSource.extraFilter"}}),"many_to_many"!==e.columnDataType&&"one_to_many"!==e.columnDataType?a("v-checkbox",{attrs:{"hide-details":"",label:"Multiple"},model:{value:e.formInput.selectInputOptions.multiple,callback:function(t){e.$set(e.formInput.selectInputOptions,"multiple",t)},expression:"formInput.selectInputOptions.multiple"}}):e._e()],1):e._e()])},Hn=[],zn=a("efdf"),Qn=a.n(zn),Yn={name:"InputTemplate",props:{value:{type:Object},dataModelFullName:{type:String,required:!0},dataModelColumnName:{type:String,required:!0}},data:function(){return{formInput:{type:null,calculate:"",disabled:!1,selectInputOptions:{selectSource:{type:"list",listName:"",model:"",textField:"remark",valueField:"display",extraFilter:""},allowFreeInput:!1,multiple:!1}}}},mounted:function(){this.formInput.type="many_to_many"===this.columnDataType||"one_to_many"===this.columnDataType?"select":this.value.type,this.formInput.calculate=this.value.calculate,this.formInput.disabled=this.value.disabled||this.isPseudoColumn,this.updateSelectSource()},computed:{availableModels:function(){return this.$store.state.templates.summary.models.filter((function(e){return e.isTableCreated})).map((function(e){return e.fullName}))},availableColumns:function(){var e=this,t=this.$store.state.templates.summary.models.find((function(t){return t.fullName===e.formInput.selectInputOptions.selectSource.model})),a=t?t.table:null;return a?Object.entries(this.$store.state.templates.summary.models.find((function(e){return e.table===a})).columns).map((function(e){return e[0]})):[]},availableColumnsWithoutPseudoColumn:function(){var e=this,t=this.$store.state.templates.summary.models.find((function(t){return t.fullName===e.formInput.selectInputOptions.selectSource.model})),a=t?t.table:null;return a?Object.entries(this.$store.state.templates.summary.models.find((function(e){return e.table===a})).columns).filter((function(e){return"pseudo"!==e[1].type})).map((function(e){return e[0]})):[]},dataModelTemplate:function(){var e=this;return this.$store.state.templates.models.find((function(t){return t.fullName===e.dataModelFullName}))},columnDataType:function(){return this.dataModelTemplate.columns[this.dataModelColumnName].type},columnDisplayColumn:function(){return this.dataModelTemplate.columns[this.dataModelColumnName].displayColumn},columnModel:function(){var e=this;console.log(this.dataModelTemplate.columns[this.dataModelColumnName]);var t=this.$store.state.templates.summary.models.find((function(t){return t.table===e.dataModelTemplate.columns[e.dataModelColumnName].relatedTable}));return t.fullName},formInputTypeList:function(){switch(this.columnDataType){case"integer":return["text","select","switch"];case"double":return["text","select"];case"boolean":return["switch"];case"string":return["text","select","textarea"];case"text":return["textarea"];case"string_multiple":return["select"];case"dateTime":return["datetime"];case"date":return["date"];case"time":return["time"];case"pseudo":return["text","textarea","select"];case"many_to_many":return["select"];case"one_to_many":return["select"];default:throw new Error("Unknown column data type [".concat(this.columnDataType,"] for column ").concat(this.dataModelColumnName))}},isPseudoColumn:function(){return"pseudo"===this.dataModelTemplate.columns[this.dataModelColumnName].type},selectSourceType:function(){return this.formInput.selectInputOptions.selectSource.type}},methods:{updateSelectSource:function(){"select"===this.value.type?(this.formInput.selectInputOptions.selectSource=this.value.selectSource,this.formInput.selectInputOptions.allowFreeInput=this.value.allowFreeInput,this.formInput.selectInputOptions.selectSource.type="many_to_many"===this.columnDataType?"many_relation":"one_to_many"===this.columnDataType?"one_relation":this.selectSourceType,"many_relation"!==this.formInput.selectInputOptions.selectSource.type&&"one_relation"!==this.formInput.selectInputOptions.selectSource.type||(this.formInput.selectInputOptions.selectSource.model=this.columnModel,this.formInput.selectInputOptions.selectSource.textField=this.columnDisplayColumn,this.formInput.selectInputOptions.selectSource.valueField="id"),this.formInput.selectInputOptions.multiple="string_multiple"===this.columnDataType||"many_to_many"===this.columnDataType||this.value.multiple):this.formInput.selectInputOptions.selectSource={type:"list",listName:"",textField:"remark",valueField:"display"}},updateValue:function(){var e={type:this.formInput.type,disabled:this.formInput.disabled||this.isPseudoColumn,calculate:this.formInput.calculate};"select"===this.formInput.type&&(e["selectSource"]=this.formInput.selectInputOptions.selectSource,e["allowFreeInput"]=this.formInput.selectInputOptions.allowFreeInput,e["multiple"]=this.formInput.selectInputOptions.multiple),this.$emit("input",e)},onListNameChange:function(){this.$store.state.listValues.listNames.includes(this.formInput.selectInputOptions.selectSource.listName)||(this.formInput.selectInputOptions.selectSource.listName=Qn()(this.formInput.selectInputOptions.selectSource.listName).toUpperCase())},onListSourceChange:function(){"list"===this.formInput.selectInputOptions.selectSource.type?(this.formInput.selectInputOptions.selectSource.textField="remark",this.formInput.selectInputOptions.selectSource.valueField="display"):"many_relation"===this.formInput.selectInputOptions.selectSource.type||"one_relation"===this.formInput.selectInputOptions.selectSource.type?(this.formInput.selectInputOptions.selectSource.model=this.columnModel,this.formInput.selectInputOptions.selectSource.textField=this.columnDisplayColumn,this.formInput.selectInputOptions.selectSource.valueField="id"):(this.formInput.selectInputOptions.selectSource.textField="",this.formInput.selectInputOptions.selectSource.valueField="")}},watch:{formInput:{deep:!0,handler:function(){this.updateValue()}},"value.type":{handler:function(){this.updateSelectSource()}},"formInput.calculate":{handler:function(){this.formInput.calculate>""&&(this.formInput.disabled=!0)}}}},Zn=Yn,Jn=(a("c626"),Object(y["a"])(Zn,Gn,Hn,!1,null,"61f921ba",null)),Xn=Jn.exports;E()(Jn,{VCheckbox:ye["a"],VCombobox:xe["a"],VListTile:K["a"],VListTileContent:H["a"],VListTileTitle:H["b"],VRadio:Yt["a"],VRadioGroup:Zt["a"],VSelect:Oe["a"],VTextField:Me["a"]});var es={name:"FieldTemplate",mixins:[xr["a"]],components:{InputTemplate:Xn,ValidatorsSelect:Kn},props:{enabled:{type:Boolean,default:!0},newField:{type:Boolean,default:!1},value:{type:Object,required:!0},isDbRequired:{type:Boolean},dataModelFullName:{type:String,required:!0},dataModelColumnName:{type:String,required:!0}},data:function(){return{fullView:!1}}},ts=es,as=Object(y["a"])(ts,Ln,$n,!1,null,null,null),rs=as.exports;E()(as,{VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VCardTitle:be["a"],VCheckbox:ye["a"],VFlex:L["a"],VIcon:U["a"],VSpacer:Y["a"],VTextField:Me["a"]});var ns=a("e34c"),ss={name:"FormTemplate",mixins:[xr["a"]],components:{AutoCodeGenerator:an,FieldTemplate:rs,draggable:O.a},props:{availableFieldsTemplates:{type:Object},scenario:{type:String,required:!0},initialTemplate:{type:Object,required:!0}},data:function(){return{fieldsTemplates:{},fields:[],selectedFieldsGroups:[],exportedTemplate:{name:"",dataModel:"",fields:[]},generatedForms:[],loading:!1,addGroupDialog:!1,newGroupName:"",serverValidationErrors:[],selectedSupForms:[],selectedSubForms:[],generationLog:[],generationDialog:!1,hintGroupFieldEmpty:!0}},mounted:function(){var e=this;this.reset(),this.exportedTemplate.dataModel=this.initialTemplate.dataModel,this.$store.dispatch("templates/getModelTemplate",this.exportedTemplate.dataModel),this.exportedTemplate.name=this.initialTemplate.name,this.selectedSupForms=this.initialTemplate.supForms?Object.keys(this.initialTemplate.supForms):[],this.selectedSubForms=this.initialTemplate.subForms?Object.keys(this.initialTemplate.subForms):[];var t=JSON.parse(JSON.stringify(this.availableFieldsTemplates)),a=function(t){var a=e.initialTemplate.fields[t].name;e.$set(e.fieldsTemplates,a,e.initialTemplate.fields[t]);var r=e.fieldsTemplates[a].group,n=e.selectedFieldsGroups.findIndex((function(e){return e.label===r}));n>-1?(e.selectedFieldsGroups[n].fields.push(e.fieldsTemplates[a]),e.selectedFieldsGroups[n].fields.sort((function(e,t){return e.order-t.order}))):e.selectedFieldsGroups.push({id:e.selectedFieldsGroups.length,label:r,expanded:!0,fields:[e.fieldsTemplates[a]]})};for(var r in this.initialTemplate.fields)a(r);for(var n in t)this.fieldsTemplates[n]||(this.$set(this.fieldsTemplates,n,t[n]),this.fields.push(this.fieldsTemplates[n]))},computed:{dbRequiredColumns:function(){var e=this.initialTemplate.dataModel,t=this.$store.state.templates.models.find((function(t){return t.fullName===e}));return t?Object.keys(this.fieldsTemplates).filter((function(e){return!!t.columns[e]&&t.columns[e].required})):[]},draggableOptions:function(){return{group:"fields",ghostClass:"u-drag-ghost"}},showErrorSummary:{get:function(){return this.serverValidationErrors.length>0},set:function(){this.serverValidationErrors=[]}},availableSupForms:function(){var e=this,t=this.$store.state.templates.summary.models.find((function(t){return t.fullName===e.initialTemplate.dataModel}));if(t&&t.parentModel){var a=this.$store.state.templates.summary.forms.filter((function(e){return e.dataModel===t.parentModel}));if(a.length>0)return a.map((function(e){return e.name}))}return[]},availableSubForms:function(){var e=this,t=this.$store.state.templates.summary.models.filter((function(t){return t.parentModel===e.initialTemplate.dataModel}));if(t.length>0){t=t.map((function(e){return e.fullName}));var a=this.$store.state.templates.summary.forms.filter((function(e){return t.includes(e.dataModel)}));if(a.length>0)return a.map((function(e){return e.name}))}return[]},showGenerationLog:{get:function(){return this.generationLog.length>0},set:function(){this.generationLog=[]}},generatorAttributes:function(){return{templateName:this.exportedTemplate.name}}},created:function(){this.$store.dispatch("listValues/refreshListNames")},methods:{fixFormNameCase:function(){this.exportedTemplate.name=Cn()(this.exportedTemplate.name)},reset:function(){this.fields=[],this.selectedFieldsGroups=[],this.exportedTemplate.name="",this.exportedTemplate.dataModel="",this.exportedTemplate.fields=[]},removeFieldsGroup:function(e){if(0===e.fields.length){var t=this.selectedFieldsGroups.indexOf(e);t>-1&&this.selectedFieldsGroups.splice(t,1)}},removeFieldsEmptyGroup:function(){var e,t=Object(Rn["a"])(this.selectedFieldsGroups);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.removeFieldsGroup(a)}}catch(r){t.e(r)}finally{t.f()}},addFieldsGroup:function(){this.newGroupName&&this.newGroupName.length>0&&this.selectedFieldsGroups.push({id:this.selectedFieldsGroups.length,label:this.newGroupName,expanded:!0,fields:[]}),this.newGroupName=null,this.addGroupDialog=!1},onSelectedFieldPull:function(e,t,a){return!(a&&e&&a.classList.contains("js-is-db-required")&&e.el.classList.contains("js-fields-to-select"))},saveTemplate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.serverValidationErrors=[],this.loading=!0,this.exportedTemplate.fields=[],this.selectedFieldsGroups.map((function(t){t.fields.map((function(a,r){e.exportedTemplate.fields.push(Object(d["a"])(Object(d["a"])({},a),{},{group:t.label,order:r}))}))})),this.$refs.form.validate()?t?this.saveAndGenerate():this.save():(this.loading=!1,this.$refs.form.inputs.forEach((function(t){t.hasError&&e.serverValidationErrors.push({field:t.label,message:t.errorBucket[0]})})))},save:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.loading=!0,"create"!==e.scenario){t.next=10;break}return t.next=5,e.$store.dispatch("templates/createFormTemplate",{template:e.exportedTemplate,subForms:e.selectedSubForms,supForms:e.selectedSupForms});case 5:a=t.sent,e.$dialog.message.success("created successfully",{position:"bottom"}),e.$router.push("/settings/templates-manager/forms/".concat(e.exportedTemplate.dataModel,"/update/").concat(a.name)),t.next=14;break;case 10:if("update"!==e.scenario){t.next=14;break}return t.next=13,e.$store.dispatch("templates/updateFormTemplate",{template:e.exportedTemplate,subForms:e.selectedSubForms,supForms:e.selectedSupForms});case 13:e.$dialog.message.success("saved successfully",{position:"bottom"});case 14:return e.loading=!1,t.abrupt("return",!0);case 18:t.prev=18,t.t0=t["catch"](0),t.t0.response&&422===t.t0.response.status?e.serverValidationErrors=t.t0.response.data:e.$dialog.notify.warning(t.t0.message);case 21:return t.prev=21,e.loading=!1,e.removeFieldsEmptyGroup(),t.finish(21);case 25:case"end":return t.stop()}}),t,null,[[0,18,21,25]])})))()},saveAndGenerate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.generationLog.push("Step 1/2: saving the template"),t.next=3,e.save();case 3:if(a=t.sent,!a){t.next=25;break}return e.loading=!0,t.prev=6,e.generationLog.push("template was saved successfully"),e.generationLog.push("Step 2/2: generating form classes and component"),e.generationDialog=!0,t.next=12,e.$nextTick();case 12:return t.next=14,e.$refs.autoCodeGenerator.generate();case 14:return r=t.sent,"generated"===r?e.generationLog.push("classes and component were generated successfully"):e.generationLog.push("some files will be overwritten. choose how you want to continue."),n=new ns["a"](e.exportedTemplate.name),n.clear(),t.next=20,e.$store.dispatch("refreshUser",null,{root:!0});case 20:return t.next=22,e.$store.dispatch("getForms");case 22:return t.prev=22,e.loading=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[6,,22,25]])})))()}},watch:{hintGroupFieldEmpty:function(){this.hintGroupFieldEmpty=!0}}},is=ss,os=Object(y["a"])(is,Vn,An,!1,null,null,null),ls=os.exports;E()(os,{VAlert:vt["a"],VBtn:T["a"],VCard:F["a"],VCardActions:S["a"],VCardText:S["b"],VContainer:we["a"],VDialog:V["a"],VFlex:L["a"],VForm:ke["a"],VIcon:U["a"],VLayout:B["a"],VProgressLinear:Ce["a"],VSelect:Oe["a"],VSpacer:Y["a"],VTextField:Me["a"]});var cs={name:"NewFormTemplate",components:{FormTemplate:ls},data:function(){return{loading:!1,availableFieldsTemplates:{},initialTemplate:[],ready:!1}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.$setTitle("New Form Template"),a=new za,t.next=5,a.getFormTemplateSeed(e.$route.params.modelFullName);case 5:r=t.sent,e.availableFieldsTemplates=r.data.availableFieldTemplates,e.initialTemplate=r.data.initialTemplate,e.ready=!0,e.loading=!1;case 10:case"end":return t.stop()}}),t)})))()}},us=cs,ds=Object(y["a"])(us,Sn,Pn,!1,null,"5b570c12",null),ms=ds.exports;E()(ds,{VProgressLinear:Ce["a"]});var ps=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loading?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),e.ready?a("form-template",{attrs:{availableFieldsTemplates:e.availableFieldsTemplates,initialTemplate:e.initialTemplate,scenario:"update"}}):e._e()],1)},fs=[],_s={name:"UpdateFormTemplate",components:{FormTemplate:ls},data:function(){return{loading:!1,availableFieldsTemplates:{},initialTemplate:[],ready:!1}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,e.$setTitle("Update Form Template"),t.next=5,e.$store.dispatch("templates/getFormTemplate",e.$route.params.formName);case 5:return a=e.$store.state.templates.forms.find((function(t){return t.name===e.$route.params.formName})),r=a.fields.reduce((function(e,t,a){return e[t.name]=t,e}),{}),n=new za,t.next=10,n.getFormTemplateSeed(a.dataModel);case 10:s=t.sent,e.availableFieldsTemplates=Object.assign(s.data.availableFieldTemplates,r),e.initialTemplate=JSON.parse(JSON.stringify(a)),e.ready=!0,t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),e.$dialog.notify.warning(t.t0.message,{timeout:3e4}),console.log(t.t0);case 20:return t.prev=20,e.loading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,16,20,23]])})))()}},vs=_s,hs=Object(y["a"])(vs,ps,fs,!1,null,"1f0c9372",null),gs=hs.exports;E()(hs,{VProgressLinear:Ce["a"]});var bs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{staticClass:"c-404",attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{shrink:""}},[a("span",{staticClass:"c-404__code"},[e._v(" HTTP Error 404 ")])]),a("v-flex",{attrs:{shrink:""}},[a("p",{staticClass:"title"},[e._v(" Page not found. ")]),a("router-link",{attrs:{to:"/"}},[e._v("Back to the Dashboard")])],1)],1)},ys=[],xs={name:"NotFound"},ws=xs,ks=(a("5637"),Object(y["a"])(ws,bs,ys,!1,null,null,null)),Cs=ks.exports;E()(ks,{VFlex:L["a"],VLayout:B["a"]});var Os=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[""===!e.profileForm.email?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),a("v-flex",{attrs:{sm12:"",md6:"",lg4:""}},[a("v-card",{attrs:{color:"blue-grey",dark:""}},[a("v-card-title",[e._v(" My Profile ")]),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Name"},model:{value:e.profileForm.name,callback:function(t){e.$set(e.profileForm,"name",t)},expression:"profileForm.name"}}),a("v-text-field",{attrs:{label:"Email"},model:{value:e.profileForm.email,callback:function(t){e.$set(e.profileForm,"email",t)},expression:"profileForm.email"}}),a("dis-server-validation-errors-view",{model:{value:e.profileFormValidationErrors,callback:function(t){e.profileFormValidationErrors=t},expression:"profileFormValidationErrors"}}),a("v-btn",{attrs:{loading:e.isSavingProfile,color:"success"},on:{click:e.onSaveProfileClick}},[e._v("Save")])],1)],1)],1)],1),a("v-flex",{attrs:{sm12:"",md6:"",lg4:""}},[a("v-card",{attrs:{color:"blue-grey",dark:""}},[a("v-card-title",[e._v(" Change Password ")]),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{type:"password",label:"Old Password"},model:{value:e.changePasswordForm.oldPassword,callback:function(t){e.$set(e.changePasswordForm,"oldPassword",t)},expression:"changePasswordForm.oldPassword"}}),a("v-text-field",{attrs:{type:"password",label:"New Password"},model:{value:e.changePasswordForm.newPassword,callback:function(t){e.$set(e.changePasswordForm,"newPassword",t)},expression:"changePasswordForm.newPassword"}}),a("v-text-field",{attrs:{type:"password",label:"New Password Confirmation"},model:{value:e.changePasswordForm.newPasswordConfirmation,callback:function(t){e.$set(e.changePasswordForm,"newPasswordConfirmation",t)},expression:"changePasswordForm.newPasswordConfirmation"}}),a("dis-server-validation-errors-view",{model:{value:e.changePasswordFormValidationErrors,callback:function(t){e.changePasswordFormValidationErrors=t},expression:"changePasswordFormValidationErrors"}}),a("v-btn",{attrs:{loading:e.isChangingPassword,color:"success"},on:{click:e.onChangePasswordClick}},[e._v("Change")])],1)],1)],1)],1),a("v-flex",{attrs:{sm12:"",md6:"",lg4:""}},[a("v-card",{attrs:{color:"blue-grey",dark:""}},[a("v-card-title",[e._v(" Assigned Permissions ")]),a("v-card-text",e._l(e.$store.state.loggedInUser.permissions,(function(t,r){return a("v-chip",{key:r},[e._v(e._s(t))])})),1)],1)],1)],1)],1)},Ms=[],js={name:"AccountSettings",data:function(){return{isLoading:!1,profileForm:{name:"",email:""},profileFormValidationErrors:[],isSavingProfile:!1,changePasswordForm:{oldPassword:"",newPassword:"",newPasswordConfirmation:""},changePasswordFormValidationErrors:[],isChangingPassword:!1}},created:function(){this.refreshProfile()},methods:{refreshProfile:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("refreshUser");case 2:e.profileForm.name=e.$store.state.loggedInUser.profile.name,e.profileForm.email=e.$store.state.loggedInUser.email;case 4:case"end":return t.stop()}}),t)})))()},onSaveProfileClick:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isSavingProfile=!0,e.profileFormValidationErrors=[],t.next=5,e.$store.dispatch("account/updateProfile",e.profileForm);case 5:return t.next=7,e.refreshProfile();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),t.t0.response&&422===t.t0.response.status&&(e.profileFormValidationErrors=t.t0.response.data);case 12:return t.prev=12,e.isSavingProfile=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},onChangePasswordClick:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isChangingPassword=!0,e.changePasswordFormValidationErrors=[],t.next=5,e.$store.dispatch("account/changePassword",e.changePasswordForm);case 5:return e.$dialog.message.success("Password updated successfully"),e.changePasswordForm={oldPassword:"",newPassword:"",newPasswordConfirmation:""},t.next=9,e.refreshProfile();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),t.t0.response&&422===t.t0.response.status&&(e.changePasswordFormValidationErrors=t.t0.response.data);case 14:return t.prev=14,e.isChangingPassword=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,11,14,17]])})))()}}},Is=js,Es=a("cc20"),Ds=Object(y["a"])(Is,Os,Ms,!1,null,null,null),Ts=Ds.exports;E()(Ds,{VBtn:T["a"],VCard:F["a"],VCardText:S["b"],VCardTitle:be["a"],VChip:Es["a"],VContainer:we["a"],VFlex:L["a"],VForm:ke["a"],VLayout:B["a"],VProgressLinear:Ce["a"],VTextField:Me["a"]});var Fs=function(){return Promise.resolve().then(a.bind(null,"3a08"))},Ss=function(){return Promise.resolve().then(a.bind(null,"1182"))},Ps=function(){return a.e("chunk-6d210644").then(a.bind(null,"7d12"))},Vs=[{path:"/",component:{render:function(e){return e("router-view")}},meta:{requiresAuth:!0,breadcrumb:"Dashboard"},children:[{path:"files-upload",meta:{requiredAuth:!0,breadcrumb:"Upload Files"},component:Ps},{path:"forms",meta:{requiresAuth:!0,breadcrumb:"Forms",breadcrumbDisabled:!0},component:{render:function(e){return e("router-view")}},children:[{path:"",component:Fs}].concat(Object(ne["a"])(ie["a"]),[{path:":formName-form/:id?",component:Ss,meta:{requiresAuth:!0,breadcrumb:function(e){return"".concat(e.formName)}}}])},{path:"",component:ka},{path:"settings",component:{render:function(e){return e("router-view")}},meta:{requiresAuth:!0,breadcrumb:"Settings"},children:[{path:"",name:"settings",component:Ea},{path:"templates-manager",component:{render:function(e){return e("router-view")}},meta:{breadcrumb:"Templates Manager"},children:[{path:"",component:fr,name:"templates-manager",meta:{requiresAuth:!0}},{path:"forms/:modelFullName",component:{render:function(e){return e("router-view")}},meta:{requiresAuth:!0,breadcrumb:function(e){return"".concat(e.modelFullName,"'s Forms")}},children:[{path:"",name:"model-forms",component:Fn},{path:"new",component:ms,name:"new-model-form-template",meta:{requiresAuth:!0,breadcrumb:function(e){return"New ".concat(e.modelFullName,"'s Form")}}},{path:"update/:formName",component:gs,name:"update-model-form-template",meta:{requiresAuth:!0,breadcrumb:function(e){return"Edit ".concat(e.formName,"'s Template")}}}]},{path:"data-models/new/:moduleName",component:mn,name:"new-data-model-template",meta:{requiresAuth:!0,breadcrumb:function(e){return"Create Model in ".concat(e.moduleName)}}},{path:"data-models/update/:modelFullName",component:gn,name:"update-data-model-template",meta:{requiresAuth:!0,breadcrumb:function(e){return"Edit ".concat(e.modelFullName,"'s Template")}}}]},{path:"account",component:{render:function(e){return e("router-view")}},meta:{breadcrumb:"Account Settings"},children:[{path:"",component:Ts,name:"account-settings",meta:{requiresAuth:!0}}]}]}]},{path:"/login",component:Ra,name:"login"},{path:"/reset-password/:userId/:code",component:Wa,meta:{requiresAuth:!1}},{path:"*",component:Cs,meta:{requiresAuth:!0,breadcrumb:""}}],As=Vs,Rs=new se["a"]({mode:"hash",routes:Object(ne["a"])(As)});Rs.beforeEach((function(e,t,a){var r=new m["a"];e.matched.some((function(e){return e.meta.requiresAuth}))&&!r.isLoggedIn()?a({path:"/login",query:{redirect:e.fullPath}}):a()}));var Ls,$s,Us=Rs,Ns=a("ade3"),Bs="set table created",Ws="refresh summary",qs="refresh form template",Ks="refresh model template",Gs="delete model template",Hs="delete form template",zs="refresh behaviors list",Qs={namespaced:!0,state:{summary:{modules:[],models:[],forms:[]},forms:[],models:[],behaviors:[],modelsFilterString:""},getters:{},actions:{refreshSummary:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,r=new za,t.next=4,r.getSummary();case 4:return n=t.sent,a(Ws,n.data),t.abrupt("return",!0);case 7:case"end":return t.stop()}}),t)})))()},refreshBehaviors:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,r=new za,t.next=4,r.getBehaviors();case 4:return n=t.sent,a(zs,n.data),t.abrupt("return",!0);case 7:case"end":return t.stop()}}),t)})))()},createFormTemplate:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=t.template,s=t.subForms,i=t.supForms,console.log({template:n,subForms:s,supForms:i}),o=new za,a.next=6,o.createForm(n,s,i);case 6:return l=a.sent,r(Ks,{formName:l.data.name,template:l.data}),a.abrupt("return",l.data);case 9:case"end":return a.stop()}}),a)})))()},updateFormTemplate:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=t.template,s=t.subForms,i=t.supForms,o=new za,a.next=5,o.updateForm(n.name,n,s,i);case 5:return l=a.sent,r(Ks,{formName:l.data.name,template:l.data}),a.abrupt("return",l.data);case 8:case"end":return a.stop()}}),a)})))()},deleteFormTemplate:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=new za,a.next=4,n.deleteForm(t);case 4:s=a.sent,204===s.status&&r(Hs,t);case 6:case"end":return a.stop()}}),a)})))()},getFormTemplate:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=new za,a.next=4,n.getFormTemplate(t);case 4:return s=a.sent,r(qs,{formName:t,template:s.data}),a.abrupt("return",!0);case 7:case"end":return a.stop()}}),a)})))()},createModelTemplate:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=new za,a.next=4,n.createModel(t);case 4:return s=a.sent,r(Ks,{modelFullName:s.data.fullName,template:s.data}),a.abrupt("return",s.data);case 7:case"end":return a.stop()}}),a)})))()},updateModelTemplate:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=t.fullName,s=t.template,i=new za,a.next=5,i.updateModel(n,s);case 5:return o=a.sent,r(Ks,{modelFullName:o.data.fullName,template:o.data}),a.abrupt("return",o.data);case 8:case"end":return a.stop()}}),a)})))()},deleteModelTemplate:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=new za,a.next=4,n.deleteModel(t);case 4:s=a.sent,204===s.status&&r(Gs,t);case 6:case"end":return a.stop()}}),a)})))()},createModelTable:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.dispatch,e.commit,r=new za,a.next=4,r.createModelTable(t);case 4:return a.abrupt("return",!0);case 5:case"end":return a.stop()}}),a)})))()},getModelTemplate:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=new za,a.next=4,n.getModelTemplate(t);case 4:return s=a.sent,r(Ks,{modelFullName:t,template:s.data}),a.abrupt("return",s.data);case 7:case"end":return a.stop()}}),a)})))()},cgView:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.commit,r=t.id,n=t.generatorAttributes,s=t.generate,i=t.answers,o=new za,a.next=5,o.cgView(r,n,s,i);case 5:return l=a.sent,a.abrupt("return",l);case 7:case"end":return a.stop()}}),a)})))()},cgDiff:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.commit,r=t.id,n=t.generatorAttributes,s=t.file,i=new za,a.next=5,i.cgDiff(r,n,s);case 5:return o=a.sent,a.abrupt("return",o);case 7:case"end":return a.stop()}}),a)})))()},cgPreview:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.commit,r=t.id,n=t.generatorAttributes,s=t.file,i=new za,a.next=5,i.cgPreview(r,n,s);case 5:return o=a.sent,a.abrupt("return",o);case 7:case"end":return a.stop()}}),a)})))()}},mutations:(Ls={},Object(Ns["a"])(Ls,Ws,(function(e,t){e.summary=t})),Object(Ns["a"])(Ls,zs,(function(e,t){e.behaviors=t})),Object(Ns["a"])(Ls,qs,(function(e,t){var a=t.formName,r=t.template;e.forms=[].concat(Object(ne["a"])(e.forms.filter((function(e){return e.name!==a}))),[r])})),Object(Ns["a"])(Ls,Ks,(function(e,t){var a=t.modelFullName,r=t.template;e.models=[].concat(Object(ne["a"])(e.models.filter((function(e){return e.fullName!==a}))),[r])})),Object(Ns["a"])(Ls,Bs,(function(e,t){t.timestamp,t.modelName})),Object(Ns["a"])(Ls,Gs,(function(e,t){console.log("COMMIT delete model",t),console.log(e.summary.forms),e.summary.forms=e.summary.forms.filter((function(e){return e.dataModel!==t})),console.log(e.summary.forms),e.summary.models=e.summary.models.filter((function(e){return e.fullName!==t})),e.forms=e.forms.filter((function(e){return e.dataModel!==t})),e.models=e.models.filter((function(e){return e.fullName!==t}))})),Object(Ns["a"])(Ls,Hs,(function(e,t){e.summary.forms=e.summary.forms.filter((function(e){return e.name!==t})),e.forms=e.forms.filter((function(e){return e.name!==t}))})),Object(Ns["a"])(Ls,"SET_MODELS_FILTER_STRING",(function(e,t){e.modelsFilterString=t})),Ls)},Ys="refresh list names list",Zs={namespaced:!0,state:{listNames:[]},getters:{},actions:{refreshListNames:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,r=new mt["a"],t.next=4,r.getListNames();case 4:return n=t.sent,a(Ys,n.data),t.abrupt("return",!0);case 7:case"end":return t.stop()}}),t)})))()}},mutations:Object(Ns["a"])({},Ys,(function(e,t){e.listNames=t}))},Js=function(e){Object(Ge["a"])(a,e);var t=Object(He["a"])(a);function a(){var e;return Object(qe["a"])(this,a),e=t.call(this),e._controller=e.baseUrl+"api/v1/importer",e}return Object(Ke["a"])(a,[{key:"getList",value:function(){return Qe.a.get("".concat(this._controller),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}}]),a}(m["a"]),Xs=Js,ei="refresh importers names list",ti={namespaced:!0,state:{list:[]},getters:{},actions:{refreshList:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,r=new Xs,t.next=4,r.getList();case 4:return n=t.sent,a(ei,n),t.abrupt("return",!0);case 7:case"end":return t.stop()}}),t)})))()}},mutations:Object(Ns["a"])({},ei,(function(e,t){e.list=t}))},ai=new ga["a"],ri="set app config",ni="set user config",si={namespaced:!0,state:{appConfig:{},userConfig:{}},getters:{appName:function(e){return e.appConfig["AppName"]||"Drilling Information System"},appShortName:function(e){return e.appConfig["AppShortName"]||"mDIS"},copyrightText:function(e){return e.appConfig["CopyrightText"]||"ICDP 2021"},copyrightLink:function(e){return e.appConfig["CopyrightLink"]||"https://www.icdp-online.org/"},aboutLink:function(e){return e.appConfig["AboutLink"]||"https://data.icdp-online.org/mdis-docs/"},helpLink:function(e){return e.appConfig["HelpLink"]||"https://data.icdp-online.org/mdis-docs/"},canSendEmails:function(e){return!!e.appConfig["CanSendEmails"]&&e.appConfig["CanSendEmails"]},appIcon:function(e){return"img/logos/"+(e.appConfig["AppIcon"]?e.appConfig["AppIcon"]:"icon_mDIS.png")}},actions:{refreshAppConfig:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,ai.getAppConfig();case 3:r=t.sent,a(ri,r);case 5:case"end":return t.stop()}}),t)})))()},refreshUserConfig:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,ai.getUserConfig();case 3:r=t.sent,a(ni,r);case 5:case"end":return t.stop()}}),t)})))()},saveUserConfig:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,a.next=3,ai.saveUserConfig(t);case 3:n=a.sent,r(ni,n);case 5:case"end":return a.stop()}}),a)})))()}},mutations:($s={},Object(Ns["a"])($s,ri,(function(e,t){e.appConfig=t})),Object(Ns["a"])($s,ni,(function(e,t){e.userConfig=t})),$s)},ii=function(e){Object(Ge["a"])(a,e);var t=Object(He["a"])(a);function a(){var e;return Object(qe["a"])(this,a),e=t.call(this),e._controller=e.baseUrl+"api/v1/widgets",e}return Object(Ke["a"])(a,[{key:"get",value:function(){return Qe.a.get("".concat(this._controller,"?sort=order"),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"post",value:function(e){return Qe.a.post("".concat(this._controller),e,{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"duplicate",value:function(e){return Qe.a.post("".concat(this._controller,"/duplicate/").concat(e),null,{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"put",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Qe.a.put("".concat(this._controller).concat(e?"/"+e:""),t,{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"delete",value:function(e){return Qe.a.delete("".concat(this._controller,"/").concat(e),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}}]),a}(m["a"]),oi=ii,li=new Sa,ci={namespaced:!0,state:{},actions:{updateProfile:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.commit,a.abrupt("return",li.updateProfile(t));case 2:case"end":return a.stop()}}),a)})))()},changePassword:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.commit,a.abrupt("return",li.changePassword(t));case 2:case"end":return a.stop()}}),a)})))()}}};r["default"].use(p["a"]);var ui={visible:!1,y:null,x:null,color:"info",timeout:6e3,mobile:!1,multiLine:!0,text:""},di=new p["a"].Store({modules:{templates:Qs,listValues:Zs,importers:ti,config:si,account:ci},state:{loggedInUser:null,snackbar:ui,isDark:!0,appForms:[],gitInfo:{version:Object({NODE_ENV:"production",BASE_URL:"/"}).VERSION,commit:Object({NODE_ENV:"production",BASE_URL:"/"}).COMMIT,branch:Object({NODE_ENV:"production",BASE_URL:"/"}).BRANCH,commitdate:Object({NODE_ENV:"production",BASE_URL:"/"}).COMMITDATE},widgets:[],compactUI:!!_.a.get("compact")&&_.a.get("compact")},mutations:{TOGGLE_COMPACT_UI:function(e){e.compactUI=!e.compactUI},SET_LOGGED_IN_USER:function(e,t){e.loggedInUser=t},SHOW_SNACKBAR:function(e,t){e.snackbar.multiline=t.text&&t.text.length>50,e.snackbar=Object.assign(ui,t),e.snackbar.visible=!0},CLOSE_SNACKBAR:function(e){e.snackbar.visible=!1,e.snackbar=ui},IS_DARK:function(e,t){e.isDark=t},APP_FORMS:function(e,t){e.appForms=t},SET_WIDGETS:function(e,t){e.widgets=t},SET_WIDGET_SETTINGS:function(e,t){var a=t.id,r=t.data;e.widgets.find((function(e){return e.id===a})).title=r.title,e.widgets.find((function(e){return e.id===a})).subtitle=r.subtitle,e.widgets.find((function(e){return e.id===a})).color=r.color,e.widgets.find((function(e){return e.id===a})).is_dark=r.is_dark,e.widgets.find((function(e){return e.id===a})).active=r.active,e.widgets.find((function(e){return e.id===a})).xs_size=r.xs_size,e.widgets.find((function(e){return e.id===a})).sm_size=r.sm_size,e.widgets.find((function(e){return e.id===a})).md_size=r.md_size,e.widgets.find((function(e){return e.id===a})).lg_size=r.lg_size,e.widgets.find((function(e){return e.id===a})).extraSettings=r.extraSettings},SET_ACTIVE_WIDGETS_ORDER:function(e,t){for(var a=function(a){var r=t.find((function(t){return t.id===e.widgets[a].id}));r?(e.widgets[a].order=r.order,e.widgets[a].active=1):e.widgets[a].active=0},r=0;r<e.widgets.length;r++)a(r)},ADD_WIDGET:function(e,t){e.widgets.push(t)},REMOVE_WIDGET:function(e,t){e.widgets=e.widgets.filter((function(e){return e.id!==t}))}},actions:{initApp:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,r=e.dispatch,t.next=3,r("config/refreshAppConfig");case 3:if(!ga["a"].user){t.next=11;break}return a("SET_LOGGED_IN_USER",ga["a"].user),t.next=7,r("templates/refreshSummary");case 7:return t.next=9,r("getForms");case 9:return t.next=11,r("config/refreshUserConfig");case 11:case"end":return t.stop()}}),t)})))()},getForms:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,r=e.getters,n=new ga["a"],t.next=4,n.getForms();case 4:return s=t.sent,i=[],Object.keys(s.data).forEach((function(e){i=[].concat(Object(ne["a"])(i),Object(ne["a"])(s.data[e]))})),i=i.filter((function(e){return"files"!==e.key})),i.sort((function(e,t){var a=r.orderedDataModels.findIndex((function(t){return t===e.dataModel})),n=r.orderedDataModels.findIndex((function(e){return e===t.dataModel}));return-1===n?-1:-1===a?1:a-n})),o=i.reduce((function(e,t){return e[t.module]?e[t.module].push(t):e[t.module]=[t],e}),{}),a("APP_FORMS",o),t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t)})))()},refreshUser:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,r=new ga["a"],t.next=4,r.refresh();case 4:n=t.sent,a("SET_LOGGED_IN_USER",n);case 6:case"end":return t.stop()}}),t)})))()},getWidgets:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,r=new oi,t.next=4,r.get();case 4:n=t.sent,a("SET_WIDGETS",n);case 6:case"end":return t.stop()}}),t)})))()},reorderActiveWidgets:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=e.state,s=new oi,i=n.widgets.filter((function(e){return!t.find((function(t){return t.id===e.id}))})).map((function(e){return{id:e.id,active:0}})),o=t.map((function(e,t){return{id:e.id,order:t,active:1}})),r("SET_ACTIVE_WIDGETS_ORDER",o),a.next=7,s.put(null,[].concat(Object(ne["a"])(o),Object(ne["a"])(i)));case 7:case"end":return a.stop()}}),a)})))()},saveWidgetSettings:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=t.id,s=t.data,i=new oi,a.next=5,i.put(n,s);case 5:o=a.sent,r("SET_WIDGET_SETTINGS",{id:o.id,data:o});case 7:case"end":return a.stop()}}),a)})))()},duplicateWidget:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=t.id,s=new oi,a.next=5,s.duplicate(n);case 5:i=a.sent,r("ADD_WIDGET",i);case 7:case"end":return a.stop()}}),a)})))()},deleteWidget:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=t.id,s=new oi,a.next=5,s.delete(n);case 5:r("REMOVE_WIDGET",n);case 6:case"end":return a.stop()}}),a)})))()}},getters:{loggedInUser:function(e){return e.loggedInUser},snackbar:function(e){return e.snackbar},isDark:function(e){return e.isDark},userCanEditDashboard:function(e){return e.loggedInUser&&(e.loggedInUser.roles.includes("sa")||e.loggedInUser.roles.includes("developer"))},orderedDataModels:function(e){var t=e.templates.summary.models.map((function(e){return{fullName:e.fullName,parentModel:e.parentModel}})),a=[],r=t.findIndex((function(e){return"ProjectProgram"===e.fullName}));do{a.push(t[r]),t.slice(r,1),r=t.findIndex((function(e){return e.parentModel===a[a.length-1].fullName}))}while(r>-1);return a.map((function(e){return e.fullName}))},getCompactUI:function(e){return e.compactUI}}}),mi=di,pi=(a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("a15b"),a("8a79"),a("8ba4"),"yyyy-MM-dd HH:mm"),fi=function(e,t){if(t=t||pi,!e)return new yi(new Date);try{return"string"!==typeof e||e.match(/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$/g)||(e=_i(e,t)),new yi(new Date(e))}catch(a){return console.warn(a.message),new yi("Invalid")}},_i=function(e,t){if(t.includes("MMM")){var a=e.match(new RegExp(hi.join("|")));if(0===a.length)throw new Error("normalizeDateString: date does not match format ".concat(e," : ").concat(t));e=e.replace(a[0],bi(a[0])),t=t.replace("MMM","MM")}var r=e.match(/(\d+)/g),n=0,s={};if(t.replace(/(yyyy|dd|MM|HH|mm)/g,(function(e){s[e]=n++})),5!==Object.keys(s).length)throw new Error("dateTime() date string should have 5 segments like yyyy-MM-dd HH:mm, ".concat(e));for(var i in s)if(r[s[i]].length!==i.length)throw new Error("".concat(r[s[i]]," length does not match ").concat(i," length"));return"".concat(r[s["yyyy"]],"-").concat(r[s["MM"]],"-").concat(r[s["dd"]],"T").concat(r[s["HH"]],":").concat(r[s["mm"]],":00").concat(e.endsWith("Z")?"Z":"")},vi=function(e){if(e+="",e.length>2)throw new Error("padStartZeros does not accept strings with more than two characters '".concat(e,"'"));return 2===e.length?e:"0".concat(e)},hi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],gi=function(e){if(Number.isInteger(e)&&e>0&&e<13)return hi[e-1];throw new Error("monthName: ".concat(e," is not a valid month order"))},bi=function(e){var t=hi.indexOf(e)+1;if(t>0)return t<10?"0"+t:t;throw new Error("monthOrder: ".concat(e," is not a valid month name"))},yi=function(){function e(t){Object(qe["a"])(this,e),t instanceof Date&&!isNaN(t)?(this._dateObject=t,this._VALID=!0):this._VALID=!1}return Object(Ke["a"])(e,[{key:"dateObject",get:function(){return this._dateObject}},{key:"isValid",get:function(){return this._VALID}},{key:"asUtc",value:function(){return this._VALID?(this._dateObject.setMinutes(this._dateObject.getMinutes()-this._dateObject.getTimezoneOffset()),fi(this._dateObject)):"Invalid Date"}},{key:"toUtc",value:function(){return this._VALID?(this._dateObject.setMinutes(this._dateObject.getMinutes()+this._dateObject.getTimezoneOffset()),fi(this._dateObject)):"Invalid Date"}},{key:"formatForDB",value:function(){return this._VALID?"".concat(this._dateObject.getFullYear(),"-").concat(vi(this._dateObject.getMonth()+1),"-").concat(vi(this._dateObject.getDate())," ").concat(vi(this._dateObject.getHours()),":").concat(vi(this._dateObject.getMinutes())):"Invalid Date"}},{key:"formatForDisplay",value:function(){return this._VALID?"".concat(vi(this._dateObject.getDate()),"-").concat(gi(this._dateObject.getMonth()+1),"-").concat(this._dateObject.getFullYear()," ").concat(vi(this._dateObject.getHours()),":").concat(vi(this._dateObject.getMinutes())):"Invalid Date"}},{key:"formatForInput",value:function(){return this._VALID?"".concat(this._dateObject.getFullYear(),"-").concat(vi(this._dateObject.getMonth()+1),"-").concat(vi(this._dateObject.getDate()),"T").concat(vi(this._dateObject.getHours()),":").concat(vi(this._dateObject.getMinutes())):"Invalid Date"}}]),e}(),xi=fi,wi={install:function(e,t){e.prototype.$dateTime=xi,e.filter("formatTimestamp",(function(e){if(e)return xi(e).formatForDisplay()}))}},ki=wi,Ci={install:function(e,t){e.prototype.$setTitle=function(e,t){document.title=t?"".concat(e," | ").concat(t,"  - mDIS"):"".concat(e," - mDIS")}}},Oi=Ci,Mi={computed:{userIsAdmin:function(){return this.$store.state.loggedInUser&&this.$store.state.loggedInUser.roles.includes("sa")},userIsDeveloper:function(){return this.$store.state.loggedInUser&&(this.$store.state.loggedInUser.roles.includes("developer")||this.$store.state.loggedInUser.roles.includes("sa"))},userIsOperator:function(){return this.$store.state.loggedInUser&&(this.$store.state.loggedInUser.roles.includes("operator")||this.$store.state.loggedInUser.roles.includes("developer")||this.$store.state.loggedInUser.roles.includes("sa"))},userIsViewer:function(){return this.$store.state.loggedInUser&&(this.$store.state.loggedInUser.roles.includes("viewer")||this.$store.state.loggedInUser.roles.includes("operator")||this.$store.state.loggedInUser.roles.includes("developer")||this.$store.state.loggedInUser.roles.includes("sa"))}}},ji=a("8a60"),Ii=a.n(ji);Ii.a.prototype.stopCallback=function(e,t,a){return!1};var Ei=Ii.a,Di=function(e,t){return e.preventDefault(),console.log("MOUSETRAP trigger"),t.$emit("mousetrap",e),!1},Ti=function(e,t){return e.preventDefault(),e.stopPropagation(),console.log("MOUSETRAP trigger"),t.$emit("mousetrap",e),!1},Fi=function(){return{bind:function(e,t,a){a=a.componentInstance?a.componentInstance:a.context,Ei.bind(t.value.keys,(function(e){return Di(e,a)}))},unbind:function(e,t,a){Ei.unbind(t.value.keys)},update:function(e,t,a){a=a.componentInstance?a.componentInstance:a.context,t.value.disabled?Ei.unbind(t.value.keys):Ei.bind(t.value.keys,(function(e){return Di(e,a)}))}}}(),Si=Fi,Pi=function(){return{bind:function(e,t,a){a=a.componentInstance?a.componentInstance:a.context,Ei(e).bind(t.value.keys,(function(e){return Ti(e,a)}))},unbind:function(e,t,a){Ei(e).unbind(t.value.keys)},update:function(e,t,a){a=a.componentInstance?a.componentInstance:a.context,t.value.disabled?Ei(e).unbind(t.value.keys):Ei(e).bind(t.value.keys,(function(e){return Ti(e,a)}))}}}(),Vi=Pi,Ai={install:function(e,t){e.directive("mousetrap",Si),e.directive("el-mousetrap",Vi)}},Ri=Ai;r["default"].use(se["a"]),r["default"].use(ki),r["default"].use(Oi),r["default"].mixin(Mi),r["default"].use(Ri),m["a"].bootstrap(),Qe.a.interceptors.response.use((function(e){return e}),(function(e){m["a"].lastError=e.response?e.response:null;var t="";return console.log("axios: http error",m["a"].lastError),e.response&&422===e.response.status?Promise.reject(e):(e.response&&401===e.response.status&&(m["a"].user=null,mi.commit("SET_LOGGED_IN_USER",null),Us.push("/login"),t="Please login"),e.response&&403===e.response.status&&(t="Not allowed. You do not have the required permissions."),e.response&&404===e.response.status&&(t="The requested resource was not found"),e.response&&409===e.response.status&&(t=e.response.data.message),e.response&&500===e.response.status&&("object"===Object(Ga["a"])(e.response.data)&&e.response.data["error-info"]?1451===e.response.data["error-info"][1]&&(t="Constraint violation - record has related data"):t="object"===Object(Ga["a"])(e.response.data)&&e.response.data.message?e.response.data.message:"string"===typeof e.response.data?e.response.data:"Internal server error."),e.response&&e.response.status>500&&(t="Server-side error + "+e.response.status+": "+e.response.data),t?(console.log("axios: rejecting Promise with message: "+t),Promise.reject(new Error(t))):(console.log("axios: Possibly network error"),Promise.reject(new Error(e.message))))}));var Li=a("3cb7");Li.keys().forEach((function(e){var t=Li(e),a=nr()(ir()(e.replace(/^\.\/(.*)\.\w+$/,"$1")));r["default"].component(a,t.default||t)}));var $i=a("9a99");$i.keys().forEach((function(e){var t=$i(e),a=nr()(ir()(e.replace(/^\.\/(.*)\.\w+$/,"$1")));r["default"].component(a,t.default||t)}));var Ui=a("9483");Object(Ui["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh."),alert("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});a("5a10");try{a(!function(){var e=new Error("Cannot find module './assets/scss/custom.scss'");throw e.code="MODULE_NOT_FOUND",e}())}catch(Ni){console.log('if you want to use global custom scss check the file "src/assets/custom-example.scss"')}r["default"].config.productionTip=!1,new r["default"]({router:Us,store:mi,render:function(e){return e(re)}}).$mount("#app")},5972:function(e,t,a){},"5a10":function(e,t,a){var r=a("7037").default;a("b0c0"),a("ac1f"),a("1276"),a("a15b"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("5319"),a("00b4"),function(e,t,a){function n(e,t){return r(e)===t}function s(){var e,t,a,r,s,i,o;for(var u in c)if(c.hasOwnProperty(u)){if(e=[],t=c[u],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(a=0;a<t.options.aliases.length;a++)e.push(t.options.aliases[a].toLowerCase());for(r=n(t.fn,"function")?t.fn():t.fn,s=0;s<e.length;s++)i=e[s],o=i.split("."),1===o.length?d[o[0]]=r:(!d[o[0]]||d[o[0]]instanceof Boolean||(d[o[0]]=new Boolean(d[o[0]])),d[o[0]][o[1]]=r),l.push((r?"":"no-")+o.join("-"))}}function i(e){var t=m.className,a=d._config.classPrefix||"";if(p&&(t=t.baseVal),d._config.enableJSClass){var r=new RegExp("(^|\\s)"+a+"no-js(\\s|$)");t=t.replace(r,"$1"+a+"js$2")}d._config.enableClasses&&(t+=" "+a+e.join(" "+a),p?m.className.baseVal=t:m.className=t)}function o(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):p?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}var l=[],c=[],u={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var a=this;setTimeout((function(){t(a[e])}),0)},addTest:function(e,t,a){c.push({name:e,fn:t,options:a})},addAsyncTest:function(e){c.push({name:null,fn:e})}},d=function(){};d.prototype=u,d=new d;var m=t.documentElement,p="svg"===m.nodeName.toLowerCase(),f=o("input"),_="search tel url email datetime date month week time datetime-local number range color".split(" "),v={};d.inputtypes=function(e){for(var r,n,s,i=e.length,o="1)",l=0;i>l;l++)f.setAttribute("type",r=e[l]),s="text"!==f.type&&"style"in f,s&&(f.value=o,f.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&f.style.WebkitAppearance!==a?(m.appendChild(f),n=t.defaultView,s=n.getComputedStyle&&"textfield"!==n.getComputedStyle(f,null).WebkitAppearance&&0!==f.offsetHeight,m.removeChild(f)):/^(search|tel)$/.test(r)||(s=/^(url|email)$/.test(r)?f.checkValidity&&!1===f.checkValidity():f.value!=o)),v[e[l]]=!!s;return v}(_),s(),i(l),delete u.addTest,delete u.addAsyncTest;for(var h=0;h<d._q.length;h++)d._q[h]();e.Modernizr=d}(window,document)},"5cce":function(e,t,a){"use strict";var r=a("d4ec"),n=a("bee2"),s=a("262e"),i=a("2caf"),o=(a("99af"),a("a15b"),a("de5f")),l=a("bc3a"),c=a.n(l),u=function(e){Object(s["a"])(a,e);var t=Object(i["a"])(a);function a(e){var n;return Object(r["a"])(this,a),n=t.call(this),n._controller=n.baseUrl+"api/v1/list-values",n}return Object(n["a"])(a,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.a.get("".concat(this._controller,"/").concat(e,"?").concat(this.encodeQueryParams(t)),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"getList",value:function(e,t){return c.a.get("".concat(this._controller,"?").concat(this.encodeQueryParams(e)).concat(t?"&"+this.encodeFilterParams(t):""),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"post",value:function(e){return c.a.post("".concat(this._controller),e,{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"put",value:function(e,t){return c.a.put("".concat(this._controller,"/").concat(e),t,{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"delete",value:function(e){return c.a.delete("".concat(this._controller,"/").concat(e),{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"getListNames",value:function(){return c.a.get("".concat(this._controller,"/list-names"),{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"getListInfo",value:function(e){return c.a.get("".concat(this._controller,"/list?listname=").concat(e),{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"updateListInfo",value:function(e,t){return c.a.put("".concat(this._controller,"/list?listname=").concat(e),t,{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"encodeFilterParams",value:function(e){var t=[];for(var a in e)t.push("filter[".concat(a,"]=").concat(e[a]));return t.join("&")}}]),a}(o["a"]);t["a"]=u},"5de3":function(e,t,a){},6464:function(e,t,a){},6661:function(e,t,a){"use strict";var r=a("d4ec"),n=a("bee2"),s=a("262e"),i=a("2caf"),o=(a("99af"),a("a15b"),a("de5f")),l=a("bc3a"),c=a.n(l),u=function(e){Object(s["a"])(a,e);var t=Object(i["a"])(a);function a(e){var n;if(Object(r["a"])(this,a),n=t.call(this),!e)throw new Error("CrudService constructor should have a model");return n.model=e,n._controller=n.baseUrl+"api/v1/global",n}return Object(n["a"])(a,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.a.get("".concat(this._controller,"/").concat(e,"?name=").concat(this.model,"&").concat(this.encodeQueryParams(t)),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"getList",value:function(e,t){return c.a.get("".concat(this._controller,"?name=").concat(this.model,"&").concat(this.encodeQueryParams(e)).concat(t?"&"+a.encodeFilterParams(t):""),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"post",value:function(e){return c.a.post("".concat(this._controller,"?name=").concat(this.model),e,{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"put",value:function(e,t){return c.a.put("".concat(this._controller,"/").concat(e,"?name=").concat(this.model),t,{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"delete",value:function(e){return c.a.delete("".concat(this._controller,"/").concat(e,"?name=").concat(this.model),{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"getDefaults",value:function(e){return c.a.post("".concat(this._controller,"/defaults?name=").concat(this.model),e,{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"getFilterLists",value:function(e){return c.a.get("".concat(this._controller,"/filter-lists?name=").concat(this.model),{headers:this.getBearerHeader(),params:e}).then((function(e){return e}))}},{key:"getAsyncList",value:function(e){return c.a.get("".concat(this._controller,"/async-lists?name=").concat(this.model,"&").concat(this.encodeQueryParams(e)),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"getDuplicate",value:function(e,t){return c.a.post("".concat(this._controller,"/duplicate?name=").concat(this.model,"&id=").concat(e),t,{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"getReports",value:function(){return c.a.get("".concat(this._controller,"/reports?name=").concat(this.model),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"print",value:function(e,t){return c.a.get("".concat(this._controller,"/print?name=").concat(this.model,"&id=").concat(e,"&reportName=").concat(t),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}}],[{key:"encodeFilterParams",value:function(e){var t=[];for(var a in e)t.push("filter[".concat(a,"]=").concat(e[a]));return t.join("&")}}]),a}(o["a"]);t["a"]=u},"6c68":function(e,t,a){},7410:function(e,t,a){},7560:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-autocomplete",e._g(e._b({attrs:{value:e.value,items:e.items,"item-text":"text","item-value":"value",rules:e.getRules(),label:e.inputLabel,"error-messages":e.fieldServerValidationErrors}},"v-autocomplete",e.$attrs,!1),e.listeners))},n=[],s=(a("a9e3"),a("39f3")),i={name:"DisSwitchInput",mixins:[s["a"]],data:function(){return{items:[{text:"yes",value:1},{text:"no",value:0}]}},props:{value:{type:Number}}},o=i,l=a("2877"),c=a("6544"),u=a.n(c),d=a("c6a6"),m=Object(l["a"])(o,r,n,!1,null,"6bd800f4",null);t["default"]=m.exports;u()(m,{VAutocomplete:d["a"]})},"77cd":function(e,t,a){},"7aa2":function(e,t,a){"use strict";a("86ff")},"7ac2":function(e,t,a){"use strict";a("abd4")},"7b01":function(module,__webpack_exports__,__webpack_require__){"use strict";var C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("53ca"),C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2909"),C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("5530"),C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("b85c"),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("1276"),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("498a"),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_match_all_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("a1f0"),core_js_modules_es_string_match_all_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_match_all_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("2532"),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("0481"),core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_array_unscopables_flat_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("4069"),core_js_modules_es_array_unscopables_flat_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_array_unscopables_flat_js__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("c740"),core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_22__),_mixins_dis_input_mixin__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("39f3"),_services_ListValuesService__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("5cce"),_services_CrudService__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("6661"),_util_debounce__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("b11c"),_util_deepCompareObjects__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("de28");__webpack_exports__["a"]={name:"DisSelectInput",mixins:[_mixins_dis_input_mixin__WEBPACK_IMPORTED_MODULE_23__["a"]],props:{value:{type:[Number,String,Array]},selectSource:{type:Object,required:!0},allowFreeInput:{type:Boolean},multiple:{type:Boolean},formModel:{type:Object}},data:function(){return{selected:null,items:[],loading:!1,listFormDialog:!1,searchWord:null,totalCount:null}},computed:{filterParams:function filterParams(){var _this=this,extraFilter={};if(this.selectSource.extraFilter){var regex=/^([a-zA-Z_]+) *(!=|==|=|<=|<|>=|>) *(.+)$/,_iterator=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__["a"])(this.selectSource.extraFilter.split("&")),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var matchedQuery=_step.value,parts=regex.exec(matchedQuery.trim());if(parts&&4===parts.length){var filterKey=parts[1],comparison=parts[2],filterValue=parts[3],_iterator2=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__["a"])(filterValue.matchAll(/{([^}]+)}/g)),_step2;try{var _loop=function _loop(){var evalMatch=_step2.value,value=evalMatch[1],self=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__["a"])({formModel:_this.formModel},_this.formModel),cb=function cb(){return eval(value)},v="";try{v=cb.bind(self)(),v||(v=""),filterValue=filterValue.replace(evalMatch[0],v)}catch(e){v="ERROR in extraFilter",console.error("ERROR in extraFilter value",value,": ",e.message),filterValue=null}};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop()}catch(err){_iterator2.e(err)}finally{_iterator2.f()}null!==filterValue&&(filterValue=filterValue.replace(/^'(.+)'$/,"$1"),extraFilter[filterKey]="null"===filterValue?"":comparison+filterValue)}else console.error("ERROR in part of extraFilter:",matchedQuery)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}switch(this.selectSource.type){case"api":return Object.assign({},extraFilter);case"list":return Object.assign({listname:this.selectSource.listName},extraFilter);default:return{}}},listItems:function(){var e=this,t=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__["a"])(this.items);if(this.selected)switch(Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__["a"])(this.selected)){case"string":this.items.find((function(t){return t.value===e.selected}))||t.unshift(this.selected);break;case"object":if(this.correctValue(),0!==Object.keys(this.selected).length){var a=this.selected.filter((function(t){return!e.items.map((function(e){return e.value})).includes(t)}));a.forEach((function(e){return t.unshift({text:e,value:e})}))}}return t}},created:function(){switch(this.selected=this.value,this.textField=this.selectSource.textField,this.valueField=this.selectSource.valueField,this.updateListItems=Object(_util_debounce__WEBPACK_IMPORTED_MODULE_26__["a"])(this.updateListItems,500),this.selectSource.type){case"api":case"one_relation":case"many_relation":this.selected&&this.correctValue(),this.service=new _services_CrudService__WEBPACK_IMPORTED_MODULE_25__["a"](this.selectSource.model);var e=this.selectSource.textField?[this.selectSource.textField,this.selectSource.valueField]:[this.selectSource.valueField];e=e.filter((function(e,t,a){return a.indexOf(e)===t})),this.queryParams={sort:this.selectSource.textField||this.selectSource.valueField,fields:e.join(","),q:null,value:this.selected},this.getAsyncListItems();break;case"list":this.service=new _services_ListValuesService__WEBPACK_IMPORTED_MODULE_24__["a"]("ListValues"),this.queryParams={sort:"sort"},this.getListItems();break}},methods:{clearSearchInput:function(){this.searchWord=null},updateListItems:function(e){if("many_relation"===this.selectSource.type||"one_relation"===this.selectSource.type||"api"===this.selectSource.type){var t=this.selectSource.textField?[this.selectSource.textField,this.selectSource.valueField]:[this.selectSource.valueField];t=t.filter((function(e,t,a){return a.indexOf(e)===t})),this.queryParams={sort:this.selectSource.textField||this.selectSource.valueField,fields:t.join(","),q:e?e.srcElement.value:null,value:this.selected},this.getAsyncListItems()}},updateSelectedListItems:function(e){if("many_relation"===this.selectSource.type||"one_relation"===this.selectSource.type||"api"===this.selectSource.type){var t=this.selectSource.textField?[this.selectSource.textField,this.selectSource.valueField]:[this.selectSource.valueField];t=t.filter((function(e,t,a){return a.indexOf(e)===t})),this.queryParams={sort:this.selectSource.textField||this.selectSource.valueField,fields:t.join(","),q:e?e.srcElement.value:null,value:this.selected},this.getAsyncListItems()}},getAsyncListItems:function(){var e=this;this.loading=!0,this.service.getAsyncList(this.queryParams).then((function(t){e.items=t.items.map((function(t){return{text:"many_relation"===e.selectSource.type&&"one_relation"===e.selectSource.type?"".concat(t[e.textField]):t[e.valueField]+(e.textField&&t[e.textField]&&e.textField!==e.valueField?" | ".concat(t[e.textField]):""),value:e.multiple?t[e.valueField]+"":t[e.valueField]}})).flat().filter((function(e,t,a){return a.findIndex((function(t){return t.text===e.text&&t.value===e.value}))===t})),e.totalCount=t.totalCount})).finally((function(){e.loading=!1}))},getListItems:function(){var e=this;this.loading=!0,this.service.getList(this.queryParams,this.filterParams).then((function(t){e.items=t.items.map((function(t){if(e.multiple&&"string"===typeof t[e.valueField]&&t[e.valueField].includes(";")){var a,r=[],n=t[e.valueField].split(";"),s=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_3__["a"])(n);try{for(s.s();!(a=s.n()).done;){var i=a.value;r.unshift({text:i+(e.textField&&t[e.textField]&&e.textField!==e.valueField?" | ".concat(t[e.textField]):""),value:i})}}catch(o){s.e(o)}finally{s.f()}return r}return{text:t[e.valueField]+(e.textField&&t[e.textField]&&e.textField!==e.valueField?" | ".concat(t[e.textField]):""),value:e.multiple?t[e.valueField]+"":t[e.valueField]}})).flat().filter((function(e,t,a){return a.findIndex((function(t){return t.text===e.text&&t.value===e.value}))===t})),e.totalCount=t.totalCount})).finally((function(){e.loading=!1}))},editList:function(){"list"===this.selectSource.type&&(this.listFormDialog=!0)},closeDialog:function(){this.listFormDialog=!1,this.getListItems()},correctValue:function(){var e=this,t=[];Array.isArray(this.selected)?this.selected.forEach((function(a){a.hasOwnProperty(e.valueField)&&t.push(a[e.valueField].toString())})):this.selected=this.selected[this.valueField],this.selected=t.length?t:this.selected}},watch:{filterParams:function(e,t){Object(_util_deepCompareObjects__WEBPACK_IMPORTED_MODULE_27__["a"])(e,t)||this.getListItems()},value:function(){this.selected=this.value,this.updateListItems(null)}}}},"7b41":function(e,t,a){e.exports=a.p+"img/hole-marker.5a8c57f4.png"},"7b63":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:Object.assign({"c-dis-form":!0},e.themeClasses,e.formClasses)},[a("dis-filter-form",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:e.shortcuts.focusOnFilter,disabled:!1},expression:"{keys: shortcuts.focusOnFilter, disabled: false}"}],ref:"filter",staticClass:"c-dis-form__filter",attrs:{filterByValuesModel:e.filterByValuesModel,fields:e.fields,formName:e.formName,dataModels:e.filterDataModels,dataModel:e.dataModel,filterValidation:e.filterValidation},on:{"update:filterByValuesModel":function(t){e.filterByValuesModel=t},"update:filter-by-values-model":function(t){e.filterByValuesModel=t},mousetrap:function(t){return t.preventDefault(),e.focusOnFilter(t)},change:function(t){return e.filterValue=t},handleFilterValidation:e.handleFilterValidation}}),a("v-expansion-panel",{class:{"mb-2":!0,"current-record-compact":e.$store.state.compactUI},model:{value:e.detailSectionExpand,callback:function(t){e.detailSectionExpand=t},expression:"detailSectionExpand"}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[e.$store.state.compactUI?a("div"):a("div",[e._v("Current record")])]},proxy:!0}])},[a("v-card",[a("v-form",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:e.shortcuts.focusOnForm,disabled:!1},expression:"{keys: shortcuts.focusOnForm, disabled: false}"}],ref:"form",staticClass:"c-dis-form__form",attrs:{"lazy-validation":""},on:{mousetrap:function(t){return t.preventDefault(),e.focusOnForm(t)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}}},[a("dis-auto-increment-input",{attrs:{serverValidationErrors:e.serverValidationErrors,name:"id",label:"ID",validators:[]},model:{value:e.formModel["id"],callback:function(t){e.$set(e.formModel,"id",e._n(t))},expression:"formModel['id']"}}),e.checkConditions?e._t("form-fields",null,{fields:e.fields,formScenario:e.formScenario,selectedItem:e.selectedItem,formModel:e.formModel,serverValidationErrors:e.serverValidationErrors,requiredFilterParams:e.requiredFilterParams,compactUI:e.$store.state.compactUI}):e._e()],2),"create"!==e.formScenario&&"edit"!==e.formScenario||!e.userCanEditForm?e._e():a("v-card-actions",[a("v-btn",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:e.shortcuts.save,disabled:e.isSaveButtonDisabled||!e.userCanEditForm},expression:"{keys: shortcuts.save, disabled: isSaveButtonDisabled || !userCanEditForm}"}],staticClass:"c-dis-form__btn-save",attrs:{title:"Save",loading:e.isSaving,disabled:e.isSaveButtonDisabled},on:{click:e.submit,mousetrap:function(t){return t.preventDefault(),e.submit(t)}}},[a("v-icon",[e._v("save")]),e._v(" Save ")],1),a("v-btn",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:e.shortcuts.cancel,disabled:e.isCancelButtonDisabled||!e.userCanEditForm},expression:"{keys: shortcuts.cancel, disabled: isCancelButtonDisabled || !userCanEditForm}"}],staticClass:"c-dis-form__btn-cancel",attrs:{disabled:e.isCancelButtonDisabled,title:"Cancel"},on:{click:e.onCancelClick,mousetrap:function(t){return t.preventDefault(),e.onCancelClick(t)}}},[a("v-icon",[e._v("cancel")]),e._v(" Cancel ")],1),a("v-flex",{staticClass:"ml-2",attrs:{shrink:""}},[a("dis-select-auto-print",{attrs:{autoPrintReports:e.autoPrintReports},model:{value:e.autoPrint,callback:function(t){e.autoPrint=t},expression:"autoPrint"}})],1)],1),a("v-card-actions",[a("v-layout",{staticClass:"c-dis-form__actions",attrs:{wrap:"","justify-space-between":""}},[a("v-flex",{attrs:{shrink:""}},[e._t("form-actions",[a("v-btn",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:e.shortcuts.edit,disabled:e.isEditButtonDisabled||!e.userCanEditForm},expression:"{keys: shortcuts.edit, disabled: isEditButtonDisabled || !userCanEditForm}"}],staticClass:"c-dis-form__btn-edit",attrs:{disabled:e.isEditButtonDisabled||!e.userCanEditForm,title:"Edit"},on:{click:e.onEditClick,mousetrap:function(t){return t.preventDefault(),e.onEditClick(t)}}},[a("v-icon",[e._v("edit")]),e._v(" Edit ")],1),a("v-btn",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:e.shortcuts.new,disabled:e.isNewButtonDisabled||!e.userCanEditForm},expression:"{keys: shortcuts.new, disabled: isNewButtonDisabled || !userCanEditForm}"}],ref:"createNewButton",staticClass:"c-dis-form__btn-create",attrs:{title:"New",loading:e.isFetchingDefaults,disabled:e.isNewButtonDisabled||!e.userCanEditForm},on:{click:e.onCreateNewClick,mousetrap:function(t){return t.preventDefault(),e.onCreateNewClick(t)}}},[a("v-icon",[e._v("add")]),e._v(" New ")],1),a("v-btn",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:e.shortcuts.duplicate,disabled:e.isEditButtonDisabled||!e.userCanEditForm},expression:"{keys: shortcuts.duplicate, disabled: isEditButtonDisabled || !userCanEditForm}"}],staticClass:"c-dis-form__btn-duplicate",attrs:{title:"Duplicate",loading:e.isFetchingDuplicate,disabled:e.isEditButtonDisabled||!e.userCanEditForm},on:{click:e.onDuplicateClick,mousetrap:function(t){return t.preventDefault(),e.onDuplicateClick(t)}}},[a("v-icon",[e._v("queue")]),e._v(" Smart Copy ")],1),a("v-btn",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:e.shortcuts.delete,disabled:e.isDeleteButtonDisabled||!e.userCanEditForm},expression:"{keys: shortcuts.delete, disabled: isDeleteButtonDisabled || !userCanEditForm}"}],staticClass:"c-dis-form__btn-delete",attrs:{disabled:e.isDeleteButtonDisabled||!e.userCanEditForm,title:"Delete"},on:{click:e.onDeleteClick,mousetrap:function(t){return t.preventDefault(),e.onDeleteClick(t)}}},[a("v-icon",[e._v("delete")]),e._v(" Delete ")],1)],{onEditClick:e.onEditClick,onCreateNewClick:e.onCreateNewClick,onDeleteClick:e.onDeleteClick,onDuplicateClick:e.onDuplicateClick,isEditButtonDisabled:e.isEditButtonDisabled,userCanEditForm:e.userCanEditForm,isNewButtonDisabled:e.isNewButtonDisabled,isFetchingDefaults:e.isFetchingDefaults,isFetchingDuplicate:e.isFetchingDuplicate,isDeleteButtonDisabled:e.isDeleteButtonDisabled,shortcuts:e.shortcuts})],2),a("v-flex",{attrs:{shrink:""}},[a("v-btn",{attrs:{flat:"",icon:"",disabled:e.isTableNavigationDisabled,loading:e.isDataTableRefreshing},on:{click:function(t){return e.$refs.dataTable.selectFirstRecord()}}},[a("v-icon",[e._v("first_page")])],1),a("v-btn",{attrs:{flat:"",icon:"",disabled:e.isTableNavigationDisabled,loading:e.isDataTableRefreshing},on:{click:function(t){return e.$refs.dataTable.selectPreviousRecord()}}},[a("v-icon",[e._v("chevron_left")])],1),a("v-btn",{attrs:{flat:"",icon:"",disabled:e.isTableNavigationDisabled,loading:e.isDataTableRefreshing},on:{click:function(t){return e.$refs.dataTable.selectNextRecord()}}},[a("v-icon",[e._v("chevron_right")])],1),a("v-btn",{attrs:{flat:"",icon:"",disabled:e.isTableNavigationDisabled,loading:e.isDataTableRefreshing},on:{click:function(t){return e.$refs.dataTable.selectLastRecord()}}},[a("v-icon",[e._v("last_page")])],1),a("span",{staticClass:"c-dis-form__record-index mr-2 ml-2"},[e._v(" "+e._s(e.$refs.dataTable&&e.$refs.dataTable.currentRecordIndex?e.$refs.dataTable.currentRecordIndex:0)+" / "+e._s(e.$refs.dataTable?e.$refs.dataTable.pagination.totalItems:0)+" ")]),a("dis-select-report",{attrs:{disabled:!e.selectedItem,reports:e.reports.single},on:{"select:report":e.onSingleRecordReportClick}})],1)],1),a("div")],1),a("div",[e._t("extra-form-actions",null,{selectedItem:e.selectedItem,onSubFormClick:e.onSubFormClick,onSupFormClick:e.onSupFormClick}),"files"!==e.formName?a("dis-form-files-buttons",{attrs:{"selected-item":e.selectedItem,"filter-data-models":e.filterDataModels,"data-model":e.dataModel},on:{"show-files-click":e.onShowFilesClick,"upload-files-click":e.onUploadFilesClick}}):e._e()],2)],1)],1)],1),a("v-expansion-panel",{model:{value:e.listSectionExpand,callback:function(t){e.listSectionExpand=t},expression:"listSectionExpand"}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("List of records")])]},proxy:!0}])},[a("dis-data-table",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:e.shortcuts.focusOnTable,disabled:!1},expression:"{keys: shortcuts.focusOnTable, disabled: false}"}],ref:"dataTable",attrs:{formName:e.formName,updateUrl:e.updateUrl,updateValueOnRowClick:"view"===e.formScenario,refreshing:e.isDataTableRefreshing,dataModel:e.dataModel,fields:e.userIsDeveloper?[{label:"#",name:"id",order:-1}].concat(e.fields):e.fields,filterDataModels:e.filterDataModels,reports:e.reports.multiple,filterByValuesModel:e.filterByValuesModel,detailSectionClosed:0!==e.detailSectionExpand},on:{"update:refreshing":function(t){e.isDataTableRefreshing=t},openDetailSection:function(t){e.detailSectionExpand=0},mousetrap:function(t){return t.preventDefault(),e.focusOnTable(t)},afterRefresh:e.onAfterDataTableRefresh},model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}})],1)],1)],1)},n=[],s=a("53ca"),i=a("3835"),o=a("b85c"),l=a("1da1"),c=a("2909"),u=a("5530"),d=(a("96cf"),a("b0c0"),a("d81d"),a("caad"),a("2532"),a("4de4"),a("d3b7"),a("ac1f"),a("5319"),a("4fad"),a("7db0"),a("00b4"),a("99af"),a("e34c")),m=a("6a18"),p=a("b4bd"),f=a("6661"),_=a("4851"),v=a("27de"),h=a("9e14"),g=a("e729"),b=a("fd3e"),y=a("b11c"),x={name:"DisForm",props:{fields:{type:Array,required:!0},requiredFilters:{type:Array,required:!0},calculatedFields:{type:Object},dataModel:{type:String,required:!0},filterDataModels:{type:Object,required:!0},formName:{type:String},updateUrl:{type:Boolean,default:!0},confirmations:{type:Array,default:function(){return[]}}},components:{"dis-select-report":h["default"],"dis-form-files-buttons":g["default"],"dis-select-auto-print":b["default"]},mixins:[m["a"],_["a"]],data:function(){return{formModel:{},serverValidationErrors:[],selectedItem:null,filterValue:{},isDataTableRefreshing:!0,isSaving:!1,formScenario:"view",isFetchingDefaults:!1,isFetchingDuplicate:!1,reports:{single:[],multiple:[]},filterByValuesModel:{},detailSectionExpand:null,listSectionExpand:null,shortcuts:v["a"],showRecordExportMenu:!1,autoPrint:{reportName:"",active:!1},filterValidation:[]}},watch:{selectedItem:function(e){this.onSelectedItemChange(e)},filterByValuesModel:{deep:!0,handler:function(){this.onFilterByValueChange()}},autoPrint:{deep:!0,handler:function(e){this.localStorage.autoPrintOnSave=e.active,this.localStorage.autoPrintReportName=e.reportName}},detailSectionExpand:function(e){var t=this;setTimeout((function(){t.onScrollDocument()}),500)},listSectionExpand:function(e){this.onScrollDocument()}},created:function(){var e=this;this.localStorage=new d["a"](this.formName),this.formService=new p["a"](this.formName),this.crudService=new f["a"](this.dataModel),this.getFormReports(),this.formName&&(window.name="".concat(this.formName.toLowerCase(),"-window")),this.fields.map((function(t){e.$set(e.formModel,t.name,null)})),this.$watch("formModel",{deep:!0,handler:function(){var t=Object(u["a"])({formModel:e.formModel},e.formModel);for(var a in e.calculatedFields)try{var r=e.calculatedFields[a].bind(t),n=r();(n||0===n||""===n)&&(e.formModel[a]=n)}catch(s){console.log("DisForm.vue: calculate error in ",a,s)}}})},mounted:function(){var e=this;this.onScrollDocument=Object(y["a"])(this.onScrollDocument,200,!1),this.onScrollHandler=function(t){e.onScrollDocument(t)},document.addEventListener("scroll",this.onScrollHandler),window.addEventListener("resize",this.onScrollHandler),this.onScrollDocument(null)},beforeUnmount:function(){document.removeEventListener("scroll",this.onScrollHandler),window.removeEventListener("resize",this.onScrollHandler)},beforeDestroy:function(){this.formName&&(window.name="")},computed:{userIsDeveloper:function(){return this.$store.state.loggedInUser&&(this.$store.state.loggedInUser.roles.includes("sa")||this.$store.state.loggedInUser.roles.includes("developer"))},userCanViewForm:function(){return this.$store.state.loggedInUser&&(this.$store.state.loggedInUser.permissions.includes("form-".concat(this.formName,":view"))||this.$store.state.loggedInUser.permissions.includes("form-*:view"))},userCanEditForm:function(){return this.$store.state.loggedInUser&&(this.$store.state.loggedInUser.permissions.includes("form-".concat(this.formName,":edit"))||this.$store.state.loggedInUser.permissions.includes("form-*:edit"))},isRequiredFilterSet:function(){var e=this,t=!0;return this.requiredFilters.map((function(a){e.requiredFilterParams[a.as]||a.skipOnEmpty||(t=!1)})),t},requiredFilterParams:function(){var e=this,t={};return this.requiredFilters.map((function(a){(e.filterValue[a.value]||a.skipOnEmpty)&&(t[a.as]=e.filterValue[a.value])})),t},fieldsGroups:function(){var e=[];return this.fields.map((function(t){var a=0;t.group&&(a=parseInt(t.group)),e[a]||(e[a]=[]),e[a].push(t)})),e},isTableNavigationDisabled:function(){return"edit"===this.formScenario||"create"===this.formScenario},isSaveButtonDisabled:function(){return"view"===this.formScenario||"create"===this.formScenario&&!this.isRequiredFilterSet},isEditButtonDisabled:function(){return!this.selectedItem||"view"!==this.formScenario},isCancelButtonDisabled:function(){return"view"===this.formScenario},isDeleteButtonDisabled:function(){return!this.selectedItem&&"view"===this.formScenario||"create"===this.formScenario||"edit"===this.formScenario},isNewButtonDisabled:function(){return"view"!==this.formScenario},formClasses:function(){return{"c-dis-form--view":"view"===this.formScenario,"c-dis-form--create":"create"===this.formScenario,"c-dis-form--edit":"edit"===this.formScenario}},autoPrintReports:function(){return this.reports.single.filter((function(e){return e.canAutoPrint}))}},methods:{handleFilterValidation:function(e){this.filterValidation=Object(c["a"])(e)},checkConditions:function(){return"create"===this.formScenario||this.selectedItem.length>0},onFilterByValueChange:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:e.$refs.dataTable.refreshItems("first");case 3:case"end":return t.stop()}}),t)})))()},onSelectedItemChange:function(e){e&&"view"===this.formScenario&&(console.log("DisForm.vue: set form model"),this.formModel=Object.assign(this.formModel,e),this.detailSectionExpand=0,this.$router.replace(Object.assign({},{name:this.$route.name,query:this.$route.query},{params:{id:e.id}})).catch((function(e){if("NavigationDuplicated"!==e.name&&!e.message.includes("Avoided redundant navigation to current location"))throw console.error(e),e}))),e||"view"!==this.formScenario||(console.log("DisForm.vue: set selectedItem to null"),this.selectedItem=null,this.clearForm(),this.detailSectionExpand=null,this.$router.replace(Object.assign({},{name:this.$route.name,query:{filter:this.$route.query.filter}},{params:{id:null}})).catch((function(e){if("NavigationDuplicated"!==e.name&&!e.message.includes("Avoided redundant navigation to current location"))throw console.error(e),e})))},getFormReports:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.crudService.getReports();case 3:a=t.sent,e.reports.single=a.single,e.reports.multiple=a.multiple,e.autoPrint.active=e.localStorage.autoPrintOnSave,e.autoPrint.reportName=e.localStorage.autoPrintReportName,1===e.autoPrintReports.length?e.autoPrint.reportName=e.autoPrintReports[0].name:0===e.autoPrintReports.length&&(e.autoPrint.reportName=""),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$dialog.notify.warning("unable to get reports"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,l,c,u,d,m,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=80;break}a=e.confirmations.filter((function(e){return"submit"===e.on})),r=Object(o["a"])(a),t.prev=3,r.s();case 5:if((n=r.n()).done){t.next=14;break}return s=n.value,t.next=9,s.promise(e);case 9:if(l=t.sent,l){t.next=12;break}return t.abrupt("return");case 12:t.next=5;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](3),r.e(t.t0);case 19:return t.prev=19,r.f(),t.finish(19);case 22:for(c=function(){var t=Object(i["a"])(d[u],2),a=t[0],r=t[1];if("undefined"===typeof r){var n=e.fields.find((function(e){return e.name===a}));"undefined"!==typeof n&&n.hasOwnProperty("formInput")&&"select"===n.formInput.type&&(e.formModel[a]=null)}},u=0,d=Object.entries(e.formModel);u<d.length;u++)c();if(e.serverValidationErrors=[],!e.formModel.id){t.next=55;break}return e.isSaving=!0,t.prev=27,t.next=30,e.formService.put(e.formModel.id,e.formModel);case 30:if(m=t.sent,200!==m.status&&204!==m.status){t.next=45;break}return e.clearForm(),t.next=35,e.$nextTick();case 35:return e.formModel=m.data,console.log("Save was ok, autoPrint ..."),e.autoPrint.active&&e.formService.print(e.formModel.id,e.autoPrint.reportName),t.next=40,e.$nextTick();case 40:return t.next=42,e.$refs.dataTable.refreshItems(m.data.id);case 42:e.selectedItem=Object.assign({},m.data),e.formScenario="view",e.$dialog.message.success("Record was updated successfully");case 45:t.next=50;break;case 47:t.prev=47,t.t1=t["catch"](27),t.t1.response&&422===t.t1.response.status?e.serverValidationErrors=t.t1.response.data:(t.t1.response&&t.t1.response.data&&t.t1.response.data.message?e.$dialog.notify.warning(t.t1.response.data.message,{timeout:3e4}):e.$dialog.notify.warning(t.t1.message,{timeout:3e4}),console.log(t.t1.message));case 50:return t.prev=50,e.isSaving=!1,t.finish(50);case 53:t.next=80;break;case 55:return e.isSaving=!0,t.prev=56,t.next=59,e.formService.post(Object.assign(e.formModel,e.requiredFilterParams));case 59:if(p=t.sent,201!==p.status){t.next=72;break}return e.selectedItem=p.data,e.clearForm(),t.next=65,e.$nextTick();case 65:return e.formModel=p.data,t.next=68,e.$nextTick();case 68:return e.formScenario="view",t.next=71,e.$refs.dataTable.refreshItems(p.data.id);case 71:e.$dialog.message.success("Record was created successfully");case 72:t.next=77;break;case 74:t.prev=74,t.t2=t["catch"](56),t.t2.response&&422===t.t2.response.status?e.serverValidationErrors=t.t2.response.data:(t.t2.response&&t.t2.response.data&&t.t2.response.data.message?e.$dialog.notify.warning(t.t2.response.data.message,{timeout:3e4}):e.$dialog.notify.warning(t.t2.message,{timeout:3e4}),console.log(t.t2.message));case 77:return t.prev=77,e.isSaving=!1,t.finish(77);case 80:case"end":return t.stop()}}),t,null,[[3,16,19,22],[27,47,50,53],[56,74,77,80]])})))()},clearForm:function(){this.$refs.form.reset(),this.blurFilter(),this.blurForm(),this.serverValidationErrors=[],this.formModel.id=null},filterBarWarning:function(){var e=this;window.scrollTo({top:0,behavior:"smooth"});var t=Object(y["a"])((function(e){e.target.dispatchEvent(new CustomEvent("scroll-end",{bubbles:!0}))}),200,!1);0===window.scrollY?window.addEventListener("click",t,{passive:!0}):window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("scroll-end",(function(){e.$dialog.error({title:"Please fill out the filter bar",text:"Please specify items in the filter bar. It is located at the top of the page. Select items from left to right. For editing, all pulldowns must be specified.",type:"warning",actions:["Ok"]}),e.filterValidation.push((function(e){return!!e||"This field is required"})),e.$refs.filter.$refs.form.validate()}),{once:!0})},onCreateNewClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,i,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isRequiredFilterSet){t.next=4;break}e.filterBarWarning(),t.next=45;break;case 4:a=e.confirmations.filter((function(e){return"new"===e.on})),r=Object(o["a"])(a),t.prev=6,r.s();case 8:if((n=r.n()).done){t.next=17;break}return s=n.value,t.next=12,s.promise(e);case 12:if(i=t.sent,i){t.next=15;break}return t.abrupt("return");case 15:t.next=8;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](6),r.e(t.t0);case 22:return t.prev=22,r.f(),t.finish(22);case 25:return t.prev=25,e.isFetchingDefaults=!0,t.next=29,e.formService.getDefaults(e.requiredFilterParams);case 29:return l=t.sent,e.clearForm(),e.formScenario="create",t.next=34,e.$nextTick();case 34:e.formModel=Object.assign({},l.data),e.focusOnForm(),t.next=42;break;case 38:t.prev=38,t.t1=t["catch"](25),console.log(t.t1),t.t1.response&&t.t1.response.data&&t.t1.response.data.message?e.$dialog.notify.warning(t.t1.response.data.message,{timeout:3e4}):e.$dialog.notify.warning(t.t1.message,{timeout:3e4});case 42:return t.prev=42,e.isFetchingDefaults=!1,t.finish(42);case 45:case"end":return t.stop()}}),t,null,[[6,19,22,25],[25,38,42,45]])})))()},onDuplicateClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isRequiredFilterSet){t.next=4;break}e.filterBarWarning(),t.next=23;break;case 4:return t.prev=4,e.isFetchingDuplicate=!0,t.next=8,e.formService.getDuplicate(e.formModel.id,e.requiredFilterParams);case 8:return a=t.sent,e.clearForm(),e.formScenario="create",t.next=13,e.$nextTick();case 13:e.formModel=Object.assign({},a.data),e.focusOnForm(),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](4),e.$dialog.notify.warning(t.t0.message,{timeout:3e4});case 20:return t.prev=20,e.isFetchingDuplicate=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[4,17,20,23]])})))()},onEditClick:function(){this.formScenario="edit",this.focusOnForm()},onCancelClick:function(){var e=this;this.clearForm(),this.$nextTick((function(){e.formScenario="view",e.selectedItem&&(console.log("DisForm.vue: set form model from selected"),e.formModel=Object.assign(e.formModel,e.selectedItem))}))},onDeleteClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$dialog.confirm({title:"Delete a record",text:"Are you sure? this action could not be reverted."});case 2:if(a=t.sent,!a){t.next=23;break}return t.prev=4,t.next=7,e.formService.delete(e.formModel.id);case 7:if(r=t.sent,200!==r.status&&202!==r.status&&204!==r.status){t.next=15;break}return e.clearForm(),e.formScenario="view",e.selectedItem=null,e.$dialog.message.success("deleted successfully"),t.next=15,e.$refs.dataTable.refreshItems(!1);case 15:t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](4),e.$dialog.notify.warning("cannot delete - "+t.t0.message,{timeout:3e4}),console.log(t.t0);case 21:return t.prev=21,t.finish(21);case 23:case"end":return t.stop()}}),t,null,[[4,17,21,23]])})))()},onSubFormClick:function(e,t){var a=this,r={};t.filter.map((function(e){"object"===Object(s["a"])(a.selectedItem[e.fromField])?r[e.unit]=a.selectedItem[e.fromField].id:r[e.unit]=a.selectedItem[e.fromField]}));var n=this.$router.resolve({query:{filter:this.filterToString(r),selectFirst:!0},path:t.url});this.openWindow(n.href,"".concat(e.toLowerCase(),"-window"))},onSupFormClick:function(e,t){var a=this,r={};t.filter.map((function(e){"object"===Object(s["a"])(a.selectedItem[e.fromField])?r[e.unit]=a.selectedItem[e.fromField].id:r[e.unit]=a.selectedItem[e.fromField]}));var n="object"===Object(s["a"])(this.selectedItem[t.parentIdField])?this.selectedItem[t.parentIdField].id:this.selectedItem[t.parentIdField],i=this.$router.resolve({query:{filter:this.filterToString(r)},path:t.url+"/"+n});this.openWindow(i.href,"".concat(e.toLowerCase(),"-window"))},onShowFilesClick:function(e){var t=this.$router.resolve({query:{filter:this.filterToString(e)},path:"/forms/files-form"});this.openWindow(t.href,"files-window")},onUploadFilesClick:function(e){var t=this.$router.resolve({query:{filter:this.filterToString(e)},path:"/files-upload"});this.openWindow(t.href,"upload-files-window")},openWindow:function(e,t){var a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&/^Apple Computer/i.test(navigator.vendor);if(!a){var r=window.open("",t);try{r.close()}catch(n){}window.open(e,t)}},blurForm:function(){for(var e in this.$refs.form.inputs)this.$refs.form.inputs[e].blur&&this.$refs.form.inputs[e].blur()},blurFilter:function(){this.$refs.filter.blurInputs()},focusOnFilter:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.blurForm(),t.next=3,e.$nextTick();case 3:a=e.$refs.filter,a.$el.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),a.focusInputs();case 6:case"end":return t.stop()}}),t)})))()},focusOnForm:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.blurFilter(),a=0!==e.detailSectionExpand?300:0,e.detailSectionExpand=0,t.next=5,e.$nextTick();case 5:r=e.$refs.form,setTimeout((function(){for(var e in r.$el.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),r.inputs)if(!r.inputs[e].disabled){r.inputs[e].focus();break}}),a);case 7:case"end":return t.stop()}}),t)})))()},focusOnTable:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.blurFilter(),e.blurForm(),a=0!==e.listSectionExpand?300:0,e.listSectionExpand=0,t.next=6,e.$nextTick();case 6:r=e.$refs.dataTable,setTimeout((function(){r.$el.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});var e=r.$el.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e.length>0&&e[0].focus()}),a);case 8:case"end":return t.stop()}}),t)})))()},onAfterDataTableRefresh:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listSectionExpand=0,t.next=3,e.$nextTick();case 3:e.onScrollDocument();case 4:case"end":return t.stop()}}),t)})))()},onSingleRecordReportClick:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=window.baseUrl+"report/".concat(e.name,"?model=").concat(t.dataModel,"&id=").concat(t.selectedItem.id),!e.confirmationMessage){a.next=8;break}return a.next=4,t.$dialog.confirm({title:"Please confirm!",text:e.confirmationMessage,persistent:!0});case 4:n=a.sent,n&&window.open(r,"_blank"),a.next=9;break;case 8:window.open(r,"_blank");case 9:case"end":return a.stop()}}),a)})))()},onScrollDocument:function(e){if(0===this.listSectionExpand){var t=document.querySelector("main.v-content");if(t){var a=t.querySelector("div.v-content__wrap"),r=a.querySelector(".v-datatable__actions");if(r){var n=a.querySelector(".v-table__overflow"),s=window.innerHeight-r.clientHeight-50,i=n.getBoundingClientRect();if(i.top<s){var o=n.querySelector("table.v-table"),l=Math.max(0,Math.floor(s-i.top)),c=Math.max(0,Math.min(o.offsetHeight,s)-l-130);n.style.overflowY="auto",n.style.maxHeight=l+"px",a.style.paddingBottom=c+"px"}}}}}}},w=x,k=a("2877"),C=a("6544"),O=a.n(C),M=a("8336"),j=a("b0af"),I=a("99d9"),E=a("cd55"),D=a("49e2"),T=a("0e8f"),F=a("4bd4"),S=a("132d"),P=a("a722"),V=Object(k["a"])(w,r,n,!1,null,"4772f1cb",null);t["default"]=V.exports;O()(V,{VBtn:M["a"],VCard:j["a"],VCardActions:I["a"],VExpansionPanel:E["a"],VExpansionPanelContent:D["a"],VFlex:T["a"],VForm:F["a"],VIcon:S["a"],VLayout:P["a"]})},"7c4e":function(e,t,a){"use strict";a("5972")},"7d36":function(e,t,a){"use strict";a("5de3")},8156:function(e,t,a){"use strict";a("c7d2b")},8337:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-alert",{attrs:{dismissible:""},model:{value:e.showErrorSummary,callback:function(t){e.showErrorSummary=t},expression:"showErrorSummary"}},[a("ul",e._l(e.value,(function(t){return a("li",{key:t.field},[a("strong",[e._v(e._s(t.field))]),e._v(": "+e._s(t.message)+" ")])})),0)])},n=[],s={name:"DisServerValidationErrorsView",props:{value:{type:Array}},computed:{showErrorSummary:{get:function(){return this.value.length>0},set:function(e){!e&&this.$emit("input",[])}}}},i=s,o=a("2877"),l=a("6544"),c=a.n(l),u=a("0798"),d=Object(o["a"])(i,r,n,!1,null,null,null);t["default"]=d.exports;c()(d,{VAlert:u["a"]})},"86ff":function(e,t,a){},8809:function(e,t,a){"use strict";var r=a("5530"),n=a("d4ec"),s=a("bee2"),i=a("262e"),o=a("2caf"),l=(a("99af"),a("de5f")),c=a("bc3a"),u=a.n(c),d=function(e){Object(i["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.call(this),e._controller=e.baseUrl+"api/v1/file",e}return Object(s["a"])(a,[{key:"get",value:function(e){return u.a.get("".concat(this._controller,"?").concat(this.encodeQueryParams(e)),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"updateSelectValues",value:function(e,t){return u.a.get("".concat(this._controller,"/update-select-values?name=").concat(e,"&value=").concat(t),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"assign",value:function(e){return u.a.post("".concat(this._controller,"/assign"),e,{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"delete",value:function(e){return u.a.post("".concat(this._controller,"/delete"),e,{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"upload",value:function(e,t){console.log(e);var a={headers:Object(r["a"])({"Content-Type":"multipart/form-data"},this.getBearerHeader()),onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total);t(a)}};return u.a.post("".concat(this._controller,"/upload"),e,a).then((function(e){return e.data}))}},{key:"metaData",value:function(e){var t={filename:e};return u.a.get("".concat(this._controller,"/meta-data?").concat(this.encodeQueryParams(t)),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"unassign",value:function(e){return u.a.put("".concat(this._controller,"/unassign/").concat(e),null,{headers:this.getBearerHeader()}).then((function(e){return e}))}}]),a}(l["a"]);t["a"]=d},"906d":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAADuFJREFUeNrsXQmQFNUZfq97ZmeWZVxYQBEVRQW0EiuxjBo1GlFnSUkJZWGlcmmlooilMVxyGGAPrghRERUVQU2M0RBd110BOTwQEVQ8Ek24QURcBNdlD3Z3dme6O98/DBUsV52e19fr6b+q6zW68/q9///+6/V7f3PDMJjVVNj7dOYFum7mmoGazs5WOBusG2ww/tNA3TBKFM5juI/hnlqGf7egacG/W3DfgPsd+M02/AaXsbmmonSnF+bTXr/b8j65nwAwcsaa0yG0qyC0IfjnEAjzBCv61XTjc87Za7h9LaTwl6vK4h8HAPAIAK6tXNMHzS9x3YDrPIceuwnXk7AS/wAY6gMAuAAAaPvFKd2YhOEPUxUeckMjYWmSsDLLcDuvujz+VgAABwAAjY+D8VPB+J8yDxHG9Crcw2xYhFcDANgAAGj8OfDvD+H2J8zDBCCsBThvg0XYHADAGsEjWmeVCMRud8vU5+Ia0NwXDSuVS6de1eplACheZiSEfwWEvwW342QRfiatDOOamEjqW+CyLvPyWD1pAc4fs1w5uaSgDJo0HYxUmMQEy6UhhayoO5Scs2nBMD1wAd9BIypWH4/mGQj+CuYvWoO08VciaaPvXQAt5EDwb/pQ+ETIXtj64eWrT/WUu/LKQMCYHyY1403cnsn8S4MRy2ygjCYAwFdz+4vgJ9eCOX2Z/6lfSjfWAQQXBAA4IvzvIdhbDrNfzPKEMNcecAcrYPXOymsAIODrj2YVGNKT5R/1gsVbdfW0VSflJQCg+cdB8KtwexLLX+ofDvGV181c092tAbi5uPIYLkdMYCKps7YOnbWj7UwZlJuzlGawowkwJ0aonEEjWUGIs8KwwrpFFBYN268fUILvazpbhNtfuyEEV9YBoP23oXnQzom1dersUGuKtbRrEHhufUA7WRGA0LMoxLoVKDYDgY2qKosvcXodwHEAQPjnIujbCORH7GBkw+EUa4DgO5LWzisS5qxX91AaDDZRO/hyQU1F6X+cBICjMcDkR99QyfTbIfyWhMZ2Hkiw/Y1Jy4VPRH3WHUqmn0HPsoEKoYtLzh+znPs2CNy+P3ErmnOt7DMJX/5JfQfbW99pi+C7AgI9ay+eSc+2khCDXHhyScEoX8YAiHT7gmFbrcz3SRM/a+jM2ceLEsUIJ/YIs1hUtdSL0SbWrt4ZSO0CIKTZVgqffD1polvCT1uf1BFrQGOxkEpSulHpKxdAL0CQet1gVX8Hm5NpX+8VorHQmCykG0fOWNPPNwDgnE2yakMHMfqL5hTzGtGY6lusAQEFybrBJvgCAOT70fzOKrPvReEfpQNNKcvcASzmaFiB3naP2faVQAR+o4DoqBULOwcsMLMIeilq2MM53437liMWih+H+wG4PY0L7kCiMVqxigiLWQQrcCNu50oNAAj/Bgu0ATl4J9P1nIXeBsE+j9tnVZWv3bpoeHNXf3f26NrilKZdzrn6c/zmWvym0OyzaIz7kJmcfnyE5i40b90wrrcbALamgXR4A7J7UzzIokg7p8WXBK75upa8d+fjI01txTrn1hf7IOcnPzwWl+mFq96xEDuhOGwFO8+rLo+/b1caaKsFgPCvF+2DXuTkInwAeyOa63csGbErl+d+9NA1X6CZMmhU7eNon8R1oal4pTXFirupVrxQIgv6vpRBIEz3CPHAKie/v6hHUeiyXIV/LG1fPHw7BHkpbpeYdQUHm5IWKJE4D11xAbTbBYHMFlHt33Wgw+zP7obQJtrBLFiD+RmXkDWdcUJE2AoonA2oKovvkWolEMIfItpHfYvplOrvdgmfCJZgPBRmqc1z6MqV2rZL2k4XIDRoivxNvnXbZhjaaDvN5aYFw8hc3gQQ7Mj2N4cxB13cykoJgPNFftzcrplN+0bvWHJtK7OZEFccRnp4S/ZAZqypTRO0AMYFUgHg6mmrCjHo/iJ90E6e7CN+7UWY/teZQ4RnvQor8FK2f9/aIfbGCgZkwG/ueiUsDQAKC5SBChdbBaGVPxPTmMccJkxvrj1z6TKeCsEiniENADIFmXKmDkT/Jl7z7oRZXu80ABAQroMVyKpWEL02pjmJUFjlg6UBANKW00R+32lup80y5gJRQMiPlIexY05fo5SeflchjQUoFrUAWU9AYeuYSwQLkHXcQVZATKn4cTJlAUIHHczstUOmsNktAKhq9gtdFuwfjMkEgJigBTFjAfa7BQBEuZ+ZMOH5AwCkgEIWQDOhLbGo2uoWALpH1cMmUjlXrarTFkBsUIqpDDLi1jgbW1NZ7xfg4rv9DWkAgIAlIZb3Zv+3LQmtl3tQ1XtlzxNhq5qQyQI0Cy58mHAX2iD3gkA162cjjxdVqmaZACBUP9cMszhXL3RN/3V2kVMAAH0hUxBYJ/L7iLn350NdXAcotWlOXdFn0gAgpHChnQtmjmJDCJeeNbq2v9PCH3hT9WloLs4yVU3XHRDKjHRjjzQAQM67XbQP2lqdnQvgHKb4Dy7kKmN5li+8CNCiO4Tx823SAKCmovRTuIFDQqseUVNW4JZBo2odKzUDi3MKmqxP8RZFxNgMXh4ATw/Ktg7wvhgAVBPawYsAggUOBn8P4Jndsv374m7Cm6/ftc2O2dYx50LnASKZOj0mQDASVuBmu4WPZ1CNg6x36tIcRDMAxFQbpAMASPjDCSVF5s7dG4b2IMxzqV0TGnhTzc/MWhqzc/gGWisdAOD3NsB3CS1ekOmk2jwm1gTCmma8AC29xoaofwSsTDWurO05jV3U/FMsdWbf6NvSAeCpKVfSqYiVov1QYSZz0XL6PF81tHU6lZ0XfT71AUBVgFV0ttDUIdc+MUsOXi2be/OlmnQAyMQB/xTtI12izXwUrQIIMxpbU29Dc38sYPIvaWrT6Ath5WZPDXdHFmNB8Ec8fNZOGdl9OngZTFgj1cYV6YTq8ORwQoiswY+AhY3Q4JcVhS1OJtpqd/31F4nv0PjCloQ2HJE+BZQ57cenhZ++FhwMBe/qkQ2ttFNAtheJGlGx+n4A4HbRPqnwggVlYRIIFDdCRB+qKt8NITdlBFaM2IEG/QOAhtb3I6KALeluiW7dU10ev+PoP6Q7HXwkMmcLdWb8XnSbODGUtlcLHrKIIlBMf1X02EMndM+5NeX56ESwFcKH9uvg2cN2y8f2DSG1laXbAILlVvTVr2c4l3jAMSK/f3JJgVXx0wvQ/l3SAyAdkSl8tkVMYf17FbBomHtO+ATMU3oVWNnlHCfG7QgAMp9VXWERmNiA4yNpbfOS5p/au0D4hc8x5p+0/z3fACAzqcn0CTWrLMGpvSPwtarrwqcx0FisEj6oEy7zTqfG7xgAqAo2tHexlX2e2KMAPjdsag+hdW6Nsf7QehqDxTQfcdNW3wGAqCOpT4UlsHRrEy22DOwbTUffTlGPIjX9TItrBBPVwcPNdlImjgJgxayhDTCVY63XRp6Ovik2iNkYG1DfVPLlpJ4FpjaumqCxVWXxFidl4soXQ0ZUrF4PIFxi16SothCtFzS1a8Jn8qgieHGhynrAwkRs/IQMLOPrcJOXf9vfSLkQ9E1Ix4TfUTi3RY2oKFO0WEnX6aPFIyrTQkUasjl2Tr6dBE3a3i2i2v6pmIzwqYrMWDcE4dq3g2EFngAAfuv0hInT9OGorj4aRRs3Fe7KGsNipH3fuZnFTxaAdsncmdSMkWB4zMnnkoDTC0lh5gnK7JmY5tbzXVtNeW56/HMIYw4LaKZdGz49DYCjOa+mG7vzWPg76w4l73dzAK4CAH6vAxZ5Yh4DYMKmBcM68xYARDB/z8MPrs03yWPOL0MBat0ehyfeqIQUTmmhni/Cp3cidiyISQuAqrL4v5nJatwyE9zeI9D+/wYA+Gp6Ng1WoCkPTP+hzpRR7hm+e2Ug0Ah6STTT7wAA0CtemjX0ywAAXVAsqt4PDdnuY/lv6RMLPeQpQHppMHSYBBoywccAGP/o+CGpAADf7gqo/OpqHwp/Bea20muD8uoW23FIlVJ+kTzcWhLzGe/JmMSLg4KmbFYV/oiPAr+FtD0+AIAJ6kjqlCo1+ED76zUHvwbuGwDQ9jE0FT7Q/jJof2MAgBwIKdPD0KDNEmv/R4NOjD7qaYB6eXCUMhkGGycrAEIKH2fn2X7fA4AI5nM1fOgyCbW/pqos/ornXZQMzOScTaBUSiL50zv+O6SIUWQYZE1F6XYEUw9IpP0LMOadAQAspKKIMsPqU0U2Cf8gwDpLmixFloE+NeVKelU8XYLAb2p1ebw5AIANdFa/wiXQsA89PMQP9n7Z+bhU6xQyDTaTUo316viQrYzZtGCYHgDA3oDwNTTVHhzas0hZ35CNn9IBID3oI2lhh1fGQ9/zgfZLub1dSgBUlcU/RqQ93zuA5PdA+z8JAOAgqQqbDa373ANDqSsI8T/JykdpAfDc9PhhVeF/9ID5v3Pp1KtaAwC4QPsaOv+C5j0Xhf9O3aHk32TmodQAoE+4QwiupYV0uofGEADA3bRwPZqlLjz66ery+EbZ+Sc9ADKmeBKadgcf2YZrsh945wsAwArsRfNnBx85D9q/LwCAhyiR1OdSXOiAtfm0I6nP8wvffAOAl2YNbdN0Y4rdzwkpfPKKWUPbAwB4kPY3Jp+Ghr5lo/ZvqCqLP+MnnvkKAJSSQUPH6DbUvsv0OYb5jBS/TQga+g6ap2zI+Z9EsPluAAAJCFZgCuIBy5Zn0ddhhTtXwj0AgLgVqOOc3WVVf6rC56DP/QEAJCJ47Lvht/dYoP0fo7nXr3zyLQBqK0sT8NuTLND+iVTPMACAhATB0Vc31wlE/q+jjyo/88jXAMhQTjUI3SzhHgDAWivwAVzBEzmkfY/BjfwrAIAPCIEcfauoxYT2N+Oalg+8yQsAQJMPmDyu5WoJ9wAANtC+hs770GRzYNP1Eu4BAGwgKsuu8KyObLtewj0AgE1UVRavgW9/5Vt8vydKuAcAsDkt7OoTtpn/Ni7fmJF3AMh8wvZrhZs4Z4vo/wUAyIdJc1YGc994jOmnEu5lecmLfJw0YoF6NJX/BwSv9FIJ9wAADlAsqi5EQ+Vbt/aJhRbmKx/yFgBUmh6mfzxdXivh7iT9T4ABADzRUdW+sBHQAAAAAElFTkSuQmCC"},"936e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:Object.assign({"c-dis-data-table":!0},e.themeClasses)},[a("v-menu",{attrs:{"close-on-content-click":!1,"offset-x":"","max-height":300},scopedSlots:e._u([{key:"activator",fn:function(t){return[a("v-btn",e._g({staticClass:"c-dis-data-table__select-columns",attrs:{color:"indigo",dark:"",icon:""}},t.on),[a("v-icon",[e._v("view_column")])],1)]}}]),model:{value:e.columnsPopover,callback:function(t){e.columnsPopover=t},expression:"columnsPopover"}},[a("v-card",[a("v-card-text",[a("v-checkbox",{attrs:{"hide-details":"",value:!0,label:"Select all"},model:{value:e.allColumnsSelected,callback:function(t){e.allColumnsSelected=t},expression:"allColumnsSelected"}}),e._l(e.fields,(function(t){return a("v-checkbox",{key:t.name,attrs:{"hide-details":"",value:t.name,label:t.label},model:{value:e.selectedColumns,callback:function(t){e.selectedColumns=t},expression:"selectedColumns"}})}))],2)],1)],1),a("div",{staticClass:"sticky-th",attrs:{role:"region","aria-label":"data table",tabindex:"0"}},[a("v-data-table",{directives:[{name:"sortable-columns",rawName:"v-sortable-columns",value:{onEnd:e.sortTheHeadersAndUpdateTheKey},expression:"{onEnd:sortTheHeadersAndUpdateTheKey}"}],ref:"table",class:{"elevation-1 c-dis-data-table__table":!0,"c-dis-data-table__table_compact":this.$store.state.compactUI},attrs:{headers:e.tableHeaders,items:e.items,pagination:e.pagination,"total-items":e.pagination.totalItems,loading:e.refreshing,"rows-per-page-items":[5,10,25,50,100,200],"select-all":""},on:{"update:pagination":[function(t){e.pagination=t},e.onPaginationUpdate]},scopedSlots:e._u([{key:"headers",fn:function(t){return[a("tr",[a("th",[a("v-checkbox",{attrs:{"input-value":t.all,indeterminate:t.indeterminate,"hide-details":"",title:t.all?"Deselect All":"Select All"},on:{click:function(t){return t.stopPropagation(),e.toggleAllItems(t)}}})],1),e._l(t.headers.filter((function(e){return e.value})),(function(t){return a("th",{key:t.value,class:["column sortable",e.pagination.descending?"desc":"asc",t.value===e.pagination.sortBy?"active":""],on:{click:function(a){return e.changeSort(t.value)}}},[e._v(" "+e._s(t.text)+" "),a("v-icon",{attrs:{small:""}},[e._v("arrow_upward")])],1)}))],2)]}},{key:"items",fn:function(t){return[a("tr",{attrs:{active:e.internalValue&&e.internalValue.id===t.item.id},on:{click:function(){return e.updateValue(t.item)}}},[a("td",[a("v-checkbox",{attrs:{"input-value":t.selected,"hide-details":""},on:{click:function(e){e.stopPropagation(),t.selected=!t.selected}}})],1),e._l(e.selectedFields,(function(r){return a("td",{key:r.name},[r.formatter&&"string"===typeof e.renderField(t.item,r)&&e.renderField(t.item,r).startsWith("http")?a("a",{attrs:{href:e.renderField(t.item,r),target:"window_"+r.name}},[e._v(" "+e._s(e.renderField(t.item,r,!0))+" ")]):a("span",{domProps:{innerHTML:e._s(e.renderField(t.item,r))}})])}))],2)]}},{key:"pageText",fn:function(t){return[e._v(" "+e._s(t.pageStart)+"-"+e._s(t.pageStop)+" of "+e._s(t.itemsLength)+" "),a("v-btn",{attrs:{flat:"",icon:"",disabled:e.items.length&&0===e.items.length||1===e.pagination.page},on:{click:function(t){return e.setPaginationPage(1)}}},[a("v-icon",[e._v("first_page")])],1)]}},{key:"no-data",fn:function(){return[a("span",[e._v(" No data available for this filter setting. Create first record with "),a("code",[e._v("Shift+Alt+n")]),e._v('" ')])]},proxy:!0},{key:"actions-append",fn:function(){return[a("v-btn",{attrs:{flat:"",icon:"",disabled:e.items.length&&0===e.items.length||e.pagination.page===Math.ceil(e.pagination.totalItems/e.pagination.rowsPerPage)},on:{click:function(t){e.setPaginationPage(Math.ceil(e.pagination.totalItems/e.pagination.rowsPerPage))}}},[a("v-icon",[e._v("last_page")])],1),a("dis-select-report",{attrs:{disabled:e.refreshing,reports:e.reports},on:{"select:report":e.onMultiRecordsReportClick}})]},proxy:!0}]),model:{value:e.selectedItems,callback:function(t){e.selectedItems=t},expression:"selectedItems"}})],1)],1)},n=[],s=a("4148"),i=s["a"],o=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),m=a("99d9"),p=a("ac7c"),f=a("8fea"),_=a("132d"),v=a("e449"),h=Object(o["a"])(i,r,n,!1,null,"7cb45102",null);t["default"]=h.exports;c()(h,{VBtn:u["a"],VCard:d["a"],VCardText:m["b"],VCheckbox:p["a"],VDataTable:f["a"],VIcon:_["a"],VMenu:v["a"]})},9806:function(e,t,a){"use strict";a("9f52")},"9a5d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-text-field",e._g(e._b({attrs:{value:e.value,rules:e.getRules(),label:e.inputLabel,"error-messages":e.fieldServerValidationErrors,type:"time"}},"v-text-field",e.$attrs,!1),e.listeners))},n=[],s=a("39f3"),i={name:"DisTimeInput",mixins:[s["a"]],props:{value:{type:String}},data:function(){return{}},methods:{}},o=i,l=a("2877"),c=a("6544"),u=a.n(c),d=a("2677"),m=Object(l["a"])(o,r,n,!1,null,"087b85c7",null);t["default"]=m.exports;u()(m,{VTextField:d["a"]})},"9a99":function(e,t,a){var r={"./DisAutoIncrementInput.vue":"f482","./DisDateInput.vue":"e847","./DisDateTimeInput.vue":"b313","./DisSelectInput.vue":"2a21","./DisSwitchInput.vue":"7560","./DisTextInput.vue":"bdc3","./DisTextareaInput.vue":"159e","./DisTimeInput.vue":"9a5d"};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id="9a99"},"9c55":function(e,t,a){var r={"./FilesForm.vue":"5225"};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id="9c55"},"9e14":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{staticClass:"c-dis-select-report",attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){return[a("v-btn",e._g({directives:[{name:"el-mousetrap",rawName:"v-el-mousetrap",value:{keys:"down",disabled:e.showMenu},expression:"{keys: 'down', disabled: showMenu}"}],staticClass:"c-dis-select-report__btn-export",attrs:{disabled:e.disabled,dark:""},on:{mousetrap:function(t){t.preventDefault(),e.showMenu=!0}}},t.on),[e._v("Export "),a("v-icon",[e._v("expand_more")])],1)]}}]),model:{value:e.showMenu,callback:function(t){e.showMenu=t},expression:"showMenu"}},[a("v-card",{attrs:{width:"400"}},[a("v-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.getTabs(),(function(t){return a("v-tab",{key:t.id,attrs:{disabled:0===t.reports.length}},[e._v(e._s(t.title))])})),1),a("v-tabs-items",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.getTabs(),(function(t){return a("v-tab-item",{key:t.id},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-list",{attrs:{avatar:""}},e._l(t.reports,(function(t,r){return a("v-list-tile",{key:r,on:{click:function(){return e.onSelectReport(t)}}},[a("v-list-tile-action",["report"===t.type&&t.directPrint?a("v-icon",[e._v("print")]):"report"===t.type?a("v-icon",[e._v("assignment")]):e._e(),"export"===t.type?a("v-icon",[e._v("assignment_returned")]):e._e(),"action"===t.type?a("v-icon",[e._v("flash_on")]):e._e()],1),a("v-list-tile-title",[e._v(e._s(t.title))])],1)})),1)],1)],1)],1)})),1)],1)],1)},n=[],s=a("1da1"),i=(a("4de4"),a("d3b7"),a("96cf"),{name:"DisSelectReport",props:{reports:{type:Array,required:!0},disabled:{type:Boolean}},data:function(){return{showMenu:!1,activeTab:null}},created:function(){},beforeDestroy:function(){},mounted:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},computed:{onlyReports:function(){return this.reports.filter((function(e){return"report"===e.type}))},onlyExports:function(){return this.reports.filter((function(e){return"export"===e.type}))},onlyActions:function(){return this.reports.filter((function(e){return"action"===e.type}))}},methods:{onSelectReport:function(e){this.showMenu=!1,this.$emit("select:report",e)},getTabs:function(){return[{id:0,title:"Reports",reports:this.onlyReports},{id:1,title:"Exports",reports:this.onlyExports},{id:2,title:"Actions",reports:this.onlyActions}]}},watch:{}}),o=i,l=a("2877"),c=a("6544"),u=a.n(c),d=a("8336"),m=a("b0af"),p=a("99d9"),f=a("132d"),_=a("8860"),v=a("ba95"),h=a("40fe"),g=a("5d23"),b=a("e449"),y=a("71a3"),x=a("c671"),w=a("fe57"),k=a("aac8"),C=Object(l["a"])(o,r,n,!1,null,"414e9118",null);t["default"]=C.exports;u()(C,{VBtn:d["a"],VCard:m["a"],VCardText:p["b"],VIcon:f["a"],VList:_["a"],VListTile:v["a"],VListTileAction:h["a"],VListTileTitle:g["b"],VMenu:b["a"],VTab:y["a"],VTabItem:x["a"],VTabs:w["a"],VTabsItems:k["a"]})},"9f52":function(e,t,a){},a029:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"login"!==e.$route.name?a("v-breadcrumbs",{class:{"v-breadcrumbs-compact":this.$store.state.compactUI},attrs:{items:e.breadcrumbs}}):e._e()},n=[],s=(a("b0c0"),a("d81d"),a("d3b7"),a("159b"),a("b64b"),a("ac1f"),a("5319"),a("4de4"),a("8a79"),{name:"DisBreadcrumbs",methods:{getBreadcrumb:function(e){if(e.meta&&e.meta.breadcrumb){var t=e.meta.breadcrumb;return"function"===typeof t?t(this.$route.params):t}return e.name}},computed:{breadcrumbs:{get:function(){var e=this,t=this.$route.matched.map((function(t){var a=t.path.length?t.path:"/",r={path:a,meta:t.meta,name:t.name};Object.keys(e.$route.params).forEach((function(t){a=a.replace(":"+t,e.$route.params[t])}),e),r.path=a;var n=e.$router.resolve({path:a});return{text:e.getBreadcrumb(r),disabled:r.meta.breadcrumbDisabled||!1,href:n.href}}),this),a=t.filter((function(e){return"Dashboard"===e.text||!e.href.endsWith("/")}));return a.length>0&&(a[a.length-1].disabled=!0),a}}}}),i=s,o=a("2877"),l=a("6544"),c=a.n(l),u=a("2bc5"),d=Object(o["a"])(i,r,n,!1,null,"dd061006",null);t["default"]=d.exports;c()(d,{VBreadcrumbs:u["a"]})},a6ae:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-simple-panel"},[a("div",{staticClass:"c-simple-panel__head"},[e._t("head"),a("v-spacer"),a("v-btn",{attrs:{small:"",icon:""},on:{click:function(t){e.fullView=!e.fullView}}},[this.fullView?e._e():a("v-icon",[e._v("arrow_drop_down")]),this.fullView?a("v-icon",[e._v("arrow_drop_up")]):e._e()],1)],2),e.fullView?a("div",{staticClass:"c-simple-panel__content"},[e._t("default")],2):e._e()])},n=[],s={name:"DisSimplePanel",props:{newColumnAdded:{type:Boolean}},created:function(){this.newColumnAdded&&(this.fullView=this.newColumnAdded)},data:function(){return{fullView:!1}}},i=s,o=(a("d120"),a("2877")),l=a("6544"),c=a.n(l),u=a("8336"),d=a("132d"),m=a("9910"),p=Object(o["a"])(i,r,n,!1,null,"3e9e4a61",null);t["default"]=p.exports;c()(p,{VBtn:u["a"],VIcon:d["a"],VSpacer:m["a"]})},abd4:function(e,t,a){},abe1:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-snackbar",{attrs:{bottom:"bottom"===e.snackbar.y,left:"left"===e.snackbar.x,"multi-line":e.snackbar.multiLine,right:"right"===e.snackbar.x,timeout:e.snackbar.timeout,top:"top"===e.snackbar.y,vertical:!0===e.snackbar.mobile,color:e.snackbar.color},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" "+e._s(e.snackbar.text)+" "),a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.closeSnackbar()}}},[e._v(" Close ")])],1)},n=[],s=a("5530"),i=a("2f62"),o={name:"DisSnackbar",computed:Object(s["a"])({},Object(i["b"])(["snackbar"])),methods:Object(s["a"])({},Object(i["c"])({closeSnackbar:"CLOSE_SNACKBAR"}))},l=o,c=a("2877"),u=a("6544"),d=a.n(u),m=a("8336"),p=a("2db4"),f=Object(c["a"])(l,r,n,!1,null,"57442389",null);t["default"]=f.exports;d()(f,{VBtn:m["a"],VSnackbar:p["a"]})},af16:function(e,t,a){"use strict";a("09c7")},b11c:function(e,t,a){"use strict";t["a"]=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2?arguments[2]:void 0;function n(){var n=this,s=arguments,i=function(){t=null,r||e.apply(n,s)};clearTimeout(t),r&&!t&&e.apply(this,s),t=setTimeout(i,a)}return n.cancel=function(){clearTimeout(t)},n}},b19f:function(e,t,a){},b229:function(module,__webpack_exports__,__webpack_require__){"use strict";var C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("2909"),C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("1da1"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("2532"),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("07ac"),core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_12__),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("96cf"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_13__);__webpack_exports__["a"]={name:"DisSmartForm",data:function(){return{ready:!1}},watch:{"$route.params.formName":{immediate:!0,handler:function(){var e=Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.ready=!1,e.next=3,this.$nextTick();case 3:return e.prev=3,e.next=6,this.$store.dispatch("templates/getFormTemplate",this.$route.params.formName);case 6:return e.next=8,this.$nextTick();case 8:this.ready=!0,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),this.$dialog.notify.warning(e.t0.message);case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));function t(t){return e.apply(this,arguments)}return t}()}},computed:{formTemplate:function(){var e=this;return this.$store.state.templates.forms.find((function(t){return t.name===e.$route.params.formName}))},subFormsWithPermission:function(){var e=this,t=[],a=this.$store.state.appForms;for(var r in a)t=[].concat(Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__["a"])(t),Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__["a"])(a[r].map((function(e){return e["key"]}))));return t.filter((function(t){return Object.keys(e.formTemplate.subForms).includes(t)}))},supFormsWithPermission:function(){var e=this,t=[],a=this.$store.state.appForms;for(var r in a)t=[].concat(Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__["a"])(t),Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__["a"])(a[r].map((function(e){return e["key"]}))));return t.filter((function(t){return Object.keys(e.formTemplate.supForms).includes(t)}))},formName:function(){return this.formTemplate.name},dataModel:function(){return this.formTemplate.dataModel},selectSources:function(){return this.formTemplate.fields.reduce((function(e,t,a){return"select"===t.formInput.type&&(e[t.name]=t.formInput.selectSource),e}),{})},requiredFilters:function(){return this.formTemplate.requiredFilters},filterDataModels:function(){return this.formTemplate.filterDataModels},calculatedFields:function calculatedFields(){var calculated={};return this.formTemplate.fields.filter((function(e){return""!==e.formInput.jsCalculate})).map((function(item){calculated[item.name]=function(){return eval(item.formInput.jsCalculate)}})),calculated},fieldsGroups:function(){var e=this.formTemplate.fields.reduce((function(e,t,a){return e[t.group]||(e[t.group]=[]),e[t.group].push(t),e}),{}),t=[];return Object.values(e).forEach((function(e){t=[].concat(Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__["a"])(t),Object(C_Users_dinhn_Workspace_Arbeit_IG_dis_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e))})),this.$store.state.compactUI?{allInOneGroup:t}:e}},methods:{getInputComponent:function(e){switch(e){case"text":return"DisTextInput";case"autoIncrement":return"DisAutoIncrementInput";case"select":return"DisSelectInput";case"switch":return"DisSwitchInput";case"datetime":return"DisDateTimeInput";case"date":return"DisDateInput";case"time":return"DisTimeInput";case"textarea":return"DisTextareaInput";default:throw new Error("Dis: Unsupported input type '".concat(e,"'"))}}}}},b313:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-datetime-input"},[a("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"pickerInput",staticClass:"picker-input",attrs:{type:"text"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}},e.listeners)),a("v-text-field",e._b({attrs:{"data-input":"true",rules:e.getRules(),label:e.inputLabel,"error-messages":e.fieldServerValidationErrors,"append-outer-icon":"schedule"},on:{focus:e.onFocus,"click:append-outer":e.onOuterIconClick}},"v-text-field",e.$attrs,!1))],1)},n=[],s=a("39f3"),i=a("cf06"),o=a.n(i),l={name:"DisDateTimeInput",components:{},mixins:[s["a"]],props:{value:{default:null,required:!0,validator:function(e){return null===e||e instanceof Date||"string"===typeof e||e instanceof String||e instanceof Array||"number"===typeof e}}},data:function(){return{displayValue:null}},mounted:function(){if(!this.fp){var e={wrap:!0,enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultDate:this.value||null,onOpen:this.onCalendarOpen,parseDate:this.parseDate,clickOpens:!1,onValueUpdate:this.onPickerValueUpdate,disableMobile:!0};this.fp=new o.a(this.$el,e),this.$watch("disabled",this.watchDisabled,{immediate:!0})}},methods:{fpInput:function(){return this.fp.altInput||this.fp.input},watchDisabled:function(e){e?this.fpInput().setAttribute("disabled",e):this.fpInput().removeAttribute("disabled")},onCalendarOpen:function(){(this.$attrs.readonly||this.$attrs.disabled)&&this.fp.close()},parseDate:function(e,t){return e?this.$dateTime(e).dateObject:null},formatDate:function(e,t){return this.$dateTime(e).formatForInput()},onFocus:function(){!this.fp.isOpen&&this.fp.open()},onPickerValueUpdate:function(e){this.$emit("input",this.$dateTime(e).toUtc().formatForDB())},onOuterIconClick:function(){!this.$attrs.disabled&&!this.$attrs.readonly&&this.$emit("input",this.$dateTime(new Date).toUtc().formatForDB())}},watch:{value:function(e){if(e||!this.fp){var t=this.fpInput().value?this.$dateTime(this.fpInput().value).toUtc().formatForDisplay():this.fpInput().value;if(e!==t&&e&&this.fp){var a=this.$dateTime(e).dateObject;this.fp&&this.fp.setDate(this.$dateTime(a).asUtc().formatForInput(),!0)}}else this.fp.setDate(null,!0)}},beforeDestroy:function(){this.fp&&(this.fp.destroy(),this.fp=null)}},c=l,u=(a("0a0f"),a("2877")),d=a("6544"),m=a.n(d),p=a("2677"),f=Object(u["a"])(c,r,n,!1,null,"cf5d8636",null);t["default"]=f.exports;m()(f,{VTextField:p["a"]})},b4bd:function(e,t,a){"use strict";var r=a("53ca"),n=a("b85c"),s=a("3835"),i=a("d4ec"),o=a("bee2"),l=a("257e"),c=a("262e"),u=a("2caf"),d=a("ade3"),m=(a("99af"),a("ac1f"),a("00b4"),a("4fad"),a("d3b7"),a("159b"),a("b64b"),a("6661")),p=a("bc3a"),f=a.n(p),_=a("e34c"),v=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(e){var r;return Object(i["a"])(this,a),r=t.call(this,e),Object(d["a"])(Object(l["a"])(r),"localStorage",new _["a"](r.model)),r._controller=r.baseUrl+"api/v1/form",r}return Object(o["a"])(a,[{key:"getList",value:function(e,t){var a=this;return f.a.get("".concat(this._controller,"?name=").concat(this.model,"&").concat(this.encodeQueryParams(e)).concat(t?"&"+m["a"].encodeFilterParams(t):""),{headers:this.getBearerHeader()}).then((function(e){return a.setUuidsInStorage(e.data.items),e.data.items=a.loadMissedUuid(e.data.items),e.data}))}},{key:"get",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f.a.get("".concat(this._controller,"/").concat(e,"?name=").concat(this.model,"&").concat(this.encodeQueryParams(a)),{headers:this.getBearerHeader()}).then((function(e){return t.setUuidsInStorageSingleItem(e.data),e.data=t.loadMissedUuidSingleItem(e.data),e.data}))}},{key:"post",value:function(e){var t=this;return f.a.post("".concat(this._controller,"?name=").concat(this.model),e,{headers:this.getBearerHeader()}).then((function(e){return t.setUuidsInStorageSingleItem(e.data),e.data=t.loadMissedUuidSingleItem(e.data),e}))}},{key:"put",value:function(e,t){var a=this;return f.a.put("".concat(this._controller,"/").concat(e,"?name=").concat(this.model),t,{headers:this.getBearerHeader()}).then((function(e){return a.setUuidsInStorageSingleItem(e.data),e.data=a.loadMissedUuidSingleItem(e.data),e}))}},{key:"getDuplicate",value:function(e,t){var a=this;return f.a.post("".concat(this._controller,"/duplicate?name=").concat(this.model,"&id=").concat(e),t,{headers:this.getBearerHeader()}).then((function(e){return a.setUuidsInStorageSingleItem(e.data),e.data=a.loadMissedUuidSingleItem(e.data),e}))}},{key:"checkIfValidUUID",value:function(e){var t=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi;return t.test(e)}},{key:"loadMissedUuid",value:function(e){for(var t=this,a=this.localStorage.uuidsList,r=function(){for(var r=Object(s["a"])(i[n],2),o=r[0],l=r[1],c=function(){var r=Object(s["a"])(d[u],2),n=r[0],i=r[1];if("string"===typeof i&&t.checkIfValidUUID(i)&&i&&a.forEach((function(t){i===t.uuid&&(e[o][n]=t.data)})),Array.isArray(i))for(var l=function(){var t=Object(s["a"])(m[c],2),r=t[0],i=t[1];i&&a.forEach((function(t){i===t.uuid&&(e[o][n][r]=t.data)}))},c=0,m=Object.entries(i);c<m.length;c++)l()},u=0,d=Object.entries(l);u<d.length;u++)c()},n=0,i=Object.entries(e);n<i.length;n++)r();return this.localStorage.uuidsList=null,this.localStorage.removeKey("@uuids"),e}},{key:"loadMissedUuidSingleItem",value:function(e){for(var t=this,a=this.localStorage.uuidsList,r=function(){var r=Object(s["a"])(i[n],2),o=r[0],l=r[1];if("string"===typeof l&&t.checkIfValidUUID(l)&&l&&a.forEach((function(t){l===t.uuid&&(e[o]=t.data)})),Array.isArray(l))for(var c=function(){var t=Object(s["a"])(d[u],2),r=t[0],n=t[1];n&&a.forEach((function(t){n===t.uuid&&(e[o][r]=t.data)}))},u=0,d=Object.entries(l);u<d.length;u++)c()},n=0,i=Object.entries(e);n<i.length;n++)r();return this.localStorage.uuidsList=null,this.localStorage.removeKey("@uuids"),e}},{key:"setUuidsInStorage",value:function(e){var t,a=[],i=Object(n["a"])(e);try{for(i.s();!(t=i.n()).done;)for(var o=t.value,l=0,c=Object.entries(o);l<c.length;l++){var u=Object(s["a"])(c[l],2),d=u[0],m=u[1];d&&"object"===Object(r["a"])(m)&&m&&m.hasOwnProperty("@uuid")&&Object.keys(m).length>1&&a.push({uuid:m["@uuid"],data:m}),Array.isArray(m)&&m.forEach((function(e){e&&e.hasOwnProperty("@uuid")&&Object.keys(e).length>1&&a.push({uuid:e["@uuid"],data:e})}))}}catch(p){i.e(p)}finally{i.f()}this.localStorage.uuidsList=a}},{key:"setUuidsInStorageSingleItem",value:function(e){for(var t=[],a=0,n=Object.entries(e);a<n.length;a++){var i=Object(s["a"])(n[a],2),o=i[0],l=i[1];o&&"object"===Object(r["a"])(l)&&l&&l.hasOwnProperty("@uuid")&&Object.keys(l).length>1&&t.push({uuid:l["@uuid"],data:l}),Array.isArray(l)&&l.forEach((function(e){e&&e.hasOwnProperty("@uuid")&&Object.keys(e).length>1&&t.push({uuid:e["@uuid"],data:e})}))}this.localStorage.uuidsList=t}}]),a}(m["a"]);t["a"]=v},bd14:function(e,t,a){},bdb2:function(e,t,a){"use strict";a("bd14")},bdc3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-text-field",e._g(e._b({attrs:{value:e.value,rules:e.getRules(),label:e.inputLabel,counter:e.getCounter(),"error-messages":e.fieldServerValidationErrors,type:e.hasNumberValidator?"number":"text"}},"v-text-field",e.$attrs,!1),e.listeners))},n=[],s=(a("a9e3"),a("7db0"),a("d3b7"),a("39f3")),i={name:"DisTextInput",mixins:[s["a"]],props:{value:{type:[String,Number]}},methods:{getCounter:function(){var e=this.validators.find((function(e){return"string"===e.type}));return e?e.max:null}}},o=i,l=a("2877"),c=a("6544"),u=a.n(c),d=a("2677"),m=Object(l["a"])(o,r,n,!1,null,"b68aab96",null);t["default"]=m.exports;u()(m,{VTextField:d["a"]})},c626:function(e,t,a){"use strict";a("3a35")},c7d2b:function(e,t,a){},c848:function(e,t,a){},cf05:function(e,t,a){e.exports=a.p+"img/logo.0ea01cf5.png"},d120:function(e,t,a){"use strict";a("3417")},d255:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-dis-qr-code-scanner"},[a("v-text-field",{ref:"dialogInput",attrs:{loading:e.isLoading,disabled:e.isLoading,"single-line":"","hide-details":"",autofocus:"",clearable:"",type:"text",label:"Enter (or scan) igsn code"},on:{"click:clear":e.clearFoundForms},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter(t)}},model:{value:e.qrCode,callback:function(t){e.qrCode=t},expression:"qrCode"}}),e.foundForms.length?a("v-list",e._l(e.foundForms,(function(t,r){return a("v-list-tile",{key:r,attrs:{to:"/forms/"+t.name+"-form/"+t.id+"?"+e.filterToString(t.filter)}},[e._v(" "+e._s(t.name)+"@"+e._s(t.id)+", "+e._s(t.info)+" ")])})),1):e._e()],1)},n=[],s=a("b85c"),i=a("1da1"),o=(a("96cf"),a("99af"),a("b0c0"),a("4de4"),a("d3b7"),a("d3fe")),l=a("4851"),c={name:"DisQrCodeScanner",mixins:[l["a"]],props:{isGlobalScanner:{type:Boolean,default:!0}},data:function(){return{isActive:!1,qrCode:"",isLoading:!1,foundForms:[]}},computed:{dialog:{get:function(){return this.isGlobalScanner&&this.isActive},set:function(e){this.isGlobalScanner&&(this.isActive=e)}}},created:function(){this.appService=new o["a"]},mounted:function(){},methods:{toggleActive:function(){this.isActive=!this.isActive},clearFoundForms:function(){this.foundForms=[]},onEnter:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,o,l,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,a=[],t.next=5,e.appService.findIgsn(e.qrCode);case 5:r=t.sent,n=Object(s["a"])(e.$store.state.templates.summary.forms);try{for(n.s();!(i=n.n()).done;){o=i.value,l=Object(s["a"])(r);try{for(l.s();!(c=l.n()).done;)u=c.value,u.data_model===o.dataModel&&a.push({id:u.id,name:o.name,info:u.info,filter:u.filter})}catch(d){l.e(d)}finally{l.f()}}}catch(d){n.e(d)}finally{n.f()}e.foundForms=a,1===a.length&&(e.$router.push("/forms/".concat(a[0].name,"-form/").concat(a[0].id,"?").concat(e.filterToString(a[0].filter))),e.isActive=!1),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](1),console.log(t.t0),e.$dialog.notify.warning(t.t0.response.data.message,{timeout:3e4});case 16:return t.prev=16,e.isLoading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,12,16,19]])})))()}},watch:{dialog:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=6;break}return a.next=3,t.$nextTick();case 3:t.$refs.dialogInput.focus(),a.next=8;break;case 6:t.foundForms=[],t.qrCode="";case 8:case"end":return a.stop()}}),a)})))()}}},u=c,d=a("2877"),m=a("6544"),p=a.n(m),f=a("8860"),_=a("ba95"),v=a("2677"),h=Object(d["a"])(u,r,n,!1,null,null,null);t["default"]=h.exports;p()(h,{VList:f["a"],VListTile:_["a"],VTextField:v["a"]})},d3fe:function(e,t,a){"use strict";var r=a("1da1"),n=a("d4ec"),s=a("bee2"),i=a("262e"),o=a("2caf"),l=(a("96cf"),a("99af"),a("de5f")),c=a("bc3a"),u=a.n(c),d=function(e){Object(i["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.call(this),e._controller=e.baseUrl+"api/v1/app",e}return Object(s["a"])(a,[{key:"getForms",value:function(){return u.a.get("".concat(this._controller,"/forms"),{headers:this.getBearerHeader()}).then((function(e){return e}))}},{key:"getReports",value:function(){return u.a.get("".concat(this._controller,"/reports"),{headers:this.getBearerHeader()}).then((function(e){return e.data}))}},{key:"getAppConfig",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,e.next=3,u.a.get("".concat(this._controller,"/config").concat(t?"/".concat(t):""),{headers:this.getBearerHeader()});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveAppConfig",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("".concat(this._controller,"/config"),t,{headers:this.getBearerHeader()});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUserConfig",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,e.next=3,u.a.get("".concat(this._controller,"/user-config").concat(t?"/".concat(t):""),{headers:this.getBearerHeader()});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveUserConfig",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("".concat(this._controller,"/user-config"),t,{headers:this.getBearerHeader()});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"findIgsn",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("".concat(this._controller,"/find-igsn/").concat(t),{headers:this.getBearerHeader()});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getMessages",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("".concat(this._controller,"/get-messages"),{headers:this.getBearerHeader()});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(l["a"]);t["a"]=d},d742:function(e,t,a){"use strict";a("c848")},d7b2:function(e,t,a){},de28:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("25f0"),a("b64b"),a("d3b7");function r(e,t){if(null===e||void 0===e||null===t||void 0===t)return e===t;if(e.constructor!==t.constructor)return!1;if(e instanceof Function)return e===t;if(e instanceof RegExp)return e===t;if(e===t||e.valueOf()===t.valueOf())return!0;if(Array.isArray(e)&&e.length!==t.length)return!1;if(e instanceof Date)return!1;if(!(e instanceof Object))return!1;if(!(t instanceof Object))return!1;var a=Object.keys(e);return Object.keys(t).every((function(e){return-1!==a.indexOf(e)}))&&a.every((function(a){return r(e[a],t[a])}))}},de5f:function(e,t,a){"use strict";var r=a("d4ec"),n=a("bee2"),s=(a("d3b7"),a("a15b"),a("bc3a")),i=a.n(s),o=a("4dd0"),l=a.n(o),c=function(){function e(){Object(r["a"])(this,e),this.baseUrl=window.baseUrl,this._authController=this.baseUrl+"api/v1/auth"}return Object(n["a"])(e,[{key:"isLoggedIn",value:function(){return!!e.user&&!!e.user.token}},{key:"getBearerHeader",value:function(){return this.isLoggedIn()?{Authorization:"Bearer "+e.user.token}:{}}},{key:"login",value:function(t){var a=this,r=t.username,n=t.password;return new Promise((function(t,s){i.a.post("".concat(a._authController,"/login"),{username:r,password:n},{"Cache-Control":"no-store, no-cache, must-revalidate"}).then((function(a){200===a.status&&(e.user=a.data,t(a.data))})).catch((function(e){return s(e)}))}))}},{key:"refresh",value:function(){var t=this;return new Promise((function(a,r){i.a.get("".concat(t._authController,"/refresh"),{"Cache-Control":"no-store, no-cache, must-revalidate",headers:t.getBearerHeader()}).then((function(t){200===t.status&&(e.user=t.data,a(t.data))})).catch((function(e){return r(e)}))}))}},{key:"logout",value:function(){var t=this;return new Promise((function(a,r){i.a.post("".concat(t._authController,"/logout"),null,{headers:t.getBearerHeader()}).then((function(e){e||console.warn("was not able to regenerate token on server"),a()})).catch((function(e){return r(e)})).finally((function(){e.user=null}))}))}},{key:"encodeQueryParams",value:function(e){if(!e)return"";var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}}],[{key:"user",get:function(){var e=l.a.get(window.baseUrl+"user");return e||null},set:function(e){l.a.set(window.baseUrl+"user",e)}},{key:"lastError",get:function(){return e._lastError?e._lastError:null},set:function(t){e._lastError=t}},{key:"bootstrap",value:function(){i.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}}]),e}();t["a"]=c},e014:function(e,t,a){},e213:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{md12:"",lg7:"",xl8:""}},[a("v-form",{ref:"form"},[a("v-layout",{attrs:{row:"",wrap:"","pl-1":""}},[e._l(e.dataModels,(function(t,r){return a("v-flex",{key:r,attrs:{md2:"",lg2:"",sm4:"",xs12:"","pa-1":""}},[a("v-autocomplete",{ref:"filter",refInFor:!0,attrs:{rules:e.fieldRules,loading:e.loading,clearable:!0,items:e.cascadeListItems[r]?e.localStorage.ascFilterLists.includes(r)?e.cascadeListItems[r].slice().reverse():e.cascadeListItems[r]:[],label:r,"item-text":["expedition","site","hole","core","section"].includes(r)?function(e){return""+e.text}:function(e){return e.value+" | "+e.text},disabled:e.isCodeScanEnabled,"hide-details":"",filter:function(e,t){return String(e.text).toLowerCase().startsWith(t.toLowerCase())},"prepend-inner-icon":e.localStorage.ascFilterLists.includes(r)?"arrow_upward":"arrow_downward",placeholder:"Show All"},on:{"click:prepend-inner":function(){return e.switchListSortDirection(r)},change:e.refreshCascadeListItems,focus:e.handleValidationAfterFocus},model:{value:e.selected[r],callback:function(t){e.$set(e.selected,r,t)},expression:"selected[key]"}})],1)})),a("v-flex",{attrs:{shrink:"","align-self-end":""}},[a("v-btn",{attrs:{icon:"",flat:"",color:"primary",title:"refresh all filter lists"},on:{click:e.getFilterListItems}},[a("v-icon",[e._v("refresh")])],1)],1)],2)],1)],1),a("v-flex",{attrs:{md12:"",lg5:"",xl4:"","pr-1":""}},[a("v-layout",{attrs:{"align-center":"","justify-end":"",wrap:""}},[a("v-flex",{attrs:{shrink:""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-switch",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:e.shortcuts.toggleFilterByValue,disabled:!1},expression:"{keys: shortcuts.toggleFilterByValue, disabled: false}"}],staticClass:"c-dis-form__btn-switchfilter",attrs:{label:"Toggle Filter",disabled:e.isCodeScanEnabled},on:{mousetrap:function(t){t.preventDefault(),e.filterByValues=!e.filterByValues}},model:{value:e.filterByValues,callback:function(t){e.filterByValues=t},expression:"filterByValues"}}),a("v-dialog",{directives:[{name:"mousetrap",rawName:"v-mousetrap",value:{keys:e.shortcuts.openFilterByValueForm,disabled:!1},expression:"{keys: shortcuts.openFilterByValueForm, disabled: false}"}],on:{mousetrap:function(t){t.preventDefault(),e.filterModelDialog=!e.filterModelDialog}},scopedSlots:e._u([{key:"activator",fn:function(t){return[a("v-btn",e._g({staticClass:"c-dis-form__btn-editfilter",attrs:{title:"Create or change table-filter",disabled:e.isCodeScanEnabled}},t.on),[a("v-icon",{staticClass:"pr-1"},[e._v("filter_list")]),a("span",{staticClass:"filtertext"},[e._v("Create Filter")])],1)]}}]),model:{value:e.filterModelDialog,callback:function(t){e.filterModelDialog=t},expression:"filterModelDialog"}},[a("v-card",[a("v-card-title",[a("h2",[e._v("Create Filter")]),a("v-spacer"),a("v-flex",{staticClass:"text-xs-right"},[a("span",[a("v-tooltip",{attrs:{left:"","close-delay":"1200"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("div",{staticClass:"text-xs-right mt-2"},[a("span",e._g({},r),[e._v("MiniHelp ")])])]}}]),model:{value:e.showMiniHelp,callback:function(t){e.showMiniHelp=t},expression:"showMiniHelp"}},[a("v-flex",{staticClass:"text-xs-left"},[e._v(" For filtering "),a("b",[e._v("numerical")]),e._v(" data, use math operators such as "),a("code",[e._v("> 400")]),e._v(" or "),a("code",[e._v("= 3.141")]),e._v("."),a("br"),e._v(" For searching "),a("b",[e._v("text")]),e._v(" columns, use regular expressions such as "),a("code",[e._v(".*Smith.*")]),a("br"),e._v(' to find any text matching "Smith" (Here, "Joe Smith" and "Smithsonian").'),a("br")]),a("v-flex",{staticClass:"text-xs-right"},[a("a",{attrs:{target:"_blank",href:"https://data.icdp-online.org/mdis-docs/guide/viewer-operator.html#filtering"}},[e._v("More information")])])],1),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.close;return[a("v-icon",e._g({attrs:{color:"primary",dark:""},on:{click:function(t){e.filterModelDialog=!1}}},r),[e._v("close")])]}}])},[a("span",[e._v("Close filters")])])],1)])],1),a("v-card-text",[a("v-form",{ref:"filterByValueForm",staticClass:"c-dis-form__filter-form",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.applyFilterModelValues(t)}}},[a("v-container",{attrs:{fluid:"","grid-list-md":"","pa-0":""}},e._l(e.fieldsGroups,(function(t,r){return a("v-layout",{key:r,attrs:{row:"",wrap:""}},[t.startsWith("-")?e._e():a("v-flex",{staticClass:"title",attrs:{xs12:""}},[e._v(" "+e._s(t)+" ")]),e._l(e.fields.filter((function(e){return e.group===t&&e.searchable})),(function(t){return a("v-flex",{key:t.name,attrs:{lg2:"",md3:"",sm6:"",xs12:""}},[a("v-text-field",{attrs:{disabled:t.showAsAdditionalFilter,label:t.label,"append-outer-icon":e.getOuterIcon(t)},on:{"click:append-outer":function(){return e.onFieldOuterIconClick(t)}},model:{value:e.filterModel[t.name],callback:function(a){e.$set(e.filterModel,t.name,a)},expression:"filterModel[field.name]"}})],1)}))],2)})),1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"green darken-2"},on:{click:e.applyFilterModelValues}},[e._v(" Apply ")]),a("v-btn",{attrs:{color:"red lighten-2"},on:{click:function(t){return e.$refs.filterByValueForm.reset()}}},[e._v(" Clear ")]),a("v-spacer"),a("v-btn",{attrs:{color:"red darken-2"},on:{click:function(t){e.filterModelDialog=!1}}},[e._v(" Close ")])],1)],1)],1)],1)],1),a("v-flex",{staticClass:"scan-input-container",attrs:{shrink:"","mr-2":""}},[e.isSearchingForBarcode?a("v-progress-circular",{attrs:{indeterminate:""}}):e.fields.find((function(e){return"igsn"===e.name}))?a("v-checkbox",{attrs:{dense:"",loading:e.isSearchingForBarcode,label:"scanner",dark:""},model:{value:e.isCodeScanEnabled,callback:function(t){e.isCodeScanEnabled=t},expression:"isCodeScanEnabled"}}):e._e()],1)],1)],1),a("v-flex",{attrs:{md12:"",lg12:"",xl12:""}},[a("v-layout",{attrs:{"align-center":"",wrap:""}},[a("v-form",{ref:"filterByValueForm",staticClass:"c-dis-form__filter-form",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.applyFilterModelValues(t)}}},[a("v-container",{attrs:{fluid:"","grid-list-md":"","pa-2":""}},[a("v-layout",{attrs:{"align-center":"",row:"",wrap:""}},e._l(e.fields.filter((function(e){return e.hasOwnProperty("showAsAdditionalFilter")&&e.showAsAdditionalFilter})),(function(t){return a("v-flex",{key:t.name,attrs:{lg2:"",md3:"",sm6:"",xs12:""}},[!t.formInput.hasOwnProperty("selectSource")||"many_relation"!==t.formInput.selectSource.type&&"one_relation"!==t.formInput.selectSource.type?a("v-text-field",{attrs:{label:t.label,"append-outer-icon":e.getOuterIcon(t)},on:{"click:append-outer":function(){return e.onFieldOuterIconClick(t)}},model:{value:e.filterModel[t.name],callback:function(a){e.$set(e.filterModel,t.name,a)},expression:"filterModel[field.name]"}}):e._e(),"select"!==t.formInput.type||"many_relation"!==t.formInput.selectSource.type&&"one_relation"!==t.formInput.selectSource.type?e._e():a("dis-select-input",{attrs:{name:t.name,label:t.label,serverValidationErrors:[],selectSource:t.formInput.selectSource,allowFreeInput:t.formInput.allowFreeInput,multiple:t.formInput.multiple||!1,hint:t.description},on:{change:e.applyFilterModelValues},model:{value:e.filterModel[t.name],callback:function(a){e.$set(e.filterModel,t.name,a)},expression:"filterModel[field.name]"}})],1)})),1)],1)],1)],1)],1),a("input",{directives:[{name:"model",rawName:"v-model",value:e.scannedString,expression:"scannedString"}],ref:"scanInput",staticClass:"scan-input",domProps:{value:e.scannedString},on:{blur:e.onScanInputBlur,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchScannedString(t)},input:function(t){t.target.composing||(e.scannedString=t.target.value)}}})],1)},n=[],s=a("3835"),i=a("1da1"),o=a("2909"),l=(a("96cf"),a("7db0"),a("d3b7"),a("a630"),a("3ca3"),a("6062"),a("ddb0"),a("d81d"),a("159b"),a("b64b"),a("b0c0"),a("4de4"),a("4fad"),a("c740"),a("caad"),a("2532"),a("99af"),a("ac1f"),a("5319"),a("1276"),a("b4bd")),c=a("6661"),u=a("e34c"),d=a("4851"),m=a("27de"),p=a("b11c"),f={name:"DisFilterForm",mixins:[d["a"]],props:{dataModels:{type:Object,required:!0},value:{type:Object},formName:{type:String},dataModel:{type:String,required:!0},fields:{type:Array,required:!0},filterByValuesModel:{type:Object},filterValidation:{type:Array}},data:function(){return{selected:{},listItems:{},cascadeListItems:{},loading:!1,filterModel:{},filterByValues:!1,filterModelDialog:!1,shortcuts:m["a"],isCodeScanEnabled:!1,scannedString:"",isSearchingForBarcode:!1,showMiniHelp:!1,oldDependentFilterValues:[],fieldRules:[]}},mounted:function(){this.$watch("filterValidation",(function(){this.fieldRules=Object(o["a"])(this.filterValidation)}))},computed:{filterString:function(){var e=this,t="",a=function(a){if(e.selected[a]&&Array.isArray(e.cascadeListItems[a])&&e.cascadeListItems[a].length>0){var r=e.cascadeListItems[a].find((function(t){return t.value===e.selected[a]}));r&&(t+="".concat(r.text," "))}};for(var r in this.dataModels)a(r);return t},fieldsGroups:function(){return Array.from(new Set(this.fields.map((function(e){return e.group}))))},filterModelWithoutEmptyProps:function(){var e=this,t={};return Object.keys(this.filterModel).forEach((function(a){null!==e.filterModel[a]&&"undefined"!==typeof e.filterModel[a]&&""!==e.filterModel[a]&&(t[a]=e.filterModel[a])})),t}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.fields.map((function(t){t.searchable&&e.$set(e.filterModel,t.name,null)})),Object.keys(e.dataModels).forEach((function(t){return e.$set(e.selected,t,null)})),e.formName?(e.localStorage=new u["a"](e.formName),e.service=new l["a"](e.formName)):(e.localStorage=new u["a"](e.dataModel),e.service=new c["a"](e.dataModel)),e.localStorage.filterModel&&(e.filterModel=Object.assign(e.filterModel,e.localStorage.filterModel)),e.onSelectedChange=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("filter selected watcher"),e.localStorage.filter=e.selected,e.urlFilter=e.selected,t.next=5,e.getFilterListItems();case 5:e.refreshCascadeListItems(),e.$emit("change",e.selected);case 7:case"end":return t.stop()}}),t)}))),e.onSelectedChange=Object(p["a"])(e.onSelectedChange,500),e.urlFilter&&(e.selected=Object.assign(e.selected,e.urlFilter)),!e.urlFilter&&e.localStorage.filter&&(e.selected=Object.assign(e.selected,e.localStorage.filter)),t.next=10,e.getFilterListItems();case 10:e.refreshCascadeListItems(),e.unwatchSelected=e.$watch("selected",{immediate:!0,deep:!0,handler:function(e){this.onSelectedChange()}});case 12:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.unwatchSelected&&this.unwatchSelected()},methods:{handleValidationAfterFocus:function(){this.fieldRules=[],this.$emit("handleFilterValidation",this.fieldRules)},applyFilterModelValues:function(){this.localStorage.filterModel=this.filterModel,this.filterByValues&&this.$emit("update:filterByValuesModel",this.filterModelWithoutEmptyProps),this.filterByValues=!0,this.filterModelDialog=!1},getFilterListItems:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,o,l,c,u,d,m,p,f,_,v,h,g,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r in a=[],e.dataModels)if(n=e.dataModels[r],i=n.hasOwnProperty("require")?e.selected[n.require.value]:null,null!==i&&"undefined"!==typeof i)if(n.hasOwnProperty("require")||e.listItems[r])if(Object.entries(e.oldDependentFilterValues).length>0){for(o=!0,l=0,c=Object.entries(e.oldDependentFilterValues);l<c.length;l++)u=Object(s["a"])(c[l],2),d=u[0],m=u[1],void 0!==e.selected[n.require.value]&&d===n.require.value&&m===e.selected[n.require.value]&&(o=!1);o&&(p=n.require,a.push({model:r,require:{as:p.as,value:e.selected[p.value]}}))}else f=n.require,a.push({model:r,require:{as:f.as,value:e.selected[f.value]}});else a.push({model:r,require:null});else n.hasOwnProperty("require")||e.listItems[r]||e.cascadeListItems[r]||a.push({model:r,require:null});if(!(a.length>0)){t.next=9;break}return e.loading=!0,t.next=6,e.service.getFilterLists({models:a});case 6:for(v in _=t.sent,e.dataModels)_.data[v]&&(e.listItems[v]=_.data[v]);e.loading=!1;case 9:for(h in e.dataModels)g=e.dataModels[h].hasOwnProperty("require")?e.dataModels[h].require.value:null,b=e.dataModels[h].hasOwnProperty("require")?e.selected[e.dataModels[h].require.value]:null,g&&b&&(e.oldDependentFilterValues[g]=b);e.refreshCascadeListItems();case 11:case"end":return t.stop()}}),t)})))()},refreshCascadeListItems:function(){var e=this,t=function(t){var a=e.dataModels[t];if(a.require)if(e.selected[a.require.value]&&e.listItems[t]){var r=e.listItems[t].filter((function(t){return t[a.require.as]===e.selected[a.require.value]})),n=r.findIndex((function(a){return a.value===e.selected[t]}))>-1;e.cascadeListItems[t]=r,!1===n&&(e.selected[t]=null)}else e.selected[t]=null,e.cascadeListItems[t]=[];else e.cascadeListItems[t]=e.listItems[t]};for(var a in this.dataModels)t(a)},startBarcodeScanning:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:e.$refs.scanInput.focus();case 3:case"end":return t.stop()}}),t)})))()},onScanInputBlur:function(){var e=this;setTimeout((function(){e.isCodeScanEnabled&&(e.isCodeScanEnabled=!1)}),300)},searchScannedString:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.scannedString,e.scannedString="",t.prev=2,e.isSearchingForBarcode=!0,t.next=6,e.service.getList({},{igsn:a});case 6:if(r=t.sent,r.items.length>0){for(s in n={},e.dataModels)Object.keys(r.items[0]).includes(e.dataModels[s].ref)&&(n[s]=r.items[0][e.dataModels[s].ref]);i={path:"/forms/".concat(e.formName,"-form/").concat(r.items[0].id),query:{filter:e.filterToString(n)}},console.log(i),e.$router.replace(i)}t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),console.log(t.t0);case 13:return t.prev=13,e.isSearchingForBarcode=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[2,10,13,16]])})))()},switchListSortDirection:function(e){console.log("switchListSortDirection (".concat(e,")"),this.localStorage.ascFilterLists),this.localStorage.ascFilterLists.includes(e)?this.localStorage.ascFilterLists=this.localStorage.ascFilterLists.filter((function(t){return t!==e})):this.localStorage.ascFilterLists=[].concat(Object(o["a"])(this.localStorage.ascFilterLists),[e])},blurInputs:function(){for(var e in this.$refs.form.inputs)this.$refs.form.inputs[e].blur()},focusInputs:function(){var e=this.$refs.form;for(var t in e.inputs)if(!e.inputs[t].disabled){e.inputs[t].focus();break}},getOuterIcon:function(e){if("undefined"===typeof e.formInput)return null;switch(e.formInput.type){case"date":case"time":case"datetime":return"schedule";default:return null}},onFieldOuterIconClick:function(e){var t=this.$dateTime(new Date).toUtc().formatForDB();if(!e||!e.formInput)return null;switch(e.formInput.type){case"datetime":this.filterModel[e.name]=t;break;case"date":this.filterModel[e.name]=t.split(" ")[0];break;case"time":this.filterModel[e.name]=t.split(" ")[1];break;default:return null}}},watch:{isCodeScanEnabled:function(e){e&&this.startBarcodeScanning()},filterString:{handler:function(e){this.formName&&this.$setTitle(this.formName,e)}},filterByValues:{handler:function(e){!0===e?this.$emit("update:filterByValuesModel",this.filterModelWithoutEmptyProps):this.$emit("update:filterByValuesModel",{})}}}},_=f,v=(a("9806"),a("2877")),h=a("6544"),g=a.n(h),b=a("c6a6"),y=a("8336"),x=a("b0af"),w=a("99d9"),k=a("12b2"),C=a("ac7c"),O=a("a523"),M=a("169a"),j=a("0e8f"),I=a("4bd4"),E=a("132d"),D=a("a722"),T=a("490a"),F=a("9910"),S=a("b73d"),P=a("2677"),V=a("3a2f"),A=Object(v["a"])(_,r,n,!1,null,"3dca23bb",null);t["default"]=A.exports;g()(A,{VAutocomplete:b["a"],VBtn:y["a"],VCard:x["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:k["a"],VCheckbox:C["a"],VContainer:O["a"],VDialog:M["a"],VFlex:j["a"],VForm:I["a"],VIcon:E["a"],VLayout:D["a"],VProgressCircular:T["a"],VSpacer:F["a"],VSwitch:S["a"],VTextField:P["a"],VTooltip:V["a"]})},e34c:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var r=a("d4ec"),n=a("bee2"),s=(a("99af"),a("4de4"),a("d3b7"),a("4dd0")),i=a.n(s),o=a("2b0e"),l="F",c="S",u="P",d="C",m="OC",p="FM",f="AFL",_="APRN",v="APS",h="@uuids",g=function(){function e(t){Object(r["a"])(this,e),this.lsPrefix=window.baseUrl,this.formName=t,this.reactiveStorage={},o["default"].util.defineReactive(this.reactiveStorage,"ascFilterLists",this.getValue("".concat(this.formName,"_").concat(f))||[])}return Object(n["a"])(e,[{key:"getValue",value:function(e){return i.a.get(this.lsPrefix+e)}},{key:"setValue",value:function(e,t){i.a.set(this.lsPrefix+e,t)}},{key:"removeKey",value:function(e){e="".concat(this.formName,"_").concat(e),i.a.remove(this.lsPrefix+e)}},{key:"filter",get:function(){var e=this.getValue("".concat(this.formName,"_").concat(l));return e||{}},set:function(e){this.setValue("".concat(this.formName,"_").concat(l),e)}},{key:"selectedItemId",get:function(){var e=this.getValue("".concat(this.formName,"_").concat(c));return e||{}},set:function(e){this.setValue("".concat(this.formName,"_").concat(c),e)}},{key:"pagination",get:function(){var e=this.getValue("".concat(this.formName,"_").concat(u));return e||{}},set:function(e){this.setValue("".concat(this.formName,"_").concat(u),e)}},{key:"selectedColumns",get:function(){var e=this.getValue("".concat(this.formName,"_").concat(d));return e||null},set:function(e){this.setValue("".concat(this.formName,"_").concat(d),e)}},{key:"originalColumns",get:function(){var e=this.getValue("".concat(this.formName,"_").concat(m));return e||null},set:function(e){this.setValue("".concat(this.formName,"_").concat(m),e)}},{key:"filterModel",get:function(){var e=this.getValue("".concat(this.formName,"_").concat(p));return e||null},set:function(e){this.setValue("".concat(this.formName,"_").concat(p),e)}},{key:"ascFilterLists",get:function(){return this.reactiveStorage.ascFilterLists},set:function(e){this.reactiveStorage.ascFilterLists=e,this.setValue("".concat(this.formName,"_").concat(f),e)}},{key:"autoPrintReportName",get:function(){var e=this.getValue("".concat(this.formName,"_").concat(_));return e||""},set:function(e){this.setValue("".concat(this.formName,"_").concat(_),e)}},{key:"autoPrintOnSave",get:function(){var e=this.getValue("".concat(this.formName,"_").concat(v));return e},set:function(e){this.setValue("".concat(this.formName,"_").concat(v),e)}},{key:"uuidsList",get:function(){var e=this.getValue("".concat(this.formName,"_").concat(h));return e},set:function(e){this.setValue("".concat(this.formName,"_").concat(h),e)}},{key:"clear",value:function(){this.filter=null,this.pagination=null,this.selectedItemId=null,this.selectedColumns=null,this.filterModel=null,this.autoPrintReportName="",this.autoPrintOnSave=!1,this.uuidsList=null}}]),e}()},e372:function(e,t,a){"use strict";a("d3b7"),a("159b"),a("ddb0"),a("ac1f"),a("5319");var r=a("2b0e"),n=a("8103"),s=a.n(n),i=a("bba4"),o=a.n(i),l=a("375a"),c=a.n(l),u=a("e740"),d=a.n(u),m=[],p=a("9c55");p.keys().forEach((function(e){var t=p(e),a=s()(o()(e.replace(/^\.\/(.*)\.\w+$/,"$1")));r["default"].component(a,t.default||t),m.push({path:c()(a)+"/:id?",component:t.default||t,name:c()(a),meta:{requiresAuth:!0,breadcrumb:d()(a)}})})),t["a"]=m},e729:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-inline-flex"},[e.modelHasFiles?a("v-btn",{attrs:{round:"",disabled:e.showFilesButtonDisabled,color:"blue-grey"},on:{click:e.onShowFilesClick}},[e._v(" show files ("+e._s(e.relatedFilesCount)+") ")]):e._e(),e.modelHasFiles?a("v-btn",{attrs:{round:"",disabled:!e.selectedItem,dark:"",color:"blue-grey darken-2"},on:{click:e.onUploadFilesClick}},[e._v(" upload files ")]):e._e()],1)},n=[],s=a("1da1"),i=a("ade3"),o=a("53ca"),l=(a("96cf"),a("7db0"),a("d3b7"),a("b0c0"),a("c740"),a("b64b"),a("07ac"),a("d81d"),a("caad"),a("2532"),a("6661")),c={name:"DisFormFilesButtons",props:{selectedItem:{type:Object},dataModel:{required:!0,type:String},filterDataModels:{required:!0,type:Object}},data:function(){return{relatedFilesCount:0}},computed:{archiveFileTemplate:function(){return this.$store.state.templates.models.find((function(e){return"ArchiveFile"===e.fullName}))},filesFormTemplate:function(){return this.$store.state.templates.forms.find((function(e){return"files"===e.name}))},currentModelTemplate:function(){var e=this;return this.$store.state.templates.models.find((function(t){return t.fullName===e.dataModel}))},modelHasFiles:function(){var e=this;return console.log(this.archiveFileTemplate),this.currentModelTemplate&&this.archiveFileTemplate&&Object.keys(this.archiveFileTemplate.relations).findIndex((function(t){return e.archiveFileTemplate.relations[t].foreignTable===e.currentModelTemplate.table}))>-1},showFilesButtonDisabled:function(){return!this.selectedItem},selectedItemForeignKeyName:function(){var e=this;if(!this.selectedItem||!this.archiveFileTemplate||!this.currentModelTemplate)return null;var t=Object.values(this.archiveFileTemplate.relations).find((function(t){return t.foreignTable===e.currentModelTemplate.table}));return t?t.localColumns[0]:null},selectedItemIdFilterName:function(){var e=this;return this.selectedItem&&this.filesFormTemplate&&this.currentModelTemplate?Object.keys(this.filesFormTemplate.filterDataModels).find((function(t){return e.filesFormTemplate.filterDataModels[t].model===e.dataModel})):null},filesFilterQuery:function(){var e=this;if(!this.selectedItem||!this.archiveFileTemplate)return null;var t={},a=Object.keys(this.archiveFileTemplate.columns);return Object.keys(this.filterDataModels).map((function(r){a.includes(e.filterDataModels[r].ref)&&("object"===Object(o["a"])(e.selectedItem[e.filterDataModels[r].ref])?t[r]=e.selectedItem[e.filterDataModels[r].ref].id:t[r]=e.selectedItem[e.filterDataModels[r].ref])})),Object.assign(t,Object(i["a"])({},this.selectedItemIdFilterName,this.selectedItem.id))},filesFilterValues:function(){if(!this.selectedItem||!this.archiveFileTemplate)return{};var e=Object.keys(this.archiveFileTemplate.columns),t={};return e.includes(this.selectedItemForeignKeyName)&&(t=Object.assign(t,Object(i["a"])({},this.selectedItemForeignKeyName,this.selectedItem.id))),t}},created:function(){this.$store.dispatch("templates/getModelTemplate","ArchiveFile"),this.$store.dispatch("templates/getFormTemplate","files"),this.$store.dispatch("templates/getModelTemplate",this.dataModel)},methods:{onShowFilesClick:function(){this.$emit("show-files-click",this.filesFilterQuery)},onUploadFilesClick:function(){this.$emit("upload-files-click",this.filesFilterQuery)}},watch:{selectedItem:{immediate:!0,handler:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectedItem){t.next=4;break}e.relatedFilesCount=0,t.next=9;break;case 4:return e.filesService=new l["a"]("ArchiveFile"),t.next=7,e.filesService.getList({page:-1,fields:"id"},e.filesFilterValues);case 7:a=t.sent,e.relatedFilesCount=a.items.length;case 9:case"end":return t.stop()}}),t)})))()}}}},u=c,d=a("2877"),m=a("6544"),p=a.n(m),f=a("8336"),_=Object(d["a"])(u,r,n,!1,null,"332826f7",null);t["default"]=_.exports;p()(_,{VBtn:f["a"]})},e847:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-text-field",e._g(e._b({attrs:{value:e.inputValue,rules:e.getRules(),label:e.inputLabel,"error-messages":e.fieldServerValidationErrors,type:"date","append-outer-icon":"alarm_add"},on:{"click:append-outer":e.onOuterIconClick}},"v-text-field",e.$attrs,!1),e.listeners))},n=[],s=(a("a15b"),a("ac1f"),a("1276"),a("39f3")),i={name:"DisDateInput",mixins:[s["a"]],props:{value:{type:String}},data:function(){return{inputValue:""}},watch:{value:function(e){this.inputValue=e}},methods:{onOuterIconClick:function(){var e=(new Date).toLocaleDateString("en-GB").split("/").reverse().join("-");!this.$attrs.disabled&&!this.$attrs.readonly&&this.$emit("input",e)}}},o=i,l=a("2877"),c=a("6544"),u=a.n(c),d=a("2677"),m=Object(l["a"])(o,r,n,!1,null,"79d0b50c",null);t["default"]=m.exports;u()(m,{VTextField:d["a"]})},f321:function(e,t,a){"use strict";a("fb6b")},f482:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("input",e._g(e._b({attrs:{type:"hidden"},domProps:{value:e.value}},"input",e.$attrs,!1),e.listeners))},n=[],s=a("5530"),i=(a("a9e3"),{name:"DisAutoIncrementInput",props:{value:{type:Number}},computed:{listeners:function(){return Object(s["a"])({},this.$listeners)}}}),o=i,l=a("2877"),c=Object(l["a"])(o,r,n,!1,null,"5f382227",null);t["default"]=c.exports},fb6b:function(e,t,a){},fd3e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{class:Object.assign({"c-dis-select-auto-print":!0},e.themeClasses),attrs:{"align-center":""}},[a("v-flex",{attrs:{shrink:""}},[a("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Print on save",disabled:!e.value.reportName},model:{value:e.value.active,callback:function(t){e.$set(e.value,"active",t)},expression:"value.active"}})],1),a("v-flex",{attrs:{shrink:""}},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({directives:[{name:"el-mousetrap",rawName:"v-el-mousetrap",value:{keys:"down"},expression:"{keys: 'down'}"}],attrs:{icon:""}},"v-btn",n,!1),r),[a("v-icon",[e._v("expand_more")])],1)]}}]),model:{value:e.showReportList,callback:function(t){e.showReportList=t},expression:"showReportList"}},[a("v-card",[a("v-card-text",{staticClass:"pb-0"},[a("v-radio-group",{staticClass:"mt-0",model:{value:e.value.reportName,callback:function(t){e.$set(e.value,"reportName",t)},expression:"value.reportName"}},e._l(e.autoPrintReports,(function(e){return a("v-radio",{key:e.name,attrs:{label:e.title,value:e.name}})})),1)],1)],1)],1)],1)],1)},n=[],s=a("1da1"),i=(a("b0c0"),a("96cf"),a("6a18")),o={name:"DisSelectAutoPrint",mixins:[i["a"]],props:{autoPrintReports:{type:Array,required:!0},value:{type:Object,required:!0}},data:function(){return{showReportList:!1}},created:function(){this.value.reportName||(this.value.active=!1)},beforeDestroy:function(){},mounted:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},computed:{},methods:{onSelectReport:function(e,t){console.log("item:",e,"e:",t),this.value.reportName=e.name}},watch:{}},l=o,c=a("2877"),u=a("6544"),d=a.n(u),m=a("8336"),p=a("b0af"),f=a("99d9"),_=a("ac7c"),v=a("0e8f"),h=a("132d"),g=a("a722"),b=a("e449"),y=a("67b6"),x=a("43a6"),w=Object(c["a"])(l,r,n,!1,null,null,null);t["default"]=w.exports;d()(w,{VBtn:m["a"],VCard:p["a"],VCardText:f["b"],VCheckbox:_["a"],VFlex:v["a"],VIcon:h["a"],VLayout:g["a"],VMenu:b["a"],VRadio:y["a"],VRadioGroup:x["a"]})}});
//# sourceMappingURL=app.3e29e969.js.map